\begin{pspicture}(-2,-0.5)(11,8)

	% Thread.
  \multiput(0,0)(4,0){2}{
  \psbrace[singleline,ref=lC,linewidth=0.5pt,braceWidthInner=7\pslinewidth,braceWidthOuter=7\pslinewidth,nodesepB=-3pt,rot=270,ref=B](4,6.8)(1,6.8){block}

	  \multiput(0,0)(2,0){2}{
      \uput[u](1.5, 6.1){thread}
	    \psframe(1,5.1)(2,6)
	    \psframe(1,4.6)(2,5.05)

      \psline{<->}(1.5,3.5)(1.5,4.55)
	    \psframe(1,3)(2,3.45)
    }
    \psline{-}(2.6,4.825)(2.95,4.825)
    \psline{->}(2.6,4.825)(2.6,2.5)
    \psline{<-}(2.05,4.825)(2.4,4.825)
    \psline{-}(2.4,4.825)(2.4,2.5)

    \psframe(1,2)(4,2.45) 
  }

  \psline{-}(4.6,4.825)(4.95,4.825)
  \psline{->}(4.6,4.825)(4.6,1.5)
  \psline{<-}(4.05,4.825)(4.4,4.825)
  \psline{-}(4.4,4.825)(4.4,1.5)
  \psframe(1,1)(8,1.45) 

  \psline{-}(0.6,4.825)(0.95,4.825)
  \psline{-}(0.6,4.825)(0.6,0.225)
  \psline{->}(0.6,0.225)(0.95,0.225)
  \psline{->}(8.4,4.825)(8.05,4.825)
  \psline{-}(8.4,4.825)(8.4,0.225)
  \psline{-}(8.4,0.225)(8.05,0.225)
  \psframe(1,0)(8,0.45) 

  \rput[l](8.8,3.225){--- registers}
  \rput[l](8.8,2.225){--- shared}
  \rput[l](8.8,1.225){--- L2 cache}
  \rput[l](8.8,0.225){--- global}

\end{pspicture}

