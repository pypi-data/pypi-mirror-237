{
  "$id": "https://github.com/termux/termux-language-server/blob/main/src/termux_language_server/assets/json/build.sh.json",
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$comment": "Don't edit this file directly! It is generated by `termux-language-server --generate-schema=build.sh`.",
  "type": "object",
  "required": [
    "TERMUX_PKG_HOMEPAGE",
    "TERMUX_PKG_DESCRIPTION",
    "TERMUX_PKG_LICENSE",
    "TERMUX_PKG_VERSION",
    "TERMUX_PKG_AUTO_UPDATE"
  ],
  "properties": {
    "TERMUX_PKG_HOMEPAGE": {
      "type": "string",
      "description": "Home page URL.",
      "format": "uri"
    },
    "TERMUX_PKG_DESCRIPTION": {
      "type": "string",
      "description": "Short, one-line description of package."
    },
    "TERMUX_PKG_LICENSE": {
      "type": "string",
      "description": "Package license."
    },
    "TERMUX_PKG_LICENSE_FILE": {
      "type": "string",
      "description": "Name of license file, if it is not found automatically."
    },
    "TERMUX_PKG_MAINTAINER": {
      "type": "string",
      "description": "Package maintainer.",
      "default": "@termux"
    },
    "TERMUX_PKG_API_LEVEL": {
      "type": "string",
      "description": "Android API level for which package should be compiled."
    },
    "TERMUX_PKG_VERSION": {
      "type": "string",
      "description": "Original package version."
    },
    "TERMUX_PKG_REVISION": {
      "type": "string",
      "description": "Package revision. Bumped on each package rebuild."
    },
    "TERMUX_PKG_SKIP_SRC_EXTRACT": {
      "type": "string",
      "description": "Whether to omit source code downloading and extraction. Default is false.",
      "default": "false",
      "enum": [
        "true",
        "false"
      ]
    },
    "TERMUX_PKG_SRCURL": {
      "type": "string",
      "description": "URL from which source archive should be downloaded, either an archive or a git url ending with .git",
      "format": "uri"
    },
    "TERMUX_PKG_SHA256": {
      "type": "string",
      "description": "SHA-256 checksum of source archive."
    },
    "TERMUX_PKG_GIT_BRANCH": {
      "type": "string",
      "description": "Branch to checkout in termux_step_git_clone_src. Default is v$TERMUX_PKG_VERSION."
    },
    "TERMUX_PKG_METAPACKAGE": {
      "type": "string",
      "description": "Whether to make package treated as metapackage. Default is false.",
      "default": "false",
      "enum": [
        "true",
        "false"
      ]
    },
    "TERMUX_PKG_DEPENDS": {
      "type": "string",
      "description": "Comma-separated list of dependency package names.",
      "pattern": "[a-z][a-z0-9-]*(, [a-z][a-z0-9-]*)*"
    },
    "TERMUX_PKG_BUILD_DEPENDS": {
      "type": "string",
      "description": "Comma-separated list of build-time only dependencies.",
      "pattern": "[a-z][a-z0-9-]*(, [a-z][a-z0-9-]*)*"
    },
    "TERMUX_PKG_BREAKS": {
      "type": "string",
      "description": "Comma-separated list of packages that are incompatible with the current one.",
      "pattern": "[a-z][a-z0-9-]*(, [a-z][a-z0-9-]*)*"
    },
    "TERMUX_PKG_CONFLICTS": {
      "type": "string",
      "description": "Comma-separated list of packages which have file name collisions with the current one.",
      "pattern": "[a-z][a-z0-9-]*(, [a-z][a-z0-9-]*)*"
    },
    "TERMUX_PKG_REPLACES": {
      "type": "string",
      "description": "Comma-separated list of packages being replaced by current one.",
      "pattern": "[a-z][a-z0-9-]*(, [a-z][a-z0-9-]*)*"
    },
    "TERMUX_PKG_PROVIDES": {
      "type": "string",
      "description": "Comma-separated list of virtual packages being provided by current one.",
      "pattern": "[a-z][a-z0-9-]*(, [a-z][a-z0-9-]*)*"
    },
    "TERMUX_PKG_RECOMMENDS": {
      "type": "string",
      "description": "Comma-separated list of non-absolute dependencies - packages usually used with the current one.",
      "pattern": "[a-z][a-z0-9-]*(, [a-z][a-z0-9-]*)*"
    },
    "TERMUX_PKG_SUGGESTS": {
      "type": "string",
      "description": "Comma-separated list of packages that are related to or enhance the current one.",
      "pattern": "[a-z][a-z0-9-]*(, [a-z][a-z0-9-]*)*"
    },
    "TERMUX_PKG_ESSENTIAL": {
      "type": "string",
      "description": "Whether to treat package as essential which cannot be uninstalled in usual way. Default is false.",
      "default": "false",
      "enum": [
        "true",
        "false"
      ]
    },
    "TERMUX_PKG_NO_STATICSPLIT": {
      "type": "string",
      "description": "Whether to split static libraries into a subpackage. Default is false.",
      "default": "false",
      "enum": [
        "true",
        "false"
      ]
    },
    "TERMUX_PKG_STATICSPLIT_EXTRA_PATTERNS": {
      "type": "string",
      "description": "Extra patterns to include in static package. It must be relative to $TERMUX_PREFIX. For example: to include *.h files from $TERMUX_PREFIX/lib, specify lib/*.h. You can use bash globstar patterns to recurse sub-directories."
    },
    "TERMUX_PKG_IS_HASKELL_LIB": {
      "type": "string",
      "description": "Whether the package is haskell library. Default is false.",
      "default": "false",
      "enum": [
        "true",
        "false"
      ]
    },
    "TERMUX_PKG_BUILD_IN_SRC": {
      "type": "string",
      "description": "Whether to perform build in a source code directory. Default is false.",
      "default": "false",
      "enum": [
        "true",
        "false"
      ]
    },
    "TERMUX_PKG_HAS_DEBUG": {
      "type": "string",
      "description": "Whether debug builds are possible for package. Default is true.",
      "default": "true",
      "enum": [
        "true",
        "false"
      ]
    },
    "TERMUX_PKG_PLATFORM_INDEPENDENT": {
      "type": "string",
      "description": "Whether to treat package as platform independent. Default is false.",
      "default": "false",
      "enum": [
        "true",
        "false"
      ]
    },
    "TERMUX_PKG_BLACKLISTED_ARCHES": {
      "type": "string",
      "description": "Comma-separated list of CPU architectures for which package cannot be compiled.",
      "pattern": "[a-z][a-z0-9-]*(, [a-z][a-z0-9-]*)*"
    },
    "TERMUX_PKG_HOSTBUILD": {
      "type": "string",
      "description": "Whether package require building for host. Default is false.",
      "default": "false",
      "enum": [
        "true",
        "false"
      ]
    },
    "TERMUX_PKG_FORCE_CMAKE": {
      "type": "string",
      "description": "Whether to prefer CMake over Autotools configure script. Default is false.",
      "default": "false",
      "enum": [
        "true",
        "false"
      ]
    },
    "TERMUX_PKG_EXTRA_CONFIGURE_ARGS": {
      "type": "string",
      "description": "Extra arguments passed to build system configuration utility."
    },
    "TERMUX_PKG_EXTRA_HOSTBUILD_CONFIGURE_ARGS": {
      "type": "string",
      "description": "Extra arguments passed to build system configuration utility when performing host build."
    },
    "TERMUX_PKG_EXTRA_MAKE_ARGS": {
      "type": "string",
      "description": "Extra arguments passed to utility make."
    },
    "TERMUX_PKG_MAKE_INSTALL_TARGET": {
      "type": "string",
      "description": "Equivalent for install argument passed to utility make in the installation process."
    },
    "TERMUX_PKG_RM_AFTER_INSTALL": {
      "type": "string",
      "description": "List of files that should be removed after installation process."
    },
    "TERMUX_PKG_CONFFILES": {
      "type": "string",
      "description": "A space or newline separated list of package configuration files that should not be overwritten on update."
    },
    "TERMUX_PKG_SERVICE_SCRIPT": {
      "type": "string",
      "description": "Array of even length containing daemon name(s) and script(s) for use with termux-services/runit."
    },
    "TERMUX_PKG_GO_USE_OLDER": {
      "type": "string",
      "description": "Use the older supported release of Go (1.19.7). Default is false.",
      "default": "false",
      "enum": [
        "true",
        "false"
      ]
    },
    "TERMUX_PKG_NO_STRIP": {
      "type": "string",
      "description": "Disable stripping binaries. Default is false.",
      "default": "false",
      "enum": [
        "true",
        "false"
      ]
    },
    "TERMUX_PKG_NO_SHEBANG_FIX": {
      "type": "string",
      "description": "Skip fixing shebang accordingly to $TERMUX_PREFIX. Default is false.",
      "default": "false",
      "enum": [
        "true",
        "false"
      ]
    },
    "TERMUX_PKG_NO_ELF_CLEANER": {
      "type": "string",
      "description": "Disable running of termux-elf-cleaner on built binaries. Default is false.",
      "default": "false",
      "enum": [
        "true",
        "false"
      ]
    },
    "TERMUX_PKG_AUTO_UPDATE": {
      "type": "string",
      "description": "Whether to enable automatic updates for this package. Currently packages hosted on GitHub, Gitlab or tracked by repology can be auto updated. For using your own method see here. After writing build.sh you can check if package can be auto-updated using script at scripts/bin/check-auto-update."
    },
    "TERMUX_PKG_UPDATE_VERSION_REGEXP": {
      "type": "string",
      "description": "Regex to extract version from the new computed version.  \u2022 grep -P is set, so you can use perl regex.Use case: any api may return new version as Release_8.9.0, but we want only 8.9.0. So, we can extract it using \\d+\\.\\d+\\.\\d+.",
      "format": "regex"
    },
    "TERMUX_PKG_UPDATE_METHOD": {
      "type": "string",
      "description": "Which method to use for auto-update. Can be github, gitlab or repology. By default it is decided on the basis of TERMUX_PKG_SRCURL",
      "enum": [
        "github",
        "gitlab",
        "repology"
      ]
    },
    "TERMUX_PKG_UPDATE_TAG_TYPE": {
      "type": "string",
      "description": "Whether to get latest-release-tag or newest-tag (sorted by commit date) if using github or gitlab method for auto-update. By default if TERMUX_PKG_SRCURL ends in .git then newest-tag is fetched otherwise latest-release-tag."
    },
    "TERMUX_GITLAB_API_HOST": {
      "type": "string",
      "description": "Which host to use for gitlab api. Default gitlab.com",
      "default": "gitlab.com",
      "format": "hostname"
    },
    "termux_step_get_source": {
      "description": "Obtain package source code and put it in $TERMUX_PKG_SRCDIR.",
      "const": 0
    },
    "termux_step_post_get_source": {
      "description": "Hook to run commands immediately after obtaining source code.",
      "const": 0
    },
    "termux_step_handle_host_build": {
      "description": "Determine whether a host build is required.",
      "const": 0
    },
    "termux_step_host_build": {
      "description": "Perform a host build.",
      "const": 0
    },
    "termux_step_pre_configure": {
      "description": "Hook to run commands before source configuration.",
      "const": 0
    },
    "termux_step_configure": {
      "description": "Configure sources. By default, it determines build system automatically.",
      "const": 0
    },
    "termux_step_post_configure": {
      "description": "Hook to run commands immediately after configuration.",
      "const": 0
    },
    "termux_step_make": {
      "description": "Compile the source code.",
      "const": 0
    },
    "termux_step_make_install": {
      "description": "Install the compiled artifacts.",
      "const": 0
    },
    "termux_step_post_make_install": {
      "description": "Hook to run commands immediately after installation.",
      "const": 0
    },
    "termux_step_install_service_scripts": {
      "description": "Installs scripts for termux-services",
      "const": 0
    },
    "termux_step_install_license": {
      "description": "Link or copy package-specific LICENSE to ./share/doc/$TERMUX_PKG_NAME.",
      "const": 0
    },
    "termux_step_extract_into_massagedir": {
      "description": "Extract files modified in $TERMUX_PREFIX.",
      "const": 0
    },
    "termux_step_post_massage": {
      "description": "Final hook before creating *.deb file(s).",
      "const": 0
    },
    "termux_step_create_debscripts": {
      "description": "Create maintainer scripts, e.g. pre/post installation hooks.",
      "const": 0
    },
    "termux_pkg_auto_update": {
      "description": "By default, decide which method (gitlab, github or repology) to use for update, but can be overrided to use custom method (See here).",
      "const": 0
    }
  },
  "propertyNames": {
    "not": {
      "anyOf": [
        {
          "const": "TERMUX_ON_DEVICE_BUILD",
          "description": "If set, assume that building on device."
        },
        {
          "const": "TERMUX_BUILD_IGNORE_LOCK",
          "description": "If set to true, ignore build process lock."
        },
        {
          "const": "TERMUX_BUILD_LOCK_FILE",
          "description": "Path to build process lock file."
        },
        {
          "const": "TERMUX_HOST_PLATFORM",
          "description": "Host platform definition. Usually $TERMUX_ARCH-linux-android."
        },
        {
          "const": "TERMUX_PKG_BUILDDIR",
          "description": "Path to build directory of current package."
        },
        {
          "const": "TERMUX_PKG_BUILDER_DIR",
          "description": "Path to directory where located build.sh of current package."
        },
        {
          "const": "TERMUX_PKG_BUILDER_SCRIPT",
          "description": "Path to build.sh of current package."
        },
        {
          "const": "TERMUX_PKG_CACHEDIR",
          "description": "Path to source cache directory of current package."
        },
        {
          "const": "TERMUX_PKG_MASSAGEDIR",
          "description": "Path to directory where package content will be extracted from $TERMUX_PREFIX."
        },
        {
          "const": "TERMUX_PKG_PACKAGEDIR",
          "description": "Path to directory where components of *.deb archive of current package will be created."
        },
        {
          "const": "TERMUX_PKG_SRCDIR",
          "description": "Path to source directory of current package."
        },
        {
          "const": "TERMUX_PKG_TMPDIR",
          "description": "Path to temporary directory specific for current package."
        },
        {
          "const": "TERMUX_COMMON_CACHEDIR",
          "description": "Path to global cache directory where build tools are stored."
        },
        {
          "const": "TERMUX_SCRIPTDIR",
          "description": "Path to directory with utility scripts."
        },
        {
          "const": "TERMUX_PKG_NAME",
          "description": "Name of current package."
        },
        {
          "const": "TERMUX_REPO_URL",
          "description": "Array of APT repository URLs from which dependencies will be downloaded if ./build-package.sh got option -i or -I."
        },
        {
          "const": "TERMUX_REPO_DISTRIBUTION",
          "description": "Array of distribution names in addition for TERMUX_REPO_URL."
        },
        {
          "const": "TERMUX_REPO_COMPONENT",
          "description": "Array of repository component names in addition for TERMUX_REPO_URL."
        },
        {
          "const": "TERMUX_PACKAGE_FORMAT",
          "description": "Package output format."
        },
        {
          "const": "termux_error_exit",
          "description": "Stop script and output error."
        },
        {
          "const": "termux_download",
          "description": "Utility function to download any file."
        },
        {
          "const": "termux_setup_golang",
          "description": "Setup Go Build environment."
        },
        {
          "const": "termux_setup_cmake",
          "description": "Setup CMake configure system."
        },
        {
          "const": "termux_setup_ninja",
          "description": "Setup Ninja make system."
        },
        {
          "const": "termux_setup_meson",
          "description": "Setup Meson configure system."
        },
        {
          "const": "termux_setup_protobuf",
          "description": "Setup Protobuf compiler."
        },
        {
          "const": "termux_setup_rust",
          "description": "Setup Cargo Build."
        },
        {
          "const": "termux_setup_ghc_cross_compiler",
          "description": "Setup ghc cross-compiler targeting Android."
        },
        {
          "const": "termux_setup_ghc",
          "description": "Setup ghc compiler for host build."
        },
        {
          "const": "termux_setup_jailbreak_cabal",
          "description": "Setup jailbreak-cabal utility. It is used to remove version constraints from Haskell (with cabal build system)"
        },
        {
          "const": "termux_step_setup_variables",
          "description": "Setup essential variables like directory locations and flags."
        },
        {
          "const": "termux_step_handle_buildarch",
          "description": "Determine architecture to build for."
        },
        {
          "const": "termux_step_setup_build_folders",
          "description": "Delete old src and build directories if they exist."
        },
        {
          "const": "termux_step_start_build",
          "description": "Initialize build environment. Source package's build.sh."
        },
        {
          "const": "termux_step_get_dependencies",
          "description": "Download or build specified dependencies of the package."
        },
        {
          "const": "termux_step_get_repo_files",
          "description": "Fetch APT packages information when -i or -I option was supplied."
        },
        {
          "const": "termux_extract_dep_info",
          "description": "Obtain package architecture and version for downloading."
        },
        {
          "const": "termux_step_create_timestamp_file",
          "description": "Make timestamp to determine which files have been installed by the build."
        },
        {
          "const": "termux_download_deb",
          "description": "Download dependency *.deb packages for installation."
        },
        {
          "const": "termux_git_clone_src",
          "description": "Obtain source by git clone, is run if $TERMUX_PKG_SRCURL ends with \".git\"."
        },
        {
          "const": "termux_download_src_archive",
          "description": "Download zip or tar archive with package source code."
        },
        {
          "const": "termux_unpack_src_archive",
          "description": "Extract downloaded archive into $TERMUX_PKG_SRCDIR."
        },
        {
          "const": "termux_step_setup_toolchain",
          "description": "Setup NDK standalone toolchain."
        },
        {
          "const": "termux_step_patch_package",
          "description": "Apply to source code all *.patch files located in package's directory."
        },
        {
          "const": "termux_step_replace_guess_scripts",
          "description": "Replace config.sub and config.guess scripts."
        },
        {
          "const": "termux_step_configure_haskell_build",
          "description": "Haskell packages build configuration."
        },
        {
          "const": "termux_step_configure_autotools",
          "description": "Autotools build configuration."
        },
        {
          "const": "termux_step_configure_cmake",
          "description": "CMake build configuration."
        },
        {
          "const": "termux_step_configure_meson",
          "description": "Meson build configuration."
        },
        {
          "const": "termux_step_massage",
          "description": "Strip binaries, remove unneeded files."
        },
        {
          "const": "termux_create_debian_subpackages",
          "description": "Creates all subpackages (debian format)."
        },
        {
          "const": "termux_create_pacman_subpackages",
          "description": "Creates all subpackages (pacman format)."
        },
        {
          "const": "termux_step_create_debian_package",
          "description": "Create *.deb package."
        },
        {
          "const": "termux_step_create_pacman_package",
          "description": "Create *.pkg.tar.xz package."
        },
        {
          "const": "termux_step_create_pacman_install_hook",
          "description": "Convert result of termux_step_create_debscripts to pacman-compatible format."
        },
        {
          "const": "termux_step_finish_build",
          "description": "Notification of finish."
        },
        {
          "const": "termux_error_exit",
          "description": "Function to write error message to stderr and exit."
        },
        {
          "const": "termux_github_api_get_tag",
          "description": "Query GitHub API for:  \u2022 latest-release-tag: useful for projects using github's release mechanism.  \u2022 newest-tag(sorted by commit date): useful for projects having tags but no releases."
        },
        {
          "const": "termux_gitlab_api_get_tag",
          "description": "same as above, but for gitlab"
        },
        {
          "const": "termux_repology_api_get_latest_version",
          "description": "Query repology api for latest version."
        },
        {
          "const": "termux_github_auto_update",
          "description": "Default update method for packages hosted on github.com. It decides which type of tag to fetch based on TERMUX_PKG_SRCURL."
        },
        {
          "const": "termux_gitlab_auto_update",
          "description": "Default update method for packages hosted on gitlab.com (or host specified by TERMUX_GITLAB_API_HOST). It decides which type of tag to fetch based on TERMUX_PKG_SRCURL."
        },
        {
          "const": "termux_pkg_upgrade_version",
          "description": "Write the latest version and updated checksum, check whether updated package builds properly and then push changes to repo."
        },
        {
          "const": "termux_pkg_is_update_needed",
          "description": "Check whether LATEST_VERSION is greater than TERMUX_PKG_VERSION or not.  Called if --skip-version-check was not passed to termux_pkg_upgrade_version.  NOTE: You should not call it manually otherwise if TERMUX_PKG_UPDATE_VERSION_REGEXP is used, it won't compare versions extracted from it. Version is extracted by termux_pkg_upgrade_version."
        }
      ]
    }
  }
}
