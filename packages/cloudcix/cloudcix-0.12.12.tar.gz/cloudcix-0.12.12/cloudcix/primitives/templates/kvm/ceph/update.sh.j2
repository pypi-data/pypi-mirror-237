{# Stop execution if something fails #}
set -e

{# Check if the drive exists #}
rbd --pool {{ pool_name }} list | grep --quiet --regexp={{ device_name }}
if [ $? -neq 0 ]; then
  echo "Drive '{{ device_name }}' does not exist" \
  && exit 0

{# Resize the drive #}
rbd resize --size {{ device_size }} {{ pool_name }}/{{ device_name }} \
  && echo -n {{ success_id }}

