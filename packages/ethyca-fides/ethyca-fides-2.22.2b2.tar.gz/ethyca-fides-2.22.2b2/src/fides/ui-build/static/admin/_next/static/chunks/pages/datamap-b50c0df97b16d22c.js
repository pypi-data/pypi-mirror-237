(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9738],{82466:function(e,t,n){"use strict";var r=n(90089),i=n(90849),o=n(40240),s=n(34896),a=n(55422),l=n(24246),c=n(27378),u=["key"],d=["key"];function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.Z=function(e){var t=e.rowHeading,n=e.renderRowSubheading,i=e.renderOverflowMenu,p=e.rows,h=e.prepareRow,x=e.getTableBodyProps,m=e.onSubrowClick;return(0,l.jsx)(o.p3,f(f({backgroundColor:a.p},x()),{},{children:p.map((function(e){return h(e),[(0,c.createElement)(o.Tr,f(f({},e.getRowProps()),{},{borderTopLeftRadius:"6px",borderTopRightRadius:"6px",backgroundColor:"gray.50",borderWidth:"1px",borderBottom:"none",mt:4,ml:4,mr:4,key:e.groupByVal,"data-testid":"grouped-row-".concat(e.groupByVal)}),(0,l.jsxs)(o.Td,f(f({display:"flex",justifyContent:"space-between",colSpan:e.cells.length},e.cells[0].getCellProps()),{},{width:"auto",paddingX:2,children:[(0,l.jsxs)(s.Kq,{children:[t?(0,l.jsx)(s.xv,{fontSize:"xs",lineHeight:4,fontWeight:"500",color:"gray.600",textTransform:"uppercase",pb:2,pt:1,children:t}):null,(0,l.jsx)(s.xv,{fontSize:"sm",lineHeight:5,fontWeight:"bold",color:"gray.600",mb:1,children:n(e)})]}),i?i(e):null]}))),e.subRows.map((function(t,n){h(t);var i=t.getRowProps(),s=i.key,a=(0,r.Z)(i,u);return(0,l.jsx)(o.Tr,f(f({minHeight:9,borderWidth:"1px",borderColor:"gray.200",borderTop:"none",borderBottomLeftRadius:n===e.subRows.length-1?"6px":"",borderBottomRightRadius:n===e.subRows.length-1?"6px":""},a),{},{_hover:{bg:"gray.50"},cursor:m?"pointer":void 0,backgroundColor:"white",onClick:m?function(){return m(t)}:void 0,ml:4,mr:4,_last:{mb:4},children:t.cells.map((function(e,n){var i=e.getCellProps(),s=i.key,a=(0,r.Z)(i,d);return(0,l.jsx)(o.Td,f(f({},a),{},{borderRightWidth:n===t.cells.length-1?"":"1px",borderBottom:"none",borderColor:"gray.200",padding:0,"data-testid":"subrow-".concat(s),children:e.render("Cell")}),s)}))}),s)}))]}))}))}},99725:function(e,t,n){"use strict";var r=n(90849),i=n(90089),o=n(40240),s=n(34896),a=n(55422),l=n(24246),c=["key"],u=["key"];function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var f=function(){return(0,l.jsx)(o.Th,{padding:0,margin:0,width:4,borderBottomColor:"gray.200",boxSizing:"border-box"})};t.Z=function(e){var t=e.headerGroups;return(0,l.jsx)(o.hr,{position:"sticky",top:"0px",height:"36px",zIndex:10,backgroundColor:a.p,children:t.map((function(e){var t=e.getHeaderGroupProps(),n=t.key,r=(0,i.Z)(t,c);return(0,l.jsxs)(o.Tr,p(p({},r),{},{height:"inherit",children:[(0,l.jsx)(f,{}),e.headers.map((function(e,t){var n=e.getHeaderProps(),r=n.key,a=(0,i.Z)(n,u);return(0,l.jsxs)(o.Th,p(p({},a),{},{title:"".concat(e.Header),textTransform:"none",px:2,display:"flex",alignItems:"center",borderLeftWidth:0===t?"1px":"",borderRightWidth:"1px",borderColor:"gray.200",children:[(0,l.jsx)(s.xv,{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",mr:1,children:e.render("Header")}),e.canResize&&(0,l.jsx)(s.xu,p(p({},e.getResizerProps()),{},{position:"absolute",top:0,right:0,width:2,height:"100%",css:{touchAction:":none"}}))]}),r)})),(0,l.jsx)(f,{})]}),n)}))})}},55422:function(e,t,n){"use strict";n.d(t,{p:function(){return r}});var r="#F7F7F7"},66521:function(e,t,n){"use strict";n.d(t,{Y:function(){return s}});var r=n(27378),i=n(24246),o=(0,r.createRef)(),s=(0,r.createContext)(o);t.Z=function(e){var t=e.children;return(0,i.jsx)(s.Provider,{value:o,children:t})}},76459:function(e,t,n){"use strict";n.d(t,{m:function(){return a}});var r=n(43350),i=n(80040),o=n(90849),s=n(27378),a=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;(0,r.Z)(this,e),(0,o.Z)(this,"tableInstance",void 0),this.tableInstance=t,this.updateTableInstance=this.updateTableInstance.bind(this)}return(0,i.Z)(e,[{key:"updateTableInstance",value:function(e){this.tableInstance=e}}]),e}(),l=s.createContext(new a);t.Z=l},85249:function(e,t,n){"use strict";var r=n(34896),i=n(27378),o=n(60378),s=n(44845),a=n(24246);t.Z=function(e){var t=e.globalFilter,n=e.setGlobalFilter,l=e.placeholder,c=(0,i.useState)(t),u=c[0],d=c[1],p=(0,o.useAsyncDebounce)((function(e){n(e||void 0)}),200);return(0,a.jsx)(r.xu,{maxWidth:"510px",width:"100%",children:(0,a.jsx)(s.Z,{onChange:function(e){d(e),p(e)},onClear:function(){d(void 0),n(void 0)},search:u||"",placeholder:l})})}},50786:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return xt}});var r=n(27378),i=n(34896),o=n(88038),s=n.n(o),a=n(35100),l=n(64989),c=n(48114),u=n(24246),d=function(e){var t=e.children,n=e.title;return(0,u.jsxs)(i.kC,{"data-testid":n,direction:"column",height:"100vh",children:[(0,u.jsxs)(s(),{children:[(0,u.jsxs)("title",{children:["Fides Admin UI - ",n]}),(0,u.jsx)("meta",{name:"description",content:"Privacy Engineering Platform"}),(0,u.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,u.jsx)(a.Z,{}),(0,u.jsx)(c.Z,{}),(0,u.jsxs)(i.kC,{as:"main",overflow:"auto",flexGrow:1,paddingTop:10,paddingLeft:10,gap:10,children:[(0,u.jsx)(i.xu,{flex:0,flexShrink:0,children:(0,u.jsx)(l.U,{})}),(0,u.jsx)(i.kC,{direction:"column",flex:1,minWidth:0,children:t})]})]})},p=n(88486),f=n(83125),h=n(65218),x=n.n(h),m=n(6848),b=n(90849),g=n(90089),v=n(21295),j=n(29549),y=n(73452),O=n(89348),w=n(40397),C=n(73679),k=n(55732),S=n(97865),P=n(34707),D=n.n(P),_=n(70409),E=n(78624),Z=n(24753),I=n(51860),z=n(33167),F=n(62332),V=n(34090),M=n(5008),T=n(14275),R=n(68301),W=n(43139),A=n(17009),H=["customFieldValues"],B=["onSubmit","initialValues","onDelete"];function G(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function L(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?G(Object(n),!0).forEach((function(t){(0,b.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var U=R.Ry().shape({data_categories:R.IX(R.Z_()).min(1,"Must assign at least one data category").label("Data categories"),data_use:R.Z_().required().label("Data use"),data_subjects:R.IX(R.Z_()).min(1,"Must assign at least one data subject").label("Data subjects")}),X={data_categories:[],data_subjects:[],data_use:"",dataset_references:[],customFieldValues:{},id:"",cookies:[]},q=function(e){e.customFieldValues;var t,n=(0,g.Z)(e,H);return L(L({},n),{},{name:null!==(t=e.name)&&void 0!==t?t:"",cookies:n.cookies.map((function(e){return{name:e,path:"/"}}))})},K=function(e){var t=e.allDataUses,n=e.allDataCategories,r=e.allDataSubjects,o=e.allDatasets,s=e.privacyDeclarationId,a=e.includeCookies,l=e.includeCustomFields,c=o?o.map((function(e){var t;return{label:null!==(t=e.name)&&void 0!==t?t:e.fides_key,value:e.fides_key}})):[];return(0,u.jsxs)(i.Kq,{spacing:4,children:[(0,u.jsx)(W.AP,{id:"data_use",label:"Data use",name:"data_use",options:t.map((function(e){return{value:e.fides_key,label:e.fides_key}})),tooltip:"What is the system using the data for. For example, is it for third party advertising or perhaps simply providing system operations.",variant:"stacked",singleValueBlock:!0,isDisabled:!!s}),(0,u.jsx)(W.j0,{id:"name",label:"Processing Activity",name:"name",variant:"stacked",tooltip:"The personal data processing activity or activities associated with this data use.",disabled:!!s}),(0,u.jsx)(W.AP,{name:"data_categories",label:"Data categories",options:n.map((function(e){return{value:e.fides_key,label:e.fides_key}})),tooltip:"What type of data is your system processing? This could be various types of user or system data.",isMulti:!0,variant:"stacked",isDisabled:!0}),(0,u.jsx)(W.AP,{name:"data_subjects",label:"Data subjects",options:r.map((function(e){return{value:e.fides_key,label:e.fides_key}})),tooltip:"Whose data are you processing? This could be customers, employees or any other type of user in your system.",isMulti:!0,variant:"stacked",isDisabled:!0}),a?(0,u.jsx)(W.VT,{name:"cookies",label:"Cookies",options:[],isMulti:!0,variant:"stacked",isClearable:!1}):null,o?(0,u.jsx)(W.AP,{name:"dataset_references",label:"Dataset references",options:c,tooltip:"Referenced Dataset fides keys used by the system.",isMulti:!0,variant:"stacked"}):null,l?(0,u.jsx)(T.uc,{resourceType:A.P6.PRIVACY_DECLARATION,resourceFidesKey:s}):null]})},N=function(e){var t=e.onSubmit,n=e.initialValues,o=e.allDataUses,s=e.privacyDeclarationId,a=(0,T.mZ)({resourceType:A.P6.PRIVACY_DECLARATION,resourceFidesKey:s}),l=a.customFieldValues,c=a.upsertCustomFields,d=(0,r.useMemo)((function(){return function(e,t){var n,r;return e?L(L({},e),{},{customFieldValues:t||{},cookies:null!==(n=null===(r=e.cookies)||void 0===r?void 0:r.map((function(e){return e.name})))&&void 0!==n?n:[]}):X}(n,l)}),[n,l]),p=(0,r.useState)(!1),f=p[0],h=p[1],x=(0,r.useMemo)((function(){var e=o.filter((function(e){return e.fides_key===d.data_use}))[0];if(e)return d.name?"".concat(e.name," - ").concat(d.name):e.name}),[o,d]),m=function(){var e=(0,k.Z)(D().mark((function e(n,r){var i,o,s,a;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.customFieldValues,o=q(n),e.next=4,t(o,r);case 4:if(!(s=e.sent)){e.next=12;break}if(!((a=s.filter((function(e){return e.data_use===n.data_use&&(!e.name||e.name===n.name)}))).length>0)){e.next=10;break}return e.next=10,c({customFieldValues:i,fides_key:a[0].id});case 10:r.resetForm({values:n}),h(!0);case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return{handleSubmit:m,renderHeader:function(e){var t=e.dirty,n=e.boxProps,r=e.hideSaved;return(0,u.jsxs)(i.xu,L(L({display:"flex",alignItems:"center",justifyContent:"space-between"},n),{},{children:[x?(0,u.jsx)(i.X6,{as:"h4",size:"xs",fontWeight:"medium",mr:4,children:x}):null,!r&&f&&!t&&d.data_use?(0,u.jsxs)(i.xv,{fontSize:"sm","data-testid":"saved-indicator",children:[(0,u.jsx)(M.St,{})," Saved"]}):null]}))},initialValues:d}},Y=function(e){var t=e.onSubmit,n=e.initialValues,r=e.onDelete,o=(0,g.Z)(e,B),s=N({onSubmit:t,initialValues:n,allDataUses:o.allDataUses,privacyDeclarationId:null===n||void 0===n?void 0:n.id}),a=s.handleSubmit,l=s.renderHeader,c=s.initialValues;return(0,u.jsx)(V.J9,{enableReinitialize:!0,initialValues:c,onSubmit:a,validationSchema:U,children:function(e){var t=e.dirty;return(0,u.jsxs)(V.l0,{children:[(0,u.jsx)(p.Gt,{id:"PrivacyDeclaration",name:"New Privacy Declaration"}),(0,u.jsxs)(i.Kq,{spacing:4,children:[(0,u.jsx)(i.xu,{"data-testid":"header",children:l({dirty:t})}),(0,u.jsx)(K,L({onDelete:r},o))]})]})}})},Q=["privacyDeclaration","onEdit","onDelete","includeCustomFields","includeCookies"],$=["privacyDeclarations"];function J(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?J(Object(n),!0).forEach((function(t){(0,b.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var te=function(e){var t=e.privacyDeclaration,n=e.onEdit,r=e.onDelete,o=e.includeCustomFields,s=e.includeCookies,a=(0,g.Z)(e,Q),l=N(ee({initialValues:t,onSubmit:function(e){return n(t,e)},privacyDeclarationId:t.id},a)),c=l.initialValues,d=l.renderHeader,f=l.handleSubmit;return(0,u.jsx)(F.Qd,{children:function(e){var n=e.isExpanded;return(0,u.jsx)(V.J9,{enableReinitialize:!0,initialValues:c,onSubmit:f,validationSchema:U,children:function(e){var l=e.dirty;return(0,u.jsxs)(V.l0,{"data-testid":"".concat(t.data_use,"-form"),children:[(0,u.jsx)(p.Gt,{id:"".concat(t.id,"-form"),name:t.id}),(0,u.jsxs)(F.KF,{py:4,borderBottomWidth:n?"0px":"1px",backgroundColor:n?"gray.50":void 0,"data-testid":"accordion-header-".concat(t.data_use),children:[d({dirty:l,boxProps:{flex:"1",textAlign:"left"},hideSaved:!n}),(0,u.jsx)(F.XE,{})]}),(0,u.jsx)(F.Hk,{backgroundColor:"gray.50",pt:0,children:(0,u.jsx)(i.Kq,{spacing:4,children:(0,u.jsx)(K,ee({privacyDeclarationId:t.id,onDelete:r,includeCustomFields:o,includeCookies:s},a))})})]})}})}})},ne=function(e){var t=e.privacyDeclarations,n=(0,g.Z)(e,$);return(0,u.jsx)(F.UQ,{allowToggle:!0,border:"transparent","data-testid":"privacy-declaration-accordion",children:t.map((function(e){return(0,u.jsx)(te,ee({privacyDeclaration:e},n),e.id)}))})},re=["system","addButtonProps","includeCustomFields","includeCookies","onSave"];function ie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function oe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ie(Object(n),!0).forEach((function(t){(0,b.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ie(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var se=function(e){var t=e.system,n=(e.addButtonProps,e.includeCustomFields),o=e.includeCookies,s=e.onSave,a=(0,g.Z)(e,re),l=(0,_.pm)(),c=(0,I.qQ)(),d=(0,S.Z)(c,1)[0],p=(0,r.useState)(!1),f=p[0],h=p[1],x=(0,r.useState)(void 0),m=x[0],b=x[1],v=(0,r.useMemo)((function(){return m?t.privacy_declarations.filter((function(e){return e.id!==m.id})):t.privacy_declarations}),[m,t]),j=function(e){return v.filter((function(t){return t.data_use===e.data_use&&t.name===e.name})).length>0&&(l((0,Z.Vo)("A declaration already exists with that data use in this system. Please supply a different data use.")),!0)},y=function(){var e=(0,k.Z)(D().mark((function e(n,r){var i,o,a,c;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.map((function(e){var t;return oe(oe({},e),{},{name:null!==(t=e.name)&&void 0!==t?t:""})})),o=oe(oe({},t),{},{privacy_declarations:i}),a=function(e){if(!(0,z.isErrorResult)(e))return l.closeAll(),l((0,Z.t5)(r?"Data use deleted":"Data use saved")),s&&s(e.data),e.data.privacy_declarations;var t=(0,E.e$)(e.error,"An unexpected error occurred while updating the system. Please try again.");l((0,Z.Vo)(t))},e.next=5,d(o);case 5:return c=e.sent,e.abrupt("return",a(c));case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),O=function(){var e=(0,k.Z)(D().mark((function e(n,r){var i;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.id===n.id||!j(r)){e.next=2;break}return e.abrupt("return",void 0);case 2:return i=t.privacy_declarations.map((function(e){return e.id===n.id?r:e})),e.abrupt("return",y(i));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),w=function(){var e=(0,k.Z)(D().mark((function e(t){var n,r,i;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!j(t)){e.next=2;break}return e.abrupt("return",void 0);case 2:return l.closeAll(),n=[].concat((0,C.Z)(v),[t]),e.next=6,y(n);case 6:return(r=e.sent)&&(i=r.filter((function(e){return(!e.name||e.name===t.name)&&e.data_use===t.data_use}))[0],b(i)),e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=(0,k.Z)(D().mark((function e(n){var r;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.privacy_declarations.filter((function(e){return e.id!==n.id})),e.abrupt("return",y(r,!0));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=function(){var e=(0,k.Z)(D().mark((function e(t){var n;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P(t);case 2:return(n=e.sent)&&(h(!1),b(void 0)),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,r.useEffect)((function(){h(!1)}),[t.fides_key]),(0,u.jsxs)(i.Kq,{spacing:3,children:[(0,u.jsx)(ne,oe({privacyDeclarations:v,onEdit:O,onDelete:P,includeCustomFields:n,includeCookies:o},a)),f?(0,u.jsx)(i.xu,{backgroundColor:"gray.50",p:4,"data-testid":"new-declaration-form",children:(0,u.jsx)(Y,oe({initialValues:m,onSubmit:w,onDelete:F,includeCustomFields:n,includeCookies:o},a))}):null,0===t.privacy_declarations.length?(0,u.jsx)(i.xv,{fontSize:"sm",lineHeight:5,fontWeight:"medium",pl:2,children:"No data uses"}):null]})},ae=n(9198),le=n(60041);function ce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ue(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ce(Object(n),!0).forEach((function(t){(0,b.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ce(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var de={name:"",description:""},pe=function(e){var t,n=e.system,r="/systems/configure/".concat(n.fides_key),o=function(e){var t=(0,I.dB)(),n=(0,S.Z)(t,1)[0],r=(0,_.pm)(),i=function(){var t=(0,k.Z)(D().mark((function t(i,o){var s,a;return D().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=[ue(ue({},e),{},{name:i.name,description:i.description})],t.next=3,n(s);case 3:a=t.sent,(0,le.D4)(a)?r((0,Z.Vo)((0,E.e$)(a.error))):(r((0,Z.t5)("Successfully saved system info")),o.resetForm({values:i}));case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}();return{handleUpsertSystem:i,validationSchema:R.Ry().shape({name:R.Z_().required().label("Name"),description:R.Z_().required().label("Description")})}}(n),s=o.handleUpsertSystem,a=o.validationSchema;return(0,u.jsxs)(i.xu,{children:[(0,u.jsxs)(i.kC,{alignItems:"center",children:[(0,u.jsx)(i.xv,{color:"gray.600",size:"md",lineHeight:6,fontWeight:"semibold",marginBottom:2,children:"System details"}),(0,u.jsx)(i.LZ,{}),(0,u.jsxs)(ae._p,{color:"complimentary.500",href:r,children:["View more",(0,u.jsx)(y.h0,{ml:2})]})]}),(0,u.jsx)(i.xu,{width:"100%",padding:4,borderTop:"1px solid",borderColor:"gray.200",children:(0,u.jsx)(V.J9,{enableReinitialize:!0,initialValues:null!==(t=n)&&void 0!==t?t:de,validationSchema:a,onSubmit:s,children:function(e){var t=e.isSubmitting,n=e.dirty,r=e.isValid;return(0,u.jsxs)(V.l0,{children:[(0,u.jsx)(p.Gt,{id:"SystemInfoDrawer",name:"System Info"}),(0,u.jsx)(i.xu,{marginTop:3,children:(0,u.jsx)(W.j0,{label:"System name",name:"name",variant:"stacked"})}),(0,u.jsx)(i.xu,{marginTop:3,children:(0,u.jsx)(W.Ks,{label:"System Description",name:"description",variant:"stacked"})}),(0,u.jsx)(i.kC,{marginTop:6,justifyContent:"flex-end",children:(0,u.jsx)(j.zx,{textAlign:"right",type:"submit",disabled:!n||!r,colorScheme:"primary",isLoading:t,size:"sm",children:"Save"})})]})}})})]})},fe=["isLoading"];function he(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?he(Object(n),!0).forEach((function(t){(0,b.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):he(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var me=function(e){var t,n=e.selectedSystemId,o=e.resetSelectedSystemId,s=(0,r.useMemo)((function(){return Boolean(n)}),[n]),a=(0,w.f)({includeDatasets:!1,includeDisabled:!1}),l=(a.isLoading,(0,g.Z)(a,fe)),c=(0,I.rn)(n,{skip:!n}).data;return(0,u.jsx)(i.xu,{position:"absolute",pointerEvents:"none",top:0,left:0,right:0,bottom:0,overflow:"hidden",children:(0,u.jsx)(v.Mi,{transition:{enter:{ease:"easeInOut",duration:.5},exit:{ease:"easeInOut",duration:.5}},direction:"right",in:s,unmountOnExit:!0,style:{zIndex:11,pointerEvents:"none",position:"absolute"},children:(0,u.jsxs)(i.xu,{position:"absolute",right:"0px",height:"100%",width:"100%",maxWidth:"480px",pointerEvents:"auto",borderWidth:0,boxShadow:"0px 20px 25px -5px rgba(0, 0, 0, 0.1), 0px 10px 10px -5px rgba(0, 0, 0, 0.04)",display:n?"unset":"none",backgroundColor:"white",children:[(0,u.jsx)(i.xu,{id:"drawer-header",borderBottomWidth:1,paddingX:6,paddingY:3,children:(0,u.jsxs)(i.kC,{children:[(0,u.jsx)(i.kC,{justifyContent:"space-between",alignItems:"center",height:"40px",children:(0,u.jsx)(i.xv,{fontWeight:"semibold",fontSize:"lg",lineHeight:"7",color:"gray.900",children:null!==(t=null===c||void 0===c?void 0:c.name)&&void 0!==t?t:"System Information"})}),(0,u.jsx)(i.LZ,{}),(0,u.jsx)(i.kC,{alignItems:"center",children:(0,u.jsx)(j.hU,{icon:(0,u.jsx)(y.Tw,{}),"aria-label":"Close error message",size:"sm",style:{height:"24px",width:"24px",minWidth:"14px",backgroundColor:"#00000000"},onClick:o})})]})}),(0,u.jsx)(i.xu,{id:"drawer-body",height:"calc(100% - 46px)",overflowY:"auto",padding:6,style:{scrollbarGutter:"stable"},children:c?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(pe,{system:c}),(0,u.jsx)(i.xv,{size:"md",color:"gray.600",lineHeight:6,fontWeight:"semibold",mt:"10px",mb:2,children:"Data uses"}),(0,u.jsx)(i.xu,{borderTop:"1px solid",borderColor:"gray.200",children:(0,u.jsx)(i.xu,{pb:3,children:(0,u.jsx)(se,xe({system:c,addButtonProps:{ml:4}},l))})}),(0,u.jsx)(i.xv,{size:"md",color:"gray.600",lineHeight:6,fontWeight:"semibold",mt:"10px",mb:2,paddingBottom:2,children:"Data flow"}),(0,u.jsx)(O.q,{system:c})]}):null})]})})})},be=n(66521),ge=n(60378),ve=n(47134),je=n(75846),ye=n(63138),Oe=n(14221),we=n(75523),Ce=function(e){var t=e.column,n=e.value,o=function(){var e=r.useState(!1),t=(0,S.Z)(e,2),n=t[0],i=t[1],o=r.useState(!1),s=(0,S.Z)(o,2),a=s[0],l=s[1];return{mouseOver:a,isCellExpanded:n,handleToggleExpanded:function(){return i(!n)},handleMouseEnter:function(){l(!0)},handleMouseLeave:function(){l(!1)}}}(),s=o.isCellExpanded,a=o.handleMouseEnter,l=o.handleMouseLeave,c=o.handleToggleExpanded,d=o.mouseOver,p=function(e){var t,n,r,i,o=e.column,s=e.value,a=(0,m.C)(we.L5),l=(0,m.C)(je.C3),c=(0,m.C)(ve.FG);if(o.id===Oe.Ux)return{label:(s.split(", ").length?s.split(", ").map((function(e){var t,n;return null!==(t=null===(n=a.get(e))||void 0===n?void 0:n.name)&&void 0!==t?t:e})).join(", "):void 0)||(null!==(t=null===(n=a.get(s))||void 0===n?void 0:n.name)&&void 0!==t?t:s),expanded:s};if(o.id===Oe.vy)return{label:s,expanded:null!==(r=null===(i=l.get(s))||void 0===i?void 0:i.fides_key)&&void 0!==r?r:s};if(o.id===Oe.OL){var u,d,p=s.split(", ").length?s.split(", ").map((function(e){var t,n;return null!==(t=null===(n=c.get(e))||void 0===n?void 0:n.fides_key)&&void 0!==t?t:e})).join(", "):void 0;return{label:s,expanded:p||(null!==(u=null===(d=c.get(s))||void 0===d?void 0:d.fides_key)&&void 0!==u?u:s)}}return{label:s}}({column:t,value:n});return(0,u.jsx)(i.xu,{position:"relative",onMouseEnter:a,onMouseLeave:l,height:"100%",children:(0,u.jsxs)(i.xu,{display:"flex",justifyContent:"space-between",alignItems:"center",height:"100%",children:[(0,u.jsxs)(i.xu,{overflow:"hidden",flex:1,p:2,children:[(0,u.jsx)(i.xv,{fontSize:"xs",lineHeight:4,fontWeight:"medium",color:"gray.600",isTruncated:!s,children:p.label}),s&&p.expanded!==p.label?(0,u.jsx)(i.xu,{fontStyle:"italic",mt:2,children:(0,u.jsx)(i.xv,{fontSize:"xs",lineHeight:4,fontWeight:"medium",color:"gray.600",children:p.expanded})}):null]}),(d||s)&&p.expanded&&""!==p.expanded?(0,u.jsx)("button",{type:"button",style:{position:"relative",right:"10px"},onClick:function(e){e.stopPropagation(),c()},children:s?(0,u.jsx)(M.O1,{width:"18px",height:"18px",my:"-4px"}):(0,u.jsx)(M.mC,{width:"18px",height:"18px",my:"-4px"})}):null]})})},ke=n(76459),Se=n(77751);function Pe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function De(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pe(Object(n),!0).forEach((function(t){(0,b.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _e=function(e){var t,n,r,o=e.option,s=e.columnId,a=e.filterValue,l=e.toggleFilterOption,c=(0,m.C)(we.L5),d=s===Oe.Ux&&null!==(t=null===(n=c.get(o))||void 0===n?void 0:n.name)&&void 0!==t?t:o;return(0,u.jsx)(Se.XZ,{value:o,width:"193px",height:"20px",mb:"25px",isChecked:null!==(r=a[o])&&void 0!==r&&r,onChange:function(e){var t=e.target;l(o,t.checked)},_focusWithin:{bg:"gray.100"},colorScheme:"complimentary",children:(0,u.jsx)(i.xv,{fontSize:"sm",lineHeight:5,height:"20px",width:"170px",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",children:d})},o)};function Ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ze(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ee(Object(n),!0).forEach((function(t){(0,b.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ee(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ie={minWidth:30,width:150,maxWidth:300,Cell:Ce,Filter:function(e){var t=e.column,n=function(e){var t,n=(0,r.useContext)(ke.Z).tableInstance,i=r.useMemo((function(){var t=new Set;return e.preFilteredRows.forEach((function(n){t.add(n.values[e.id])})),Array.from(t)}),[e.id,e.preFilteredRows]),o=r.useMemo((function(){var e={};return i.forEach((function(t){e[t]=!1})),e}),[i]);return{filterValue:null!==(t=e.filterValue)&&void 0!==t?t:o,clearFilterOptions:function(){var t={};i.forEach((function(e){t[e]=!1})),e.setFilter(t)},toggleFilterOption:function(t,r){var i,s=De(De({},null!==(i=e.filterValue)&&void 0!==i?i:o),{},(0,b.Z)({},t,r));Object.values(s).every((function(e){return!e}))?null===n||void 0===n||n.setAllFilters(null===n||void 0===n?void 0:n.state.filters.filter((function(t){return t.id!==e.id}))):e.setFilter(s)},options:i,header:e.Header}}(t),o=n.filterValue,s=n.toggleFilterOption,a=n.options,l=(0,r.useState)(!1),c=l[0],d=l[1],p=c?a:a.slice(0,15),f=a.length>15;return(0,u.jsx)(F.UQ,{width:"100%",allowToggle:!0,children:(0,u.jsxs)(F.Qd,{border:"0px",children:[(0,u.jsx)(i.X6,{height:"56px",children:(0,u.jsxs)(F.KF,{height:"100%",children:[(0,u.jsx)(i.xu,{flex:"1",alignItems:"center",justifyContent:"center",textAlign:"left",children:t.Header}),(0,u.jsx)(F.XE,{})]})}),(0,u.jsxs)(F.Hk,{children:[(0,u.jsx)(i.MI,{columns:3,children:p.map((function(e){return(0,u.jsx)(_e,{columnId:t.id,option:e,filterValue:o,toggleFilterOption:s},e)}))}),!c&&f?(0,u.jsx)(j.zx,{size:"sm",variant:"ghost",onClick:function(){d(!0)},children:"View more"}):null,c&&f?(0,u.jsx)(j.zx,{size:"sm",variant:"ghost",onClick:function(){d(!1)},children:"View less"}):null]})]})},t.id)},filter:"multifield"},ze={multifield:function(e,t,n){var r=t[0];return e.filter((function(e){var t=e.values[r];return n[t]}))}},Fe=n(21084),Ve=n(30794),Me=n(29470),Te=n(60245),Re=n(55232),We=n(61561),Ae=n(85249),He=n(60530),Be=n(68972),Ge=n(2926),Le=n(34522),Ue=function(e){var t=e.isOpen,n=e.onClose,o=(0,r.useRef)(null),s=(0,r.useContext)(ke.Z).tableInstance;if(!s)return null;var a=function(e,t){if(!e||!e.columns||!e.rows)return"";var n=e.columns,r=e.rows;if("csv"===t)return(0,Be.P)([n].concat((0,C.Z)(r)));var i=Le.P6.aoa_to_sheet([n].concat((0,C.Z)(r))),o=Le.P6.book_new();return Le.P6.book_append_sheet(o,i,"Datamap"),o},l=function(e,t){var n=(new Date).toISOString(),r="report_".concat(n,".").concat(t);if("string"===typeof e){if("csv"===t){var i=new Blob([e],{type:"text/csv;charset=utf-8"});(0,Ge.saveAs)(i,r)}}else(0,Le.Fv)(e,r)},c=function(){var e=(0,k.Z)(D().mark((function e(t){var r,i;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n(),s){e.next=3;break}return e.abrupt("return");case 3:r={columns:s.columns.filter((function(e){return e.isVisible})).map((function(e){return e.Header})),rows:s.rows.map((function(e){return e.subRows})).flatMap((function(e){return e})).map((function(e){return e.cells.map((function(e){return e.value}))}))},i=a(r,t),l(i,t);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,u.jsxs)(He.u_,{initialFocusRef:o,isCentered:!0,isOpen:t,onClose:n,size:"lg",children:[(0,u.jsx)(He.ZA,{}),(0,u.jsxs)(He.hz,{minWidth:"605px",children:[(0,u.jsx)(He.xB,{children:(0,u.jsxs)(i.kC,{flexDir:"column",gap:"16px",children:[(0,u.jsx)(i.xv,{children:"Export"}),(0,u.jsx)(i.iz,{color:"gray.200"})]})}),(0,u.jsx)(He.ol,{}),(0,u.jsx)(He.fe,{pb:"8px",pt:"8px",children:(0,u.jsx)(i.kC,{justifyContent:"center",width:"100%",children:(0,u.jsx)(i.xv,{fontSize:"sm",lineHeight:"20px",children:"To export the current view of the Data Map table, please select the appropriate format below. Your export will contain only the visible columns and rows."})})}),(0,u.jsx)(He.mz,{children:(0,u.jsxs)(i.kC,{borderTop:"1px solid",borderTopColor:"gray.200",justifyContent:"space-between",pt:"24px",width:"100%",children:[(0,u.jsx)(j.zx,{colorScheme:"primary",size:"sm",mr:3,flexGrow:1,onClick:function(){return c("xlsx")},children:"Export Excel (.xls)"}),(0,u.jsx)(j.zx,{colorScheme:"primary",size:"sm",flexGrow:1,onClick:function(){return c("csv")},children:"Export CSV (.csv)"})]})})]})]})},Xe=function(e){var t=e.heading,n=e.children;return(0,u.jsxs)(i.xu,{padding:"24px 8px 8px 24px",children:[(0,u.jsx)(i.X6,{size:"md",lineHeight:6,fontWeight:"bold",mb:2,children:t}),n]})},qe=function(e){var t=e.isOpen,n=e.onClose,o=(0,r.useContext)(ke.Z).tableInstance,s=(0,r.useMemo)((function(){return o||{headerGroups:[]}}),[o]).headerGroups,a=function(e,t){return e.filter((function(e){return e.id===t})).map((function(e){return e.render("Filter",{key:e.id})}))},l=function(e,t){return e.some((function(e){return t.indexOf(e.id)>-1}))},c=(0,r.useMemo)((function(){return s.length>0?s[0].headers.map((function(e){return e})):[]}),[s]);return(0,u.jsxs)(He.u_,{isOpen:t,onClose:n,isCentered:!0,size:"2xl",children:[(0,u.jsx)(He.ZA,{}),(0,u.jsxs)(He.hz,{children:[(0,u.jsx)(He.xB,{children:"Filters"}),(0,u.jsx)(He.ol,{}),(0,u.jsx)(i.iz,{}),(0,u.jsxs)(He.fe,{maxH:"85vh",padding:"0px",overflowX:"auto",children:[l(c,[Oe.vy,Oe.Ux,Oe.OL])?(0,u.jsxs)(Xe,{heading:"Privacy attributes",children:[a(c,Oe.vy),a(c,Oe.Ux),a(c,Oe.OL)]}):null,l(c,[Oe.eK])?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(i.iz,{}),(0,u.jsx)(Xe,{heading:"Responsibility",children:a(c,Oe.eK)})]}):null]}),(0,u.jsx)(He.mz,{children:(0,u.jsxs)(i.xu,{display:"flex",justifyContent:"space-between",width:"100%",children:[(0,u.jsx)(j.zx,{variant:"outline",size:"sm",mr:3,onClick:function(){null===o||void 0===o||o.setAllFilters([])},flexGrow:1,children:"Reset Filters"}),(0,u.jsx)(j.zx,{colorScheme:"primary",size:"sm",onClick:n,flexGrow:1,children:"Done"})]})})]})]})},Ke=n(92975),Ne=n(62709),Ye=n(20294),Qe=n(65201),$e=n(36737),Je=n(22348);function et(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var tt=function(e){var t=e.id,n=e.index,o=e.isVisible,s=e.moveColumn,a=e.setColumnVisible,l=e.text,c=function(e){var t=e.id,n=e.index,i=e.moveColumn,o=e.setColumnVisible,s=(0,r.useRef)(null),a=(0,$e.L)({accept:Oe._Q.DraggableColumnListItem,collect:function(e){return{handlerId:e.getHandlerId()}},hover:function(e,t){var r;if(s.current){var o=e.index,a=n;if(o!==a){var l=null===(r=s.current)||void 0===r?void 0:r.getBoundingClientRect(),c=(l.bottom-l.top)/2,u=t.getClientOffset().y-l.top;o<a&&u<c||o>a&&u>c||(i(o,a),Object.assign(e,{index:a}))}}}}),l=(0,S.Z)(a,2),c=l[0].handlerId,u=l[1],d=(0,Je.c)({type:Oe._Q.DraggableColumnListItem,item:function(){return{id:t,index:n}},collect:function(e){return{isDragging:!!e.isDragging()}}}),p=(0,S.Z)(d,3),f=p[0].isDragging,h=p[1],x=p[2];return h(u(s)),{isDragging:f,ref:s,handlerId:c,preview:x,handleColumnVisibleToggle:function(e){o(n,e.target.checked)}}}({index:n,id:t,moveColumn:s,setColumnVisible:a}),d=c.ref,p=c.isDragging,f=c.handlerId,h=c.preview,x=c.handleColumnVisibleToggle;return(0,u.jsxs)(i.HC,{alignItems:"center",display:"flex",minWidth:0,ref:h,"data-handler-id":f,opacity:p?.2:1,children:[(0,u.jsx)(i.xu,{ref:d,cursor:p?"grabbing":"grab",children:(0,u.jsx)(i.DE,{as:M.zG,color:"gray.300",flexShrink:0,height:"20px",width:"20px",_hover:{color:"gray.700"}})}),(0,u.jsxs)(Ke.NI,{alignItems:"center",display:"flex",minWidth:0,title:l,children:[(0,u.jsx)(Ke.lX,{color:"gray.700",fontSize:"normal",fontWeight:400,htmlFor:"".concat(t),mb:"0",minWidth:0,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",flexGrow:1,children:l}),(0,u.jsx)(Ne.r,{colorScheme:"complimentary",id:"".concat(t),mr:2,isChecked:o,onChange:x})]})]})},nt=function(e){var t=e.columns,n=(0,r.useState)(null!==t&&void 0!==t?t:[]),i=n[0],o=n[1];return(0,r.useEffect)((function(){o((null===t||void 0===t?void 0:t.map((function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?et(Object(n),!0).forEach((function(t){(0,b.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):et(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e)})))||[])}),[t]),{columns:i,moveColumn:(0,r.useCallback)((function(e,t){o((function(n){return(0,Qe.ZP)(n,(function(n){var r=n[e];n.splice(e,1),n.splice(t,0,r)}))}))}),[]),setColumnVisible:(0,r.useCallback)((function(e,t){o((function(n){return(0,Qe.ZP)(n,(function(n){n[e]&&(n[e].isVisible=t)}))}))}),[])}},rt=function(e){var t=e.isOpen,n=e.onClose,o=(0,Te.I0)(),s=(0,m.C)(We.eo),a=nt({columns:s}),l=(0,r.useCallback)((function(){o((0,We.Bx)(a.columns)),n()}),[n,o,a.columns]);return(0,u.jsxs)(He.u_,{isOpen:t,onClose:n,isCentered:!0,size:"2xl",children:[(0,u.jsx)(He.ZA,{}),(0,u.jsxs)(He.hz,{children:[(0,u.jsx)(He.xB,{pb:0,children:"Data Map Settings"}),(0,u.jsx)(He.ol,{}),(0,u.jsxs)(He.fe,{children:[(0,u.jsx)(i.xv,{fontSize:"sm",color:"gray.500",mb:2,children:"You can toggle columns on and off to hide or show them in the table. Additionally, you can drag columns up or down to change the order"}),(0,u.jsxs)(Ye.mQ,{colorScheme:"complimentary",children:[(0,u.jsx)(Ye.td,{children:(0,u.jsx)(Ye.OK,{color:"complimentary.500",children:"Columns"})}),(0,u.jsx)(Ye.nP,{children:(0,u.jsx)(Ye.x4,{p:0,pt:4,maxHeight:"270px",overflowY:"scroll",children:(0,u.jsx)(i.aV,{spacing:4,children:a.columns.filter((function(e){return e.value!==Oe.Br})).map((function(e,t){return(0,u.jsx)(tt,{id:e.id,index:t+1,isVisible:e.isVisible,moveColumn:a.moveColumn,setColumnVisible:a.setColumnVisible,text:e.text},e.id)}))})})})]})]}),(0,u.jsx)(He.mz,{children:(0,u.jsxs)(i.xu,{display:"flex",justifyContent:"space-between",width:"100%",children:[(0,u.jsx)(j.zx,{variant:"outline",size:"sm",mr:3,onClick:n,flexGrow:1,children:"Cancel"}),(0,u.jsx)(j.zx,{colorScheme:"primary",size:"sm",onClick:l,flexGrow:1,children:"Save"})]})})]})]})},it=function(){var e=(0,Te.I0)(),t=function(){var e=(0,m.C)(We.hd),t=(0,Fe.qY)(),n=t.isOpen,r=t.onOpen,i=t.onClose,o=(0,Fe.qY)(),s=o.isOpen,a=o.onOpen,l=o.onClose,c=(0,Fe.qY)();return{isExportModalOpen:n,isMapOpen:e,isSettingsModalOpen:s,isFilterModalOpen:c.isOpen,onSettingsModalOpen:a,onSettingsModalClose:l,onFilterModalOpen:c.onOpen,onFilterModalClose:c.onClose,onExportClick:function(){r()},onExportModalClose:i,onExportModalOpen:r}}(),n=t.isExportModalOpen,o=t.isFilterModalOpen,s=t.isSettingsModalOpen,a=t.onSettingsModalOpen,l=t.onSettingsModalClose,c=t.onFilterModalOpen,d=t.onFilterModalClose,p=t.onExportClick,f=t.onExportModalClose,h=t.isMapOpen,x=(0,r.useContext)(ke.Z).tableInstance;if(!x)return null;var b=null===x||void 0===x?void 0:x.state.filters.map((function(e){return Object.values(e.value)})).flatMap((function(e){return e})).filter((function(e){return!0===e})).length;return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(i.kC,{justifyContent:"flex-end",flexDirection:"row",alignItems:"center",flexWrap:"wrap",rowGap:4,columnGap:4,children:[(0,u.jsx)(i.kC,{flexGrow:1,children:(0,u.jsx)(Ae.Z,{globalFilter:x.state.globalFilter,setGlobalFilter:x.setGlobalFilter})}),(0,u.jsxs)(i.kC,{children:[(0,u.jsxs)(j.zx,{"aria-label":"Open Filter Settings",variant:"solid",backgroundColor:"#824EF2",color:"white",size:"sm",marginRight:4,onClick:c,_hover:{opacity:.8},_active:{opacity:.8},rightIcon:(0,u.jsx)(M.r1,{}),children:["Filter",b>0?(0,u.jsx)(Ve.Vp,{ml:2,backgroundColor:"complimentary.800",borderRadius:"full",color:"white",children:b}):null]}),(0,u.jsxs)(j.hE,{isAttached:!0,size:"sm",marginRight:4,children:[(0,u.jsx)(j.zx,{colorScheme:h?"primary":void 0,onClick:function(){e((0,We.kE)("map"))},"data-testid":"map-btn",children:"Map"}),(0,u.jsx)(j.zx,{colorScheme:h?void 0:"primary",onClick:function(){e((0,We.kE)("table"))},"data-testid":"table-btn",children:"Table"})]}),(0,u.jsx)(j.hU,{"aria-label":"Open Column Settings",variant:"ghost",size:"sm",marginRight:1,onClick:a,icon:(0,u.jsx)(Re.A5,{})}),(0,u.jsx)(Me.v2,{children:(0,u.jsx)(Me.j2,{as:j.hU,"aria-label":"Export data",icon:(0,u.jsx)(Re.nM,{}),onClick:p,size:"sm",variant:"ghost"})})]})]}),(0,u.jsx)(qe,{isOpen:o,onClose:d}),(0,u.jsx)(Ue,{isOpen:n,onClose:f}),(0,u.jsx)(rt,{isOpen:s,onClose:l})]})},ot=n(40240),st=n(82466),at=n(99725);function lt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ct(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lt(Object(n),!0).forEach((function(t){(0,b.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ut=function(e){var t=e.setSelectedSystemId,n=(0,r.useContext)(ke.Z).tableInstance;if(!n)return null;var o=n.getTableProps,s=n.getTableBodyProps,a=n.headerGroups,l=n.prepareRow,c=n.rows;return(0,u.jsx)(i.xu,{boxSize:"100%",overflow:"auto",children:(0,u.jsxs)(ot.iA,ct(ct({},o()),{},{size:"sm","data-testid":"datamap-table",children:[(0,u.jsx)(at.Z,{headerGroups:a}),(0,u.jsx)(st.Z,{rowHeading:"System Name",renderRowSubheading:function(e){return e.groupByVal},onSubrowClick:function(e){e.values[Oe.sD]&&t(e.values[Oe.sD])},getTableBodyProps:s,prepareRow:l,rows:c})]}))})},dt=n(60709),pt=function(){return(0,u.jsx)(i.M5,{flex:1,"data-testid":"get-started-modal",backgroundColor:"gray.100",children:(0,u.jsx)(i.xu,{backgroundColor:"white",p:10,borderRadius:"6px",boxShadow:"0px 1px 3px rgba(0, 0, 0, 0.1), 0px 1px 2px rgba(0, 0, 0, 0.06)",maxWidth:{base:"80%",lg:"60%",xl:"50%"},maxHeight:"90%",textAlign:"center",children:(0,u.jsxs)(i.Kq,{spacing:4,children:[(0,u.jsx)(i.xv,{color:"gray.700",fontWeight:"600",children:"Privacy engineering can seem like an endlessly complex confluence of legal and data engineering terminology\u2014fear not\u2014Fides is here to simplify this."}),(0,u.jsx)(i.xv,{children:"Start by scanning your infrastructure. The scanner will connect to your infrastructure to automatically scan and create a list of all systems available and then classify each system containing PII."}),(0,u.jsx)(i.xv,{children:"Let's get started!"}),(0,u.jsx)(i.xu,{children:(0,u.jsx)(j.zx,{as:"a",href:dt.xo,width:"fit-content",colorScheme:"primary","data-testid":"add-systems-btn",children:"Add Systems"})})]})})})},ft=x()((function(){return Promise.all([n.e(4804),n.e(7670),n.e(6412)]).then(n.bind(n,53027))}),{ssr:!1,loadableGenerated:{webpack:function(){return[53027]}}}),ht=function(){var e=function(){var e=(0,m.C)(We.hd),t=(0,m.C)(We.Xt),n=(0,r.useContext)(be.Y),i=(0,p.oI)().attemptAction,o=(0,r.useState)(),s=o[0],a=o[1],l=(0,r.useCallback)((function(e){i().then((function(t){t&&a(e)}))}),[i,a]),c=(0,r.useCallback)((function(){i().then((function(e){var t;e&&s&&(n.current&&(null===(t=n.current)||void 0===t||t.$id(s).unselect()),a(void 0))}))}),[i,n,s]);return{isMapOpen:e,isGettingStarted:t,selectedSystemId:s,setSelectedSystemId:l,resetSelectedSystemId:c}}(),t=e.isMapOpen,n=e.isGettingStarted,o=e.setSelectedSystemId,s=e.selectedSystemId,a=e.resetSelectedSystemId,l=function(){var e=(0,m.T)(),t=(0,r.useContext)(ke.Z).updateTableInstance,n=(0,m.C)(ye.eo),i=(0,ye.Ex)({organizationName:"default_organization"}),o=i.data,s=i.isLoading;(0,we.MO)(),(0,je.fd)(),(0,ve.te)();var a=(0,r.useRef)(!1);(0,r.useEffect)((function(){if(o){var t=o.columns,n=o.rows;e((0,ye.dd)(t)),a.current||(a.current=!0,0===n.length?e((0,ye.ym)(!0)):e((0,ye.ym)(!1)))}}),[o,e]);var l=(0,r.useMemo)((function(){return o?o.rows:[]}),[o]),c=(0,r.useMemo)((function(){return(n||[]).map((function(e){var t=e.text,n=e.value,r=e.isVisible;return{id:n,accessor:function(e){return e[n]},Header:t,isVisible:r,aggregate:function(e,t){var n=new Set(t);return e.forEach((function(e){n.has(e)||n.add(e)})),Array.from(n.values()).join(", ")}}}))}),[n]),u=(0,ge.useTable)({columns:c,data:l,defaultColumn:Ie,filterTypes:ze,initialState:{groupBy:[Oe.Br,Oe.vy]}},ge.useFilters,ge.useGlobalFilter,ge.useFlexLayout,ge.useResizeColumns,ge.useGroupBy,ge.useExpanded);return(0,r.useEffect)((function(){return t(u)}),[u,t]),(0,r.useEffect)((function(){u.setHiddenColumns((null===n||void 0===n?void 0:n.filter((function(e){return!e.isVisible})).map((function(e){return e.value})))||[])}),[n,u]),Ze(Ze({},u),{},{isLoading:s})}();return l.isLoading?(0,u.jsx)(i.M5,{width:"100%",flex:"1",children:(0,u.jsx)(f.$,{})}):n?(0,u.jsx)(pt,{}):(0,u.jsxs)(i.kC,{direction:"column",height:"100%",children:[(0,u.jsx)(i.xu,{marginBottom:3,marginRight:10,children:(0,u.jsx)(it,{})}),(0,u.jsxs)(i.kC,{position:"relative",flex:1,direction:"row",overflow:"auto",borderWidth:"1px",borderStyle:"solid",borderColor:"gray.200",children:[t?(0,u.jsx)(i.xu,{flex:1,minWidth:"50%",maxWidth:"100%",children:(0,u.jsx)(ft,{setSelectedSystemId:o})}):null,t?null:(0,u.jsx)(i.xu,{flex:1,minWidth:"50%",maxWidth:"100%",children:(0,u.jsx)(ut,{setSelectedSystemId:o})}),(0,u.jsx)(me,{selectedSystemId:s,resetSelectedSystemId:a})]})]})},xt=function(){var e=(0,r.useMemo)((function(){return new ke.m}),[]);return(0,u.jsx)(d,{title:"View Map",children:(0,u.jsx)(ke.Z.Provider,{value:e,children:(0,u.jsxs)(be.Z,{children:[(0,u.jsx)(ht,{}),(0,u.jsx)(p.eB,{})]})})})}},53910:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/datamap",function(){return n(50786)}])},36786:function(){},43197:function(){}},function(e){e.O(0,[9556,2141,845,8301,6155,8194,6733,9,5232,3119,7697,9774,2888,179],(function(){return t=53910,e(e.s=t);var t}));var t=e.O();_N_E=t}]);