function Q(t){return t.split("-")[1]}function at(t){return t==="y"?"height":"width"}function B(t){return t.split("-")[0]}function Z(t){return["top","bottom"].includes(B(t))?"x":"y"}function st(t,e,o){let{reference:n,floating:i}=t,r=n.x+n.width/2-i.width/2,l=n.y+n.height/2-i.height/2,s=Z(e),f=at(s),c=n[f]/2-i[f]/2,u=s==="x",a;switch(B(e)){case"top":a={x:r,y:n.y-i.height};break;case"bottom":a={x:r,y:n.y+n.height};break;case"right":a={x:n.x+n.width,y:l};break;case"left":a={x:n.x-i.width,y:l};break;default:a={x:n.x,y:n.y}}switch(Q(e)){case"start":a[s]-=c*(o&&u?-1:1);break;case"end":a[s]+=c*(o&&u?-1:1)}return a}var ft=async(t,e,o)=>{let{placement:n="bottom",strategy:i="absolute",middleware:r=[],platform:l}=o,s=r.filter(Boolean),f=await(l.isRTL==null?void 0:l.isRTL(e)),c=await l.getElementRects({reference:t,floating:e,strategy:i}),{x:u,y:a}=st(c,n,f),m=n,d={},p=0;for(let h=0;h<s.length;h++){let{name:g,fn:y}=s[h],{x,y:E,data:C,reset:A}=await y({x:u,y:a,initialPlacement:n,placement:m,strategy:i,middlewareData:d,rects:c,platform:l,elements:{reference:t,floating:e}});u=x??u,a=E??a,d={...d,[g]:{...d[g],...C}},A&&p<=50&&(p++,typeof A=="object"&&(A.placement&&(m=A.placement),A.rects&&(c=A.rects===!0?await l.getElementRects({reference:t,floating:e,strategy:i}):A.rects),{x:u,y:a}=st(c,m,f)),h=-1)}return{x:u,y:a,placement:m,strategy:i,middlewareData:d}};function Dt(t){return typeof t!="number"?function(e){return{top:0,right:0,bottom:0,left:0,...e}}(t):{top:t,right:t,bottom:t,left:t}}function N(t){return{...t,top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}async function $(t,e){var o;e===void 0&&(e={});let{x:n,y:i,platform:r,rects:l,elements:s,strategy:f}=t,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:a="floating",altBoundary:m=!1,padding:d=0}=e,p=Dt(d),h=s[m?a==="floating"?"reference":"floating":a],g=N(await r.getClippingRect({element:(o=await(r.isElement==null?void 0:r.isElement(h)))==null||o?h:h.contextElement||await(r.getDocumentElement==null?void 0:r.getDocumentElement(s.floating)),boundary:c,rootBoundary:u,strategy:f})),y=a==="floating"?{...l.floating,x:n,y:i}:l.reference,x=await(r.getOffsetParent==null?void 0:r.getOffsetParent(s.floating)),E=await(r.isElement==null?void 0:r.isElement(x))&&await(r.getScale==null?void 0:r.getScale(x))||{x:1,y:1},C=N(r.convertOffsetParentRelativeRectToViewportRelativeRect?await r.convertOffsetParentRelativeRectToViewportRelativeRect({rect:y,offsetParent:x,strategy:f}):y);return{top:(g.top-C.top+p.top)/E.y,bottom:(C.bottom-g.bottom+p.bottom)/E.y,left:(g.left-C.left+p.left)/E.x,right:(C.right-g.right+p.right)/E.x}}var Ct=Math.min,St=Math.max;function ct(t,e,o){return St(t,Ct(e,o))}var Ot=["top","right","bottom","left"],Xt=Ot.reduce((t,e)=>t.concat(e,e+"-start",e+"-end"),[]),kt={left:"right",right:"left",bottom:"top",top:"bottom"};function q(t){return t.replace(/left|right|bottom|top/g,e=>kt[e])}function Ht(t,e,o){o===void 0&&(o=!1);let n=Q(t),i=Z(t),r=at(i),l=i==="x"?n===(o?"end":"start")?"right":"left":n==="start"?"bottom":"top";return e.reference[r]>e.floating[r]&&(l=q(l)),{main:l,cross:q(l)}}var Ft={start:"end",end:"start"};function K(t){return t.replace(/start|end/g,e=>Ft[e])}var Bt=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var o;let{placement:n,middlewareData:i,rects:r,initialPlacement:l,platform:s,elements:f}=e,{mainAxis:c=!0,crossAxis:u=!0,fallbackPlacements:a,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:d="none",flipAlignment:p=!0,...h}=t,g=B(n),y=B(l)===l,x=await(s.isRTL==null?void 0:s.isRTL(f.floating)),E=a||(y||!p?[q(l)]:function(v){let P=q(v);return[K(v),P,K(P)]}(l));a||d==="none"||E.push(...function(v,P,H,S){let D=Q(v),b=function(M,J,Tt){let rt=["left","right"],lt=["right","left"],Et=["top","bottom"],Pt=["bottom","top"];switch(M){case"top":case"bottom":return Tt?J?lt:rt:J?rt:lt;case"left":case"right":return J?Et:Pt;default:return[]}}(B(v),H==="start",S);return D&&(b=b.map(M=>M+"-"+D),P&&(b=b.concat(b.map(K)))),b}(l,p,d,x));let C=[l,...E],A=await $(e,h),j=[],z=((o=i.flip)==null?void 0:o.overflows)||[];if(c&&j.push(A[g]),u){let{main:v,cross:P}=Ht(n,r,x);j.push(A[v],A[P])}if(z=[...z,{placement:n,overflows:j}],!j.every(v=>v<=0)){var nt,ot;let v=(((nt=i.flip)==null?void 0:nt.index)||0)+1,P=C[v];if(P)return{data:{index:v,overflows:z},reset:{placement:P}};let H=(ot=z.filter(S=>S.overflows[0]<=0).sort((S,D)=>S.overflows[1]-D.overflows[1])[0])==null?void 0:ot.placement;if(!H)switch(m){case"bestFit":{var it;let S=(it=z.map(D=>[D.placement,D.overflows.filter(b=>b>0).reduce((b,M)=>b+M,0)]).sort((D,b)=>D[1]-b[1])[0])==null?void 0:it[0];S&&(H=S);break}case"initialPlacement":H=l}if(n!==H)return{reset:{placement:H}}}return{}}}};function Wt(t){return t==="x"?"y":"x"}var Vt=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){let{x:o,y:n,placement:i}=e,{mainAxis:r=!0,crossAxis:l=!1,limiter:s={fn:g=>{let{x:y,y:x}=g;return{x:y,y:x}}},...f}=t,c={x:o,y:n},u=await $(e,f),a=Z(B(i)),m=Wt(a),d=c[a],p=c[m];if(r){let g=a==="y"?"bottom":"right";d=ct(d+u[a==="y"?"top":"left"],d,d-u[g])}if(l){let g=m==="y"?"bottom":"right";p=ct(p+u[m==="y"?"top":"left"],p,p-u[g])}let h=s.fn({...e,[a]:d,[m]:p});return{...h,data:{x:h.x-o,y:h.y-n}}}}};function R(t){var e;return((e=t.ownerDocument)==null?void 0:e.defaultView)||window}function L(t){return R(t).getComputedStyle(t)}function yt(t){return t instanceof R(t).Node}function k(t){return yt(t)?(t.nodeName||"").toLowerCase():""}function T(t){return t instanceof R(t).HTMLElement}function w(t){return t instanceof R(t).Element}function ut(t){return typeof ShadowRoot>"u"?!1:t instanceof R(t).ShadowRoot||t instanceof ShadowRoot}function _(t){let{overflow:e,overflowX:o,overflowY:n,display:i}=L(t);return/auto|scroll|overlay|hidden|clip/.test(e+n+o)&&!["inline","contents"].includes(i)}function zt(t){return["table","td","th"].includes(k(t))}function tt(t){let e=et(),o=L(t);return o.transform!=="none"||o.perspective!=="none"||!e&&!!o.backdropFilter&&o.backdropFilter!=="none"||!e&&!!o.filter&&o.filter!=="none"||["transform","perspective","filter"].some(n=>(o.willChange||"").includes(n))||["paint","layout","strict","content"].some(n=>(o.contain||"").includes(n))}function et(){return!(typeof CSS>"u"||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}function G(t){return["html","body","#document"].includes(k(t))}var dt=Math.min,X=Math.max,U=Math.round;function xt(t){let e=L(t),o=parseFloat(e.width)||0,n=parseFloat(e.height)||0,i=T(t),r=i?t.offsetWidth:o,l=i?t.offsetHeight:n,s=U(o)!==r||U(n)!==l;return s&&(o=r,n=l),{width:o,height:n,fallback:s}}function wt(t){return w(t)?t:t.contextElement}var vt={x:1,y:1};function W(t){let e=wt(t);if(!T(e))return vt;let o=e.getBoundingClientRect(),{width:n,height:i,fallback:r}=xt(e),l=(r?U(o.width):o.width)/n,s=(r?U(o.height):o.height)/i;return l&&Number.isFinite(l)||(l=1),s&&Number.isFinite(s)||(s=1),{x:l,y:s}}var mt={x:0,y:0};function bt(t,e,o){var n,i;if(e===void 0&&(e=!0),!et())return mt;let r=t?R(t):window;return!o||e&&o!==r?mt:{x:((n=r.visualViewport)==null?void 0:n.offsetLeft)||0,y:((i=r.visualViewport)==null?void 0:i.offsetTop)||0}}function F(t,e,o,n){e===void 0&&(e=!1),o===void 0&&(o=!1);let i=t.getBoundingClientRect(),r=wt(t),l=vt;e&&(n?w(n)&&(l=W(n)):l=W(t));let s=bt(r,o,n),f=(i.left+s.x)/l.x,c=(i.top+s.y)/l.y,u=i.width/l.x,a=i.height/l.y;if(r){let m=R(r),d=n&&w(n)?R(n):n,p=m.frameElement;for(;p&&n&&d!==m;){let h=W(p),g=p.getBoundingClientRect(),y=getComputedStyle(p);g.x+=(p.clientLeft+parseFloat(y.paddingLeft))*h.x,g.y+=(p.clientTop+parseFloat(y.paddingTop))*h.y,f*=h.x,c*=h.y,u*=h.x,a*=h.y,f+=g.x,c+=g.y,p=R(p).frameElement}}return N({width:u,height:a,x:f,y:c})}function O(t){return((yt(t)?t.ownerDocument:t.document)||window.document).documentElement}function I(t){return w(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function Rt(t){return F(O(t)).left+I(t).scrollLeft}function V(t){if(k(t)==="html")return t;let e=t.assignedSlot||t.parentNode||ut(t)&&t.host||O(t);return ut(e)?e.host:e}function At(t){let e=V(t);return G(e)?e.ownerDocument.body:T(e)&&_(e)?e:At(e)}function Y(t,e){var o;e===void 0&&(e=[]);let n=At(t),i=n===((o=t.ownerDocument)==null?void 0:o.body),r=R(n);return i?e.concat(r,r.visualViewport||[],_(n)?n:[]):e.concat(n,Y(n))}function ht(t,e,o){let n;if(e==="viewport")n=function(i,r){let l=R(i),s=O(i),f=l.visualViewport,c=s.clientWidth,u=s.clientHeight,a=0,m=0;if(f){c=f.width,u=f.height;let d=et();(!d||d&&r==="fixed")&&(a=f.offsetLeft,m=f.offsetTop)}return{width:c,height:u,x:a,y:m}}(t,o);else if(e==="document")n=function(i){let r=O(i),l=I(i),s=i.ownerDocument.body,f=X(r.scrollWidth,r.clientWidth,s.scrollWidth,s.clientWidth),c=X(r.scrollHeight,r.clientHeight,s.scrollHeight,s.clientHeight),u=-l.scrollLeft+Rt(i),a=-l.scrollTop;return L(s).direction==="rtl"&&(u+=X(r.clientWidth,s.clientWidth)-f),{width:f,height:c,x:u,y:a}}(O(t));else if(w(e))n=function(i,r){let l=F(i,!0,r==="fixed"),s=l.top+i.clientTop,f=l.left+i.clientLeft,c=T(i)?W(i):{x:1,y:1};return{width:i.clientWidth*c.x,height:i.clientHeight*c.y,x:f*c.x,y:s*c.y}}(e,o);else{let i=bt(t);n={...e,x:e.x-i.x,y:e.y-i.y}}return N(n)}function Lt(t,e){let o=V(t);return!(o===e||!w(o)||G(o))&&(L(o).position==="fixed"||Lt(o,e))}function pt(t,e){return T(t)&&L(t).position!=="fixed"?e?e(t):t.offsetParent:null}function gt(t,e){let o=R(t);if(!T(t))return o;let n=pt(t,e);for(;n&&zt(n)&&L(n).position==="static";)n=pt(n,e);return n&&(k(n)==="html"||k(n)==="body"&&L(n).position==="static"&&!tt(n))?o:n||function(i){let r=V(i);for(;T(r)&&!G(r);){if(tt(r))return r;r=V(r)}return null}(t)||o}function Mt(t,e,o){let n=T(e),i=O(e),r=o==="fixed",l=F(t,!0,r,e),s={scrollLeft:0,scrollTop:0},f={x:0,y:0};if(n||!n&&!r)if((k(e)!=="body"||_(i))&&(s=I(e)),T(e)){let c=F(e,!0,r,e);f.x=c.x+e.clientLeft,f.y=c.y+e.clientTop}else i&&(f.x=Rt(i));return{x:l.left+s.scrollLeft-f.x,y:l.top+s.scrollTop-f.y,width:l.width,height:l.height}}var Nt={getClippingRect:function(t){let{element:e,boundary:o,rootBoundary:n,strategy:i}=t,r=o==="clippingAncestors"?function(c,u){let a=u.get(c);if(a)return a;let m=Y(c).filter(g=>w(g)&&k(g)!=="body"),d=null,p=L(c).position==="fixed",h=p?V(c):c;for(;w(h)&&!G(h);){let g=L(h),y=tt(h);y||g.position!=="fixed"||(d=null),(p?!y&&!d:!y&&g.position==="static"&&d&&["absolute","fixed"].includes(d.position)||_(h)&&!y&&Lt(c,h))?m=m.filter(x=>x!==h):d=g,h=V(h)}return u.set(c,m),m}(e,this._c):[].concat(o),l=[...r,n],s=l[0],f=l.reduce((c,u)=>{let a=ht(e,u,i);return c.top=X(a.top,c.top),c.right=dt(a.right,c.right),c.bottom=dt(a.bottom,c.bottom),c.left=X(a.left,c.left),c},ht(e,s,i));return{width:f.right-f.left,height:f.bottom-f.top,x:f.left,y:f.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(t){let{rect:e,offsetParent:o,strategy:n}=t,i=T(o),r=O(o);if(o===r)return e;let l={scrollLeft:0,scrollTop:0},s={x:1,y:1},f={x:0,y:0};if((i||!i&&n!=="fixed")&&((k(o)!=="body"||_(r))&&(l=I(o)),T(o))){let c=F(o);s=W(o),f.x=c.x+o.clientLeft,f.y=c.y+o.clientTop}return{width:e.width*s.x,height:e.height*s.y,x:e.x*s.x-l.scrollLeft*s.x+f.x,y:e.y*s.y-l.scrollTop*s.y+f.y}},isElement:w,getDimensions:function(t){return xt(t)},getOffsetParent:gt,getDocumentElement:O,getScale:W,async getElementRects(t){let{reference:e,floating:o,strategy:n}=t,i=this.getOffsetParent||gt,r=this.getDimensions;return{reference:Mt(e,await i(o),n),floating:{x:0,y:0,...await r(o)}}},getClientRects:t=>Array.from(t.getClientRects()),isRTL:t=>L(t).direction==="rtl"};function Qt(t,e,o,n){n===void 0&&(n={});let{ancestorScroll:i=!0,ancestorResize:r=!0,elementResize:l=!0,animationFrame:s=!1}=n,f=i||r?[...w(t)?Y(t):t.contextElement?Y(t.contextElement):[],...Y(e)]:[];f.forEach(m=>{let d=!w(m)&&m.toString().includes("V");!i||s&&!d||m.addEventListener("scroll",o,{passive:!0}),r&&m.addEventListener("resize",o)});let c,u=null;l&&(u=new ResizeObserver(()=>{o()}),w(t)&&!s&&u.observe(t),w(t)||!t.contextElement||s||u.observe(t.contextElement),u.observe(e));let a=s?F(t):null;return s&&function m(){let d=F(t);!a||d.x===a.x&&d.y===a.y&&d.width===a.width&&d.height===a.height||o(),a=d,c=requestAnimationFrame(m)}(),o(),()=>{var m;f.forEach(d=>{i&&d.removeEventListener("scroll",o),r&&d.removeEventListener("resize",o)}),(m=u)==null||m.disconnect(),u=null,s&&cancelAnimationFrame(c)}}var Zt=(t,e,o)=>{let n=new Map,i={platform:Nt,...o},r={...i.platform,_c:n};return ft(t,e,{...i,platform:r})};export{Bt as a,Vt as b,Qt as c,Zt as d};
