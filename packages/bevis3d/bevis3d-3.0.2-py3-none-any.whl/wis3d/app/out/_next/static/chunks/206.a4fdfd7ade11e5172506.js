(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[206],{3395:function(e,t,r){"use strict";r.r(t),r.d(t,{Scene:function(){return Ht},default:function(){return qt}});var n=r(5893),o=r(9999),i=r(4121),a=r(7294),u=r(1380),l=r(1661),c=r(5172),s=r(4839),f=(0,a.createContext)(void 0),p=r(6265),m=r(4971),d=r(6881),h=r(721);function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}(0,u.l7)({TrackballControls:m.$6});var g={current:void 0},x=!0;function y(e){var t,r,n,o;null===(t=g.current)||void 0===t||t.target.copy(e.point);var i=new d.P(0,0,-1);i.applyQuaternion(null===(r=g.current)||void 0===r?void 0:r.object.quaternion).normalize();var a=e.point.distanceTo(null===(n=g.current)||void 0===n?void 0:n.object.position),l=e.point.sub(i.multiplyScalar(.8*a));null===(o=g.current)||void 0===o||o.object.position.copy(l),(0,u.z6)()}var S=function(e){return{gl:e.gl,scene:e.scene,camera:e.camera,raycaster:e.raycaster,invalidate:e.invalidate}},b=(0,a.memo)((0,a.forwardRef)((function(e,t){var r=(0,u.Ky)(S),o=r.gl,i=r.scene,l=r.camera,s=r.raycaster,f=r.invalidate;g=(0,a.useRef)();var m=(0,h.r)(t,g);(0,c.y)("c",(function(e){console.log("camera position: ",l.position),console.log("camera rotation: ",l.rotation.toArray())}),[]);return(0,a.useEffect)((function(){var e=g.current;if(e)return g.current=e,e.addEventListener("change",f),function(){e.removeEventListener("change",f)}}),[o,l,i,s,f]),(0,u.xQ)((function(){var e;!function(){if(x){var e=JSON.parse(localStorage.getItem("camera.position")),t=JSON.parse(localStorage.getItem("camera.rotation")),r=JSON.parse(localStorage.getItem("camera.target"));if(null!=e&&null!=t){var n=l.position;l.translateX(e.x-n.x),l.translateY(e.y-n.y),l.translateZ(e.z-n.z);var o=l.rotation.toArray();l.rotateX(t[0]-o[0]),l.rotateY(t[1]-o[1]),l.rotateZ(t[2]-o[2]),m.current.target.copy(r)}else localStorage.setItem("camera.position",JSON.stringify(l.position)),localStorage.setItem("camera.rotation",JSON.stringify(l.rotation.toArray())),localStorage.setItem("camera.target",JSON.stringify(m.current.target))}else localStorage.setItem("camera.position",JSON.stringify(l.position)),localStorage.setItem("camera.rotation",JSON.stringify(l.rotation.toArray())),localStorage.setItem("camera.target",JSON.stringify(m.current.target));x=!1}(),null===(e=g.current)||void 0===e||e.update()})),(0,n.jsx)("trackballControls",function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach((function(t){(0,p.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({ref:m,args:[l,o.domElement]},e))}))),w=r(423),j=r(8840),O=r(6286);function C(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _(e,t,r,o,i,a,u,l){switch(e){case"MeshStandardMaterial":return(0,n.jsx)("meshStandardMaterial",{ref:t,vertexColors:r,color:o,wireframe:i,side:l,flatShading:a});case"MeshNormalMaterial":return(0,n.jsx)("meshNormalMaterial",{ref:t,vertexColors:r,color:o,wireframe:i,side:l,flatShading:a});case"MeshPhongMaterial":return(0,n.jsx)("meshPhongMaterial",{ref:t,vertexColors:r,color:o,wireframe:i,side:l,flatShading:a,shininess:u});case"MeshBasicMaterial":default:return(0,n.jsx)("meshBasicMaterial",{ref:t,vertexColors:r,color:o,wireframe:i,side:l})}}var A=(0,a.memo)((function(e){var t=e.url,r=(0,w.U2)(j.L,t);return r&&(0,n.jsx)("primitive",{object:r})})),P=(0,a.memo)((function(e){var t=e.url,r=e.vertexColors,o=e.material,i=e.color,u=e.visible,l=e.wireframe,c=e.side,s=e.flatShading,f=e.shininess,p=(0,w.U2)(O.F,t),m=(0,a.useRef)(),d=(0,a.useMemo)((function(){return(null===p||void 0===p?void 0:p.hasAttribute("color"))&&r}),[p,r]);return p&&!p.hasAttribute("normal")&&p.computeVertexNormals(),(0,a.useLayoutEffect)((function(){m.current&&(m.current.needsUpdate=!0)}),[r,s]),p?(0,n.jsx)("mesh",{visible:u,geometry:p,onDoubleClick:u&&y,children:_(o,m,r,d?16777215:i,l,s,f,c)}):null})),M=(0,a.memo)((function(e){return e.url.endsWith("ply")?(0,n.jsx)(P,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?C(Object(r),!0).forEach((function(t){(0,p.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):C(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e)):(0,n.jsx)(A,{url:e.url})})),B=(0,a.memo)((function(e){var t=e.url,r=e.color,o=e.visible,i=void 0===o||o,u=e.pointSize,l=void 0===u?.03:u,c=e.vertexColors,s=e.opacity,f=(0,w.U2)(O.F,t),p=(0,a.useRef)(),m=(0,a.useMemo)((function(){return(null===f||void 0===f?void 0:f.hasAttribute("color"))&&c}),[f,c]);return(0,a.useLayoutEffect)((function(){p.current&&(p.current.needsUpdate=!0)}),[m]),f?(0,n.jsx)("points",{visible:i,geometry:f,onDoubleClick:i&&y,children:(0,n.jsx)("pointsMaterial",{ref:p,size:l,vertexColors:m,color:m?16777215:r,transparent:!0,opacity:s})}):null})),F=r(1301),R=r(9046),D=r(140);(0,u.l7)({Line_:F.x});var L,N={positions:[],eulers:[]},T=(0,a.memo)((function(e){var t=e.url,r=e.showCamera,o=e.visible,i=e.lineColor,u=void 0===i?"#1f77b4":i,l=e.pointSize,c=void 0===l?.03:l,s=e.pointColor,f=void 0===s?"#ffffff":s,p=e.defaultColor,m=e.vertexColors,d=e.onLoad,h=(0,w.J6)(t,"Get","json",N),v=h.positions,g=h.eulers,x=(0,a.useRef)(),S=(0,a.useState)(),b=S[0],j=S[1],O=(0,a.useState)(),C=(O[0],O[1],(0,a.useState)()),_=C[0],A=C[1],P=(0,a.useState)(0),M=P[0],B=P[1];(0,a.useLayoutEffect)((function(){var e=v.length-1;B(e),null===d||void 0===d||d(v[e],g[e])}),[v,g]),(0,a.useEffect)((function(){var e=new R.u,t=new Float32Array(v.flat()),r=new D.Tl(t,3);e.attributes.position=r,j(e)}),[v]);var F=(0,a.useCallback)((function(e){B(e.index)}),[]);return v.length>0?(0,n.jsxs)("group",{visible:o,children:[(0,n.jsx)("perspectiveCamera",{ref:A,fov:60,aspect:1,near:.05,far:.1,position:v[M],rotation:g[M]}),r&&_&&(0,n.jsx)("cameraHelper",{ref:x,args:[_],name:"trajectory_camera"}),(0,n.jsx)("points",{onClick:F,onDoubleClick:y,geometry:b,children:(0,n.jsx)("pointsMaterial",{size:c,color:m?f:p})}),b&&(0,n.jsx)("line_",{geometry:b,children:(0,n.jsx)("lineBasicMaterial",{color:m?u:p})})]}):null})),E=r(1122),G=r(1138),I=r(3935),z=r(2525),k=r(3234),Z=r(4584),J=r(2043),V=(0,z.ZC)({wrapper:{transform:"none !important"},labelRoot:{width:0,height:0},labelWrapper:[k.r.fonts.xLarge,{position:"relative",top:-64,cursor:"default",pointerEvents:"none",userSelect:"none"}],table:{padding:k.r.spacing.s2,width:"100%",height:"100%","& tr, & th, & td":{padding:k.r.spacing.s2}},thead:{"&>tr>th:first-of-type":{textAlign:"left"}},tbody:{"&>tr>th":{textAlign:"left"},td:{textAlign:"center"}}}),U={},W=function(e){var t=e.currentTarget.parentElement;U.prevNode&&(U.prevNode.style.zIndex=U.prevNodeZIndex),U.prevNode=t,U.prevNodeZIndex=t.style.zIndex,t.style.zIndex="999"},H={pointerEvents:"auto",bottom:0},q=(0,a.memo)((function(e){var t=e.position,r=e.scale,o=e.rotation,i=e.name,u=e.onClose,l=(0,a.useState)(),c=l[0],s=l[1];return(0,a.useLayoutEffect)((function(){L||(L=document.getElementById("property-docker"));var e=document.createElement("div");return s(e),e.className=i,L.appendChild(e),function(){L.removeChild(e)}}),[]),(0,a.useLayoutEffect)((function(){if(c)return(0,I.render)((0,n.jsx)(Z.l,{title:i,enableResizing:!1,onClose:u,onMouseDown:W,style:H,children:(0,n.jsxs)("table",{className:V.table,children:[(0,n.jsx)("thead",{className:V.thead,children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:"properties"}),(0,n.jsx)("th",{children:"x"}),(0,n.jsx)("th",{children:"y"}),(0,n.jsx)("th",{children:"z"})]})}),(0,n.jsxs)("tbody",{className:V.tbody,children:[(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:"position"}),t.map((function(e,t){return(0,n.jsx)("td",{children:e.toFixed(3)},t)}))]}),(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:"scale"}),r.map((function(e,t){return(0,n.jsx)("td",{children:e.toFixed(3)},t)}))]}),(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:"rotation"}),o.map((function(e,t){return(0,n.jsx)("td",{children:"".concat(J.radToDeg(e).toFixed(2),"\xb0")},t)}))]})]})]})}),c),function(){(0,I.unmountComponentAtNode)(c)}}),[c,t,r,o]),(0,n.jsx)(n.Fragment,{})}));(0,u.l7)({SpriteText:E.Z});var K,Y=[1.1],$=new G.F(0,1),X=(0,a.memo)((function(e){var t=e.position,r=e.euler,o=e.extent,i=e.name,u=e.color,l=e.visible,c=void 0===l||l,s=e.label,f=e.showAxes,p=e.showLabel,m=e.opacity,d=e.wireframe,h=e.depthWrite,v=e.side,g=(0,a.useRef)(),x=(0,a.useState)(),S=x[0],b=x[1],w=(0,a.useState)(!1),j=w[0],O=w[1],C=(0,a.useState)(!1),_=C[0],A=C[1],P=(0,a.useMemo)((function(){return[0,0,o[2]+.2]}),[o]),M=(0,a.useCallback)((function(e){return O(!0)}),[]),B=(0,a.useCallback)((function(){return O(!1)}),[]),F=(0,a.useCallback)((function(){if(K||(K=document.getElementById("property-docker")),0!=K.childElementCount){var e=K.firstChild.className;document.getElementById(e).click()}A(!0)}),[]),R=(0,a.useCallback)((function(){return A(!1)}),[]);return(0,n.jsxs)("group",{visible:c,position:t,rotation:r,children:[(0,n.jsxs)("mesh",{ref:g,scale:o,onPointerOver:M,onPointerOut:B,onClick:F,onDoubleClick:y,children:[(0,n.jsx)("boxBufferGeometry",{ref:b}),(0,n.jsx)("meshBasicMaterial",{vertexColors:!1,color:u,transparent:!0,opacity:m,wireframe:d,depthWrite:h,side:v})]}),(0,n.jsx)("axesHelper",{args:Y,visible:f}),S&&(0,n.jsxs)("lineSegments",{scale:o,children:[(0,n.jsx)("edgesGeometry",{args:[S]}),(0,n.jsx)("lineBasicMaterial",{color:j?16711680:16777215})]}),s&&(0,n.jsx)("spriteText",{text:s,backgroundColor:u,center:$,textHeight:.01,fontSize:30,padding:.05,borderWidth:.2,borderColor:_||j?"red":"white",position:P,visible:p}),_&&(0,n.jsx)(q,{name:i,position:t,scale:o,rotation:r,onClose:R})]})}));function Q(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var ee=(0,a.memo)((function(e){var t=e.url,r=e.color,o=e.name,i=e.visible,a=void 0===i||i,u=e.showAxes,l=e.showLabel,c=e.opacity,s=e.wireframe,f=e.depthWrite,m=e.side,d=(0,w.J6)(t,"GET","json",[]);return(0,n.jsx)("group",{visible:a,children:null===d||void 0===d?void 0:d.map((function(e,t){return(0,n.jsx)(X,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(r),!0).forEach((function(t){(0,p.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Q(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({name:o,color:r,showAxes:u,showLabel:l,opacity:c,wireframe:s,depthWrite:f,side:m},e),t)}))})})),te=r(3869),re=r(8723),ne=r(3411);(0,u.l7)({LineMaterial:ne.Y,LineGeometry:re.L,Line2:te.w});var oe=function(e){return e.size},ie=(0,a.memo)((function(e){var t=(0,u.Ky)(oe),r=e.url,i=e.defaultColor,l=(e.name,e.visible),c=void 0===l||l,s=e.lineWidth,f=e.vertexColors,p=(0,w.J6)(r,"GET","json",[]),m=(0,a.useMemo)((function(){return p.map((function(e){var t=e.start_point,r=e.end_point;return(new re.L).setPositions([].concat((0,o.Z)(t),(0,o.Z)(r)))}))}),[p]);return(0,n.jsx)("group",{visible:c,children:m.map((function(e,r){var o=p[r].color?p[r].color.map((function(e){return e/250})):void 0;return(0,n.jsx)("line2",{geometry:e,onDoubleClick:y,children:(0,n.jsx)("lineMaterial",{color:f&&o||i,linewidth:s,resolution:[t.width,t.height]})},r)}))})})),ae=r(4047),ue=r(2700),le=r(1042),ce=r.n(le),se=r(461),fe=r(3662),pe=r(6724),me=r(6454),de=r(3678),he=r(4706),ve=r(8127),ge=r(4102),xe=r(775),ye=r(2266),Se=r(2319),be=r(4032),we={LOD:{maxPoints:1,maxDepth:80},setLOD:function(e,t){"undefined"!==typeof e&&(this.LOD.maxPoints=e),"undefined"!==typeof t&&(this.LOD.maxDepth=t)},getLOD:function(){return this.LOD}};function je(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,xe.Z)(e);if(t){var o=(0,xe.Z)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,ge.Z)(this,r)}}var Oe=function(e){(0,ve.Z)(r,e);var t=je(r);function r(e){var n;return(0,ae.Z)(this,r),n=t.call(this,e),ce()((0,he.Z)(n)),Object.assign((0,he.Z)(n),we),n}return(0,ue.Z)(r,[{key:"load",value:function(e,t,r,n){var o=this,i=new ye.h(this.manager);i.setPath(this.path),i.load(e,(function(e){o.parse(e).then((function(e){return t(e)})).catch((function(e){return console.error(e)}))}),r,n)}},{key:"parse",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=e.voxels,r=e.colors,n=this;return new Promise((function(e,o){for(var i=-(t[0][0].length-1)/2,a=(t[0][0].length-1)/2,u=-(t.length-1)/2,l=(t.length-1)/2,c=-(t[0].length-1)/2,s=(t[0].length-1)/2,f=new d.P(i,c,u),p=new d.P(a,s,l),m=new be.nv(f,p,0,n.LOD.maxPoints,n.LOD.maxDepth),h={},v=0;v<t.length;v++)for(var g=0;g<t[v].length;g++)for(var x=0;x<t[v][g].length;x++){if(1===t[v][g][x]){var y=x-(t[v][g].length-1)/2,S=g-(t[v].length-1)/2,b=v-(t.length-1)/2;if(r)h={color:{r:r[v][g][x][0],g:r[v][g][x][1],b:r[v][g][x][2]}};m.insert(new d.P(y,S,b),h)}}e(m)}))}}]),r}(Se.a);function Ce(e,t){var r;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return _e(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _e(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw i}}}}function _e(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Ae=function(){function e(){(0,ae.Z)(this,e),ce()(this),Object.assign(this,we)}return(0,ue.Z)(e,[{key:"parse",value:function(e){var t=this;return new Promise((function(r){var n,o=new be.nv(e.root.min,e.max,0,t.LOD.maxPoints,t.LOD.maxDepth),i=Ce(e.leaves());try{for(i.s();!(n=i.n()).done;){var a,u=n.value;if(null!==u.points)for(a=0;a<u.points.length;a++){var l=u.points[a],c=u.data[a];o.insert(l,c)}}}catch(s){i.e(s)}finally{i.f()}r(o)}))}}]),e}(),Pe=r(9203),Me=r(8009),Be=r.n(Me),Fe=r(4957);function Re(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,xe.Z)(e);if(t){var o=(0,xe.Z)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,ge.Z)(this,r)}}var De=function(e){(0,ve.Z)(r,e);var t=Re(r);function r(e){var n;return(0,ae.Z)(this,r),n=t.call(this,e),ce()((0,he.Z)(n)),Object.assign((0,he.Z)(n),we),n}return(0,ue.Z)(r,[{key:"load",value:function(e,t,r,n){var o=this,i=new ye.h(this.manager);i.setPath(this.path),i.setResponseType("arraybuffer"),i.load(e,(function(e){o.parse(e).then((function(e){return t(e)})).catch((function(e){return console.error(e)}))}),r,n)}},{key:"parse",value:function(e){var t=this,r=Be().VoxReader,n=Be().VoxNodeTools,o=Be().VoxTools;return new Promise((function(i,a){r.read(e,(function(e,r){r&&a(r);var u=[],l=new d.P,c=new Pe.y,s=[];if(null==e.world){var f=e.sizes[0],p=new d.P(f.x,f.z,f.y);s.push({model:0,position:new d.P,rotation:new Fe.Lt,size:p})}else n.walkNodeGraph(e,{beginGraph:function(){},endGraph:function(){},onTransform:function(e){if(o.dictHasTranslation(e)){var t=o.getTranslationFromDict(e);u.push(new d.P(t.x,t.z,t.y)),l.add(new d.P(t.x,t.z,t.y))}else u.push(new d.P);if(o.dictHasRotation(e)){var r=o.getRotationFromDict(e),n=new Pe.y;n.set(r._00,r._01,r._02,0,r._10,r._11,r._12,0,r._20,r._21,r._22,0,0,0,0,1),u.push(n),c.multiply(n)}else u.push(new Pe.y)},beginGroup:function(){},endGroup:function(){var e=u.pop(),t=u.pop();l.sub(t),c.multiply(e.getInverse(e))},onShape:function(t,r){var n=r[0].modelId,o=(new d.P).add(l),i=(new Pe.y).multiply(c),a=e.sizes[n],f=new d.P(a.x,a.z,a.y);s.push({model:n,position:o,rotation:i,size:f});var p=u.pop(),m=u.pop();l.sub(m),c.multiply(p.getInverse(p))}});for(var m=1/0,h=1/0,v=1/0,g=-1/0,x=-1/0,y=-1/0,S=0;S<s.length;S++){var b=s[S],w=b.position,j=b.size;w.x<m&&(m=w.x-j.x/2),w.y<h&&(h=w.y-j.y/2),w.z<v&&(v=w.z-j.z/2),w.x>g&&(g=w.x+j.x/2),w.y>x&&(x=w.y+j.y/2),w.z>y&&(y=w.z+j.z/2)}for(var O=new d.P(m,h,v),C=new d.P(g,x,y),_=new be.nv(O,C,0,t.LOD.maxPoints,t.LOD.maxDepth),A=0;A<s.length;A++)for(var P=s[A].model,M=s[A].position,B=s[A].size,F=(new d.P).copy(B).divideScalar(2),R=0;R<e.models[P].length;R++){var D=e.models[P][R],L=e.palette[D.colorIndex],N={color:{r:L.r,g:L.g,b:L.b}},T=new d.P(D.x,D.z,D.y);T.sub(F),T.add(M),_.insert(T,N)}i(_)}))}))}}]),r}(Se.a);function Le(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,xe.Z)(e);if(t){var o=(0,xe.Z)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,ge.Z)(this,r)}}var Ne=function(e){(0,ve.Z)(r,e);var t=Le(r);function r(e){var n;return(0,ae.Z)(this,r),n=t.call(this,e),ce()((0,he.Z)(n)),Object.assign((0,he.Z)(n),we),n}return(0,ue.Z)(r,[{key:"load",value:function(e,t,r,n){var o=this,i=new ye.h(this.manager);i.setPath(this.path),i.load(e,(function(e){o.parse(e).then((function(e){return t(e)})).catch((function(e){return console.error(e)}))}),r,n)}},{key:"parse",value:function(e){var t=this;return new Promise((function(r,n){var o=(new DOMParser).parseFromString(e,"application/xml"),i=o.documentElement.getElementsByTagName("dimensions")[0],a=i.getElementsByTagName("width")[0].childNodes[0].nodeValue,u=i.getElementsByTagName("height")[0].childNodes[0].nodeValue,l=i.getElementsByTagName("depth")[0].childNodes[0].nodeValue,c=o.documentElement.getElementsByTagName("voxels")[0].getElementsByTagName("voxel"),s=new d.P(-a/2,-u/2,-l/2),f=new d.P(a/2,u/2,l/2),p=new be.nv(s,f,0,t.LOD.maxPoints,t.LOD.maxDepth),m={};Array.from(c).forEach((function(e){var t,r,n,o=e.getElementsByTagName("position")[0];t=1*o.getElementsByTagName("x")[0].childNodes[0].nodeValue,r=1*o.getElementsByTagName("y")[0].childNodes[0].nodeValue,n=1*o.getElementsByTagName("z")[0].childNodes[0].nodeValue,t-=a/2,r-=u/2,n-=l/2;var i,c,s,f=e.getElementsByTagName("color")[0];f&&(i=1*f.getElementsByTagName("r")[0].childNodes[0].nodeValue,c=1*f.getElementsByTagName("g")[0].childNodes[0].nodeValue,s=1*f.getElementsByTagName("b")[0].childNodes[0].nodeValue,m={color:{r:i,g:c,b:s}});p.insert(new d.P(t,r,n),m)})),r(p)}))}}]),r}(Se.a),Te=r(6572);function Ee(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,xe.Z)(e);if(t){var o=(0,xe.Z)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,ge.Z)(this,r)}}var Ge=function(e){(0,ve.Z)(r,e);var t=Ee(r);function r(e){var n;return(0,ae.Z)(this,r),n=t.call(this,e),ce()((0,he.Z)(n)),Object.assign((0,he.Z)(n),we),n}return(0,ue.Z)(r,[{key:"load",value:function(e,t,r,n){var o=this,i=new ye.h(this.manager);i.setPath(this.path),i.setResponseType("arraybuffer"),i.load(e,(function(e){o.parse(e).then((function(e){return t(e)})).catch((function(e){return console.error(e)}))}),r,n)}},{key:"parse",value:function(e){var t=this;return new Promise((function(r,n){var o=(new Te._).parse(e),i=o.dimension.depth,a=o.dimension.width,u=o.dimension.height,l=new d.P(-i/2,-u/2,-a/2),c=new d.P(i/2,u/2,a/2),s=new be.nv(l,c,0,t.LOD.maxPoints,t.LOD.maxDepth),f={};o.voxels.forEach((function(e){var t,r,n;t=e.x-i/2,r=e.y-a/2,n=e.z-u/2;var o=new d.P(t,n,r);s.insert(o,f)})),r(s)}))}}]),r}(Se.a),Ie=function(){function e(t){(0,ae.Z)(this,e),this.manager=t}return(0,ue.Z)(e,[{key:"getLoader",value:function(e){switch(e){case"vox":return new De(this.manager);case"xml":return new Ne(this.manager);case"binvox":return new Ge(this.manager);case"array":return new Oe(this.manager);case"octree":return new Ae;default:throw new Error("Unsupported type ("+e+").")}}}]),e}();function ze(e,t){var r;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return ke(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ke(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw i}}}}function ke(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Ze=function(){function e(t){(0,ae.Z)(this,e),ce()(this),Object.assign(this,we),this.manager=t,this.octree=null,this.material=null,this.voxelSize=null,this.vertexColors=!0,this.setVoxelMaterial(),this.setVoxelSize(),this.setVoxelColor()}return(0,ue.Z)(e,[{key:"setVoxelMaterial",value:function(e){var t=new se.x({color:16777215});(e="undefined"!==typeof e?e:t).vertexColors=!0,this.material=e}},{key:"setVoxelColor",value:function(e){if("undefined"!==typeof e){var t=new fe.I(e),r=new se.x({color:t});this.material=r}}},{key:"setVertexColors",value:function(e){this.vertexColors=e}},{key:"setVoxelSize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.voxelSize=e}},{key:"update",value:function(){if(null===this.octree)throw new Error("Octree is not built");return this.parseData(this.octree,"octree")}},{key:"loadFile",value:function(e,t,r,n){var o=this,i=e.split(".").pop().toLowerCase(),a=new Ie(this.manager).getLoader(i);a.setLOD(this.LOD.maxPoints,this.LOD.maxDepth),a.load(e,(function(e){o.octree=e,t(o.generateMesh(e))}),r,n)}},{key:"parseData",value:function(e,t){var r=this,n=new Ie(this.manager).getLoader(t);return n.setLOD(this.LOD.maxPoints,this.LOD.maxDepth),new Promise((function(t){n.parse(e).then((function(e){r.octree=e,t(e)}))}))}},{key:"generateMesh",value:function(e){var t,r=new R.u,n=!1,o=ze(e.leaves());try{for(o.s();!(t=o.n()).done;){var i=t.value;if(null!==i.points){var a=new d.P,u={x:i.points[0].x,y:i.points[0].y,z:i.points[0].z},l={x:i.points[0].x,y:i.points[0].y,z:i.points[0].z};for(x=0;x<i.points.length;x++){var c=i.points[x];a.add(c),u.x=Math.min(u.x,c.x),u.y=Math.min(u.y,c.y),u.z=Math.min(u.z,c.z),l.x=Math.max(l.x,c.x),l.y=Math.max(l.y,c.y),l.z=Math.max(l.z,c.z)}var s=Math.round(100*(this.voxelSize+(l.x-u.x)))/100,f=Math.round(100*(this.voxelSize+(l.y-u.y)))/100,p=Math.round(100*(this.voxelSize+(l.z-u.z)))/100,m=new pe.D(s,f,p);a.divideScalar(x);var h=i.data[0].color;if(null!=h){n=!0;for(var v=[h.r/255,h.g/255,h.b/255],g=[],x=0;x<m.attributes.position.count;x++)g.push(v);m.attributes.color=new D.Tl(new Float32Array(g.flat()),3)}m.translate(a.x,a.y,a.z),r=null==r.index?m.clone():de.O.mergeBufferGeometries([r,m]),m.translate(-a.x,-a.y,-a.z)}}}catch(b){o.e(b)}finally{o.f()}var y=r.clone();y.computeVertexNormals(),n&&this.vertexColors&&this.setVoxelMaterial();var S=this.material;return new me.K(y,S)}}]),e}(),Je=r(6173),Ve=r(9833);function Ue(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function We(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ue(Object(r),!0).forEach((function(t){(0,p.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ue(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var He=(0,a.memo)((function(e){var t=e.url,r=(e.name,e.visible),o=void 0===r||r,i=e.defaultColor,u=e.vertexColors,l=(0,a.useState)(),c=l[0],s=l[1],f=(0,w.J6)(t,"GET","json",[]);return(0,a.useEffect)((function(){if(0!=f.length&&f[1].voxels.length>0){var e=function(e,t,r,n){var o,i=new R.u,a=!1,u=[];if(t.map((function(t,r){var n=t.voxel_center,o=t.color,i=new pe.D(e,e,e);if(null!=o){a=!0;for(var l=[o[0]/255,o[1]/255,o[2]/255],c=[],s=0;s<i.attributes.position.count;s++)c.push(l);i.attributes.color=new D.Tl(new Float32Array(c.flat()),3)}i.translate(n[0],n[1],n[2]),u.push(i)})),(i=de.O.mergeBufferGeometries(u)).computeVertexNormals(),a&&n)(o=new Je.v({color:16777215})).vertexColors=!0;else{var l=new fe.I(r);o=new Je.v({color:l})}return o.transparent=!0,o.opacity=.5,new me.K(i,o)}(f[0].voxel_size,f[1].voxels,i,u);s(e)}}),[f,i,u]),c?(0,n.jsx)("primitive",{visible:o,object:c,onDoubleClick:y}):(0,n.jsx)(n.Fragment,{})})),qe=(0,a.memo)((function(e){var t=e.url,r=(e.name,e.visible),o=void 0===r||r,i=e.defaultColor,u=e.vertexColors,l=(0,a.useState)(),c=l[0],s=l[1];return(0,a.useEffect)((function(){var e=new Ze(Ve.t);e.setVoxelColor(i),e.setVertexColors(u),e.loadFile(t,(function(e){s(e)}))}),[t,i,u]),c?(0,n.jsx)("primitive",{visible:o,object:c}):(0,n.jsx)(n.Fragment,{})})),Ke=(0,a.memo)((function(e){return e.url.endsWith("json")?(0,n.jsx)(He,We({},e)):(0,n.jsx)(qe,We({},e))})),Ye=(0,a.memo)((function(e){var t=e.url,r=e.defaultColor,o=e.visible,i=void 0===o||o,a=e.sphereColors,u=(0,w.J6)(t,"GET","json",[]);return(0,n.jsx)("group",{visible:i,children:u.map((function(e,t){var o=e.center,i=e.radius,u=e.color,l=u?u.map((function(e){return e/250})):void 0;return(0,n.jsxs)("mesh",{position:o,onDoubleClick:y,children:[(0,n.jsx)("sphereBufferGeometry",{args:[i,30,30]}),(0,n.jsx)("meshBasicMaterial",{color:a&&l?l:r,transparent:!0,opacity:.5})]},t)}))})})),$e=r(1158);(0,u.l7)({Plane:$e.J});var Xe=r(2536);function Qe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}(0,u.l7)({LineMaterial:ne.Y,LineGeometry:re.L,Line2:te.w,PolarGridHelper:Xe.a});var et,tt,rt,nt,ot,it,at,ut,lt,ct,st,ft,pt,mt,dt,ht,vt,gt,xt,yt,St,bt,wt,jt,Ot,Ct,_t=(0,a.memo)((function(e){var t=e.url,r=e.radius,o=e.radials,i=e.circles,a=e.divisions,u=e.color1,l=e.color2,c=(0,w.J6)(t,"GET","json",[]);return(0,n.jsx)("group",{children:c.map((function(e,t){return(0,n.jsx)("polarGridHelper",function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Qe(Object(r),!0).forEach((function(t){(0,p.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Qe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({position:[0,0,-.359],rotation:[Math.PI/2,0,0],args:[r,o,i,a,u,l],type:"PolarGridHelper"},e),t)}))})})),At={FrontSide:l.Wl3,BackSide:l._Li,DoubleSide:l.ehD},Pt={material:{label:"material",hint:"material",options:["MeshBasicMaterial","MeshStandardMaterial","MeshNormalMaterial","MeshPhongMaterial"],value:null!==(et=JSON.parse(localStorage.getItem("mesh.material")))&&void 0!==et?et:"MeshNormalMaterial"},vertexColors:{label:"vertex colors",hint:"vertex colors",value:null===(tt=JSON.parse(localStorage.getItem("mesh.vertexColors")))||void 0===tt||tt},wireframe:{hint:"wireframe",value:null!==(rt=JSON.parse(localStorage.getItem("mesh.wireframe")))&&void 0!==rt&&rt},flatShading:{label:"flat shading",hint:"flat shading",value:null!==(nt=JSON.parse(localStorage.getItem("mesh.flatShading")))&&void 0!==nt&&nt},shininess:{hint:"shininess",value:null!==(ot=JSON.parse(localStorage.getItem("mesh.shininess")))&&void 0!==ot?ot:10,min:0,max:100},side:{hint:"side",options:Object.keys(At),value:null!==(it=JSON.parse(localStorage.getItem("mesh.side")))&&void 0!==it?it:"FrontSide"}},Mt=(0,a.memo)((function(e){var t=e.items,r=e.store,o=(0,s.M4)("mesh",Pt,{store:r},[]),i=o.material,a=o.vertexColors,u=o.wireframe,l=o.flatShading,c=o.shininess,f=o.side;return(0,n.jsx)(n.Fragment,{children:t.map((function(e,t){return(0,n.jsx)(M,{url:e.url,color:e.color,visible:e.visible,material:i,vertexColors:a,wireframe:u,shininess:c,side:At[f],flatShading:l},t)}))})})),Bt=[.001,.01],Ft=function(){var e,t,r,n,o,i,a={},u=null!==(e=JSON.parse(localStorage.getItem("point cloud.pointSizeRange")))&&void 0!==e?e:[.001,.01];return a.vertexColors={label:"vertex colors",hint:"vertex colors",value:null===(t=JSON.parse(localStorage.getItem("point cloud.vertexColors")))||void 0===t||t},a.opacity={label:"opacity",hint:"opacity",value:null!==(r=JSON.parse(localStorage.getItem("point cloud.opacity")))&&void 0!==r?r:1,min:0,max:1,step:.01},a.pointSizeRange={label:"point size range",hint:"point size range",max:1.5,min:.001,value:[u[0],u[1]]},a.pointSize={label:"point size",hint:"point size",value:null!==(n=JSON.parse(localStorage.getItem("point cloud.pointSize")))&&void 0!==n?n:.02,min:Bt[0],max:Bt[1],step:.001},a.currentSize={type:s.gX.STRING,label:"current size",hint:"current size",disabled:!0,value:null!==(o=null===(i=JSON.parse(localStorage.getItem("point cloud.pointSize")))||void 0===i?void 0:i.toFixed(3).toString())&&void 0!==o?o:"0.020"},a},Rt=(0,a.memo)((function(e){var t=e.items,r=e.store,o=(0,s.M4)("point cloud",Ft,{store:r},[Bt]),a=(0,i.Z)(o,2),u=a[0],l=u.vertexColors,c=u.opacity,f=u.pointSizeRange,p=u.pointSize,m=a[1];return Bt=f,m({pointSize:function(){return p<=f[0]?f[0]:p>=f[1]?f[1]:p},currentSize:p.toFixed(3).toString()}),(0,n.jsx)(n.Fragment,{children:t.map((function(e,t){return(0,n.jsx)(B,{url:e.url,color:e.color,visible:e.visible,vertexColors:l,opacity:c,pointSize:p},t)}))})})),Dt={showAxes:{value:null===(at=JSON.parse(localStorage.getItem("box.showAxes")))||void 0===at||at,label:"show axes",hint:"show axes"},showLabel:{value:null===(ut=JSON.parse(localStorage.getItem("box.showLabel")))||void 0===ut||ut,label:"show label",hint:"show label"},opacity:{label:"opacity",hint:"opacity",value:null!==(lt=JSON.parse(localStorage.getItem("box.opacity")))&&void 0!==lt?lt:.5,min:0,max:1,step:.01},wireframe:{label:"wireframe",hint:"wireframe",value:null!==(ct=JSON.parse(localStorage.getItem("box.wireframe")))&&void 0!==ct&&ct},side:{hint:"side",options:Object.keys(At),value:null!==(st=JSON.parse(localStorage.getItem("box.side")))&&void 0!==st?st:"FrontSide"},depthWrite:{label:"depthWrite",hint:"depthWrite",value:null===(ft=JSON.parse(localStorage.getItem("box.depthWrite")))||void 0===ft||ft}},Lt=(0,a.memo)((function(e){var t=e.items,r=e.store,o=(0,s.M4)("box",Dt,{store:r},[]),i=o.showAxes,a=o.showLabel,u=o.opacity,l=o.wireframe,c=o.depthWrite,f=o.side;return(0,n.jsx)("group",{children:t.map((function(e,t){return(0,n.jsx)(ee,{name:e.name,url:e.url,color:e.color,visible:e.visible,showAxes:i,showLabel:a,opacity:u,wireframe:l,depthWrite:c,side:At[f]},t)}))})})),Nt={showCamera:{value:null===(pt=JSON.parse(localStorage.getItem("trajectory.showCamera")))||void 0===pt||pt,label:"show camera",hint:"show camera"},cameraFollow:{label:"camera follow",hint:"camera follow",value:null!==(mt=JSON.parse(localStorage.getItem("trajectory.cameraFollow")))&&void 0!==mt&&mt},pointSize:{value:null!==(dt=JSON.parse(localStorage.getItem("trajectory.pointSize")))&&void 0!==dt?dt:.03,min:.001,max:.1,step:.001,label:"point size",hint:"point size"},pointColor:{value:null!==(ht=JSON.parse(localStorage.getItem("trajectory.pointColor")))&&void 0!==ht?ht:"#e5e5e5",label:"point color",hint:"point color"},lineColor:{value:null!==(vt=JSON.parse(localStorage.getItem("trajectory.lineColor")))&&void 0!==vt?vt:"#1f77b4",label:"line color",hint:"line color"},vertexColors:{label:"vertex colors",hint:"vertex colors",value:null===(gt=JSON.parse(localStorage.getItem("trajectory.vertexColors")))||void 0===gt||gt}},Tt=function(e){return e.camera},Et=(0,a.memo)((function(e){var t=e.items,r=e.store,i=(0,u.Ky)(Tt),l=(0,a.useContext)(f),c=(0,s.M4)("trajectory",Nt,{store:r},[]),p=c.showCamera,m=c.lineColor,d=c.pointColor,h=c.pointSize,v=c.cameraFollow,g=c.vertexColors,x=(0,a.useRef)();(0,a.useEffect)((function(){var e,t;v?null===(e=x.current)||void 0===e||e.call(x):null===(t=l.current)||void 0===t||t.reset()}),[v]);var y=(0,a.useCallback)((function(e,t){x.current=function(){var r,n,a;(r=i.position).set.apply(r,(0,o.Z)(e)),(n=i.rotation).set.apply(n,(0,o.Z)(t)),null===(a=l.current)||void 0===a||a.update()},v&&x.current()}),[v]);return(0,n.jsx)(n.Fragment,{children:t.map((function(e,t){return(0,n.jsx)(T,{url:e.url,showCamera:p,visible:e.visible,lineColor:m,pointSize:h,pointColor:d,defaultColor:e.color,vertexColors:g,onLoad:0===t?y:void 0},t)}))})})),Gt={lineWidth:{label:"line width",hint:"line width",value:null!==(xt=JSON.parse(localStorage.getItem("line.lineWidth")))&&void 0!==xt?xt:1,min:1,max:10,step:.1},vertexColors:{label:"vertex colors",hint:"vertex colors",value:null===(yt=JSON.parse(localStorage.getItem("line.vertexColors")))||void 0===yt||yt}},It=(0,a.memo)((function(e){var t=e.items,r=e.store,o=(0,s.M4)("line",Gt,{store:r},[]),i=o.lineWidth,a=o.vertexColors;return(0,n.jsx)("group",{children:t.map((function(e,t){return(0,n.jsx)(ie,{name:e.name,url:e.url,defaultColor:e.color,visible:e.visible,lineWidth:i,vertexColors:a},t)}))})})),zt={radius:{label:"radius",hint:"radius",value:null!==(St=JSON.parse(localStorage.getItem("polargrid.radius")))&&void 0!==St?St:100,min:1,max:200,step:10},radials:{label:"radials",hint:"radials",value:null!==(bt=JSON.parse(localStorage.getItem("polargrid.radials")))&&void 0!==bt?bt:16,min:1,max:100,step:5},circles:{label:"circles",hint:"circles",value:null!==(wt=JSON.parse(localStorage.getItem("polargrid.circles")))&&void 0!==wt?wt:10,min:0,max:100,step:1},divisions:{label:"divisions",hint:"divisions",value:null!==(jt=JSON.parse(localStorage.getItem("polargrid.divisions")))&&void 0!==jt?jt:100,min:0,max:100,step:20}},kt=(0,a.memo)((function(e){var t=e.items,r=e.store,o=(0,s.M4)("PolarGrid",zt,{store:r},[]),i=o.radius,a=o.radials,u=o.circles,l=o.divisions;return(0,n.jsx)("group",{children:t.map((function(e,t){return(0,n.jsx)(_t,{url:e.url,radius:i,radials:a,circles:u,divisions:l,color1:4473924,color2:8947848},t)}))})})),Zt={vertexColors:{label:"vertex colors",hint:"vertex colors",value:null===(Ot=JSON.parse(localStorage.getItem("voxel.vertexColors")))||void 0===Ot||Ot}},Jt=(0,a.memo)((function(e){var t=e.items,r=e.store,o=(0,s.M4)("voxel",Zt,{store:r},[]).vertexColors;return(0,n.jsx)("group",{children:t.map((function(e,t){return(0,n.jsx)(Ke,{name:e.name,url:e.url,visible:e.visible,defaultColor:e.color,vertexColors:o},t)}))})})),Vt={sphereColors:{label:"sphere colors",hint:"sphere colors",value:null===(Ct=JSON.parse(localStorage.getItem("sphere.sphereColors")))||void 0===Ct||Ct}},Ut=(0,a.memo)((function(e){var t=e.items,r=e.store,o=(0,s.M4)("sphere",Vt,{store:r},[]).sphereColors;return(0,n.jsx)("group",{children:t.map((function(e,t){return(0,n.jsx)(Ye,{url:e.url,defaultColor:e.color,visible:e.visible,sphereColors:o},t)}))})})),Wt=function(e){return e.gl},Ht=(0,a.memo)((function(e){var t=e.meshes,r=e.pointClouds,o=e.dofBoxes,i=e.dofBoxes_infer,l=e.dofBoxes_post,p=e.dofBoxes_surround,m=e.dofBoxes_final,d=e.dofBoxes_onsemi_obstacle_infer,h=e.dofBoxes_narrow_infer,v=e.dofBoxes_narrow_post,g=e.dofBoxes_lidar,x=e.cameraPoses,y=e.lines,S=e.velocity,w=e.lane,j=e.voxels,O=e.spheres,C=(e.planes,e.polargrid),_=e.store,A=(0,u.Ky)(Wt),P=(0,a.useRef)(),M=(0,s.M4)({worldAxes:{label:"world axes",hint:"world axes",value:!0},background:{label:"background",hint:"background",value:JSON.parse(localStorage.getItem("background"))||k.r.palette.white},"back to initial view (B)":(0,s.LI)((function(){var e;return null===(e=P.current)||void 0===e?void 0:e.reset()}))},{store:_},[]),B=M.worldAxes,F=M.background;return(0,a.useEffect)((function(){A.domElement.style.background=F}),[A,F]),(0,c.y)("b",(function(){var e;return null===(e=P.current)||void 0===e?void 0:e.reset()}),[]),(0,c.y)("z",(function(e){"keydown"==e.type&&(P.current.zoomSpeed=.2),"keyup"==e.type&&(P.current.zoomSpeed=1.2)}),{keydown:!0,keyup:!0},[]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("ambientLight",{intensity:.5}),(0,n.jsx)("axesHelper",{visible:B,args:[10]}),(0,n.jsx)(b,{ref:P,staticMoving:!0,dynamicDampingFactor:.3,rotateSpeed:.75,zoomSpeed:1.2,panSpeed:2}),(0,n.jsxs)(f.Provider,{value:P,children:[t&&0!=t.length&&(0,n.jsx)(Mt,{items:t,store:_}),r&&0!=r.length&&(0,n.jsx)(Rt,{items:r,store:_}),o&&0!=o.length&&(0,n.jsx)(Lt,{items:o,store:_}),i&&0!=i.length&&(0,n.jsx)(Lt,{items:i,store:_}),l&&0!=l.length&&(0,n.jsx)(Lt,{items:l,store:_}),p&&0!=p.length&&(0,n.jsx)(Lt,{items:p,store:_}),m&&0!=m.length&&(0,n.jsx)(Lt,{items:m,store:_}),d&&0!=d.length&&(0,n.jsx)(Lt,{items:d,store:_}),h&&0!=h.length&&(0,n.jsx)(Lt,{items:h,store:_}),v&&0!=v.length&&(0,n.jsx)(Lt,{items:v,store:_}),g&&0!=g.length&&(0,n.jsx)(Lt,{items:g,store:_}),x&&0!=x.length&&(0,n.jsx)(Et,{items:x,store:_}),y&&0!=y.length&&(0,n.jsx)(It,{items:y,store:_}),S&&0!=S.length&&(0,n.jsx)(It,{items:S,store:_}),w&&0!=w.length&&(0,n.jsx)(It,{items:w,store:_}),j&&0!=j.length&&(0,n.jsx)(Jt,{items:j,store:_}),O&&0!=O.length&&(0,n.jsx)(Ut,{items:O,store:_}),C&&0!=C.length&&(0,n.jsx)(kt,{items:C,store:_})]})]})})),qt=Ht},1352:function(e,t,r){"use strict";r.r(t),r.d(t,{WebGLRenderer:function(){return n.C},Scene:function(){return o.x},Sprite:function(){return i.j},Mesh:function(){return a.K},LineSegments:function(){return u.e},Line:function(){return l.x},Points:function(){return c.w},Group:function(){return s.Z},Texture:function(){return f.x},WireframeGeometry:function(){return p.U},SphereBufferGeometry:function(){return m.A},SphereGeometry:function(){return m.x},PlaneBufferGeometry:function(){return d.B},PlaneGeometry:function(){return d._},EdgesGeometry:function(){return h.T},BoxBufferGeometry:function(){return v.n},BoxGeometry:function(){return v.D},SpriteMaterial:function(){return g.x},ShaderMaterial:function(){return x.j},PointsMaterial:function(){return y.U},MeshStandardMaterial:function(){return S.W},MeshPhongMaterial:function(){return b.x},MeshNormalMaterial:function(){return w.R},MeshBasicMaterial:function(){return j.v},LineBasicMaterial:function(){return O.n},Material:function(){return C.F},DefaultLoadingManager:function(){return _.t},LoadingManager:function(){return _.l},FileLoader:function(){return A.h},Loader:function(){return P.a},LoaderUtils:function(){return M.Z},PointLight:function(){return B.c},DirectionalLight:function(){return F.O},AmbientLight:function(){return R.M},PerspectiveCamera:function(){return D.c},OrthographicCamera:function(){return L.i},Camera:function(){return N.V},InstancedBufferGeometry:function(){return T.L},BufferGeometry:function(){return E.u},InterleavedBufferAttribute:function(){return G.k},InstancedInterleavedBuffer:function(){return I.$},InterleavedBuffer:function(){return z.v},BufferAttribute:function(){return k.Tl},Float16BufferAttribute:function(){return k.e6},Float32BufferAttribute:function(){return k.a$},Float64BufferAttribute:function(){return k.OM},Int16BufferAttribute:function(){return k.aV},Int32BufferAttribute:function(){return k.j8},Int8BufferAttribute:function(){return k.RN},Uint16BufferAttribute:function(){return k.ql},Uint32BufferAttribute:function(){return k.lC},Uint8BufferAttribute:function(){return k.WT},Uint8ClampedBufferAttribute:function(){return k.rA},Object3D:function(){return Z.T},Raycaster:function(){return J.i},Layers:function(){return V.S},EventDispatcher:function(){return U.p},Clock:function(){return W.S},MathUtils:function(){return H},Spherical:function(){return q.$},Plane:function(){return K.J},Sphere:function(){return Y.a},Ray:function(){return $.z},Matrix4:function(){return X.y},Matrix3:function(){return Q.V},Box3:function(){return ee.Z},Line3:function(){return te.Z},Euler:function(){return re.U},Vector4:function(){return ne.L},Vector3:function(){return oe.P},Vector2:function(){return ie.F},Quaternion:function(){return ae._},Color:function(){return ue.I},GridHelper:function(){return le.V},PolarGridHelper:function(){return ce.a},CameraHelper:function(){return se.R},PlaneHelper:function(){return fe.t},AxesHelper:function(){return pe.y},ShaderLib:function(){return me.V},UniformsLib:function(){return de.r},UniformsUtils:function(){return he.rD},ACESFilmicToneMapping:function(){return ve.LY2},AddEquation:function(){return ve.bGH},AddOperation:function(){return ve.NDo},AdditiveAnimationBlendMode:function(){return ve.gSk},AdditiveBlending:function(){return ve.WMw},AlphaFormat:function(){return ve.OTo},AlwaysDepth:function(){return ve.Se2},AlwaysStencilFunc:function(){return ve.cum},BackSide:function(){return ve._Li},BasicDepthPacking:function(){return ve.z81},BasicShadowMap:function(){return ve._MY},ByteType:function(){return ve.T95},CineonToneMapping:function(){return ve.YGz},ClampToEdgeWrapping:function(){return ve.uWy},CubeReflectionMapping:function(){return ve.fY$},CubeRefractionMapping:function(){return ve.vxC},CubeUVReflectionMapping:function(){return ve.g8_},CubeUVRefractionMapping:function(){return ve.SVc},CullFaceBack:function(){return ve.tm_},CullFaceFront:function(){return ve.S2y},CullFaceFrontBack:function(){return ve.B02},CullFaceNone:function(){return ve.PeU},CustomBlending:function(){return ve.Xaj},CustomToneMapping:function(){return ve.dZ3},DecrementStencilOp:function(){return ve.jfJ},DecrementWrapStencilOp:function(){return ve.T_J},DepthFormat:function(){return ve.qkB},DepthStencilFormat:function(){return ve.brP},DoubleSide:function(){return ve.ehD},DstAlphaFactor:function(){return ve.fSK},DstColorFactor:function(){return ve.Vdb},DynamicCopyUsage:function(){return ve.l8J},DynamicDrawUsage:function(){return ve.dj0},DynamicReadUsage:function(){return ve.QM0},EqualDepth:function(){return ve.eD},EqualStencilFunc:function(){return ve.jwo},EquirectangularReflectionMapping:function(){return ve.dSO},EquirectangularRefractionMapping:function(){return ve.Bf4},FlatShading:function(){return ve.esl},FloatType:function(){return ve.VzW},FrontSide:function(){return ve.Wl3},GLSL1:function(){return ve.v9Y},GLSL3:function(){return ve.LSk},GammaEncoding:function(){return ve.pMV},GreaterDepth:function(){return ve.w$m},GreaterEqualDepth:function(){return ve.ksN},GreaterEqualStencilFunc:function(){return ve.j4z},GreaterStencilFunc:function(){return ve.OAl},HalfFloatType:function(){return ve.cLu},IncrementStencilOp:function(){return ve.ZRs},IncrementWrapStencilOp:function(){return ve.oqc},IntType:function(){return ve.Kz5},InterpolateDiscrete:function(){return ve.Syv},InterpolateLinear:function(){return ve.NMF},InterpolateSmooth:function(){return ve.pIN},InvertStencilOp:function(){return ve.eMJ},KeepStencilOp:function(){return ve.x5V},LessDepth:function(){return ve.Zr5},LessEqualDepth:function(){return ve.vCF},LessEqualStencilFunc:function(){return ve.yt0},LessStencilFunc:function(){return ve.uXU},LinearEncoding:function(){return ve.rnI},LinearFilter:function(){return ve.wem},LinearMipMapLinearFilter:function(){return ve.FDw},LinearMipMapNearestFilter:function(){return ve.lRj},LinearMipmapLinearFilter:function(){return ve.D1R},LinearMipmapNearestFilter:function(){return ve.qyh},LinearToneMapping:function(){return ve.EoG},LogLuvEncoding:function(){return ve.M6c},LoopOnce:function(){return ve.jAl},LoopPingPong:function(){return ve.uEv},LoopRepeat:function(){return ve.YKA},LuminanceAlphaFormat:function(){return ve.cRx},LuminanceFormat:function(){return ve.Y8D},MOUSE:function(){return ve.RsA},MaxEquation:function(){return ve.Sm8},MinEquation:function(){return ve.r_},MirroredRepeatWrapping:function(){return ve.OoA},MixOperation:function(){return ve.qhX},MultiplyBlending:function(){return ve.M5h},MultiplyOperation:function(){return ve.Ns1},NearestFilter:function(){return ve.TyD},NearestMipMapLinearFilter:function(){return ve.vZf},NearestMipMapNearestFilter:function(){return ve.HTd},NearestMipmapLinearFilter:function(){return ve.aH4},NearestMipmapNearestFilter:function(){return ve.YLQ},NeverDepth:function(){return ve.BVF},NeverStencilFunc:function(){return ve.MyG},NoBlending:function(){return ve.jFi},NoToneMapping:function(){return ve.uL9},NormalAnimationBlendMode:function(){return ve.IFH},NormalBlending:function(){return ve.bdR},NotEqualDepth:function(){return ve.M6v},NotEqualStencilFunc:function(){return ve.RvT},ObjectSpaceNormalMap:function(){return ve.PA7},OneFactor:function(){return ve.ghN},OneMinusDstAlphaFactor:function(){return ve.Hy8},OneMinusDstColorFactor:function(){return ve.Wpd},OneMinusSrcAlphaFactor:function(){return ve.LgZ},OneMinusSrcColorFactor:function(){return ve.iWC},PCFShadowMap:function(){return ve._iA},PCFSoftShadowMap:function(){return ve.ntZ},REVISION:function(){return ve.UZH},RGBADepthPacking:function(){return ve.mSO},RGBAFormat:function(){return ve.wk1},RGBAIntegerFormat:function(){return ve.E2K},RGBA_ASTC_10x10_Format:function(){return ve.FUD},RGBA_ASTC_10x5_Format:function(){return ve.pKu},RGBA_ASTC_10x6_Format:function(){return ve.GG6},RGBA_ASTC_10x8_Format:function(){return ve.Gih},RGBA_ASTC_12x10_Format:function(){return ve.iiP},RGBA_ASTC_12x12_Format:function(){return ve.SvJ},RGBA_ASTC_4x4_Format:function(){return ve.ptH},RGBA_ASTC_5x4_Format:function(){return ve.jZA},RGBA_ASTC_5x5_Format:function(){return ve.y2t},RGBA_ASTC_6x5_Format:function(){return ve.gi4},RGBA_ASTC_6x6_Format:function(){return ve.Djp},RGBA_ASTC_8x5_Format:function(){return ve.BG$},RGBA_ASTC_8x6_Format:function(){return ve.NYV},RGBA_ASTC_8x8_Format:function(){return ve.xJs},RGBA_BPTC_Format:function(){return ve.bsb},RGBA_ETC2_EAC_Format:function(){return ve.ekQ},RGBA_PVRTC_2BPPV1_Format:function(){return ve.CaW},RGBA_PVRTC_4BPPV1_Format:function(){return ve.eaV},RGBA_S3TC_DXT1_Format:function(){return ve.BFQ},RGBA_S3TC_DXT3_Format:function(){return ve.v3W},RGBA_S3TC_DXT5_Format:function(){return ve.ILR},RGBDEncoding:function(){return ve.gMp},RGBEEncoding:function(){return ve.KC9},RGBEFormat:function(){return ve.aoB},RGBFormat:function(){return ve.UCm},RGBIntegerFormat:function(){return ve.F5G},RGBM16Encoding:function(){return ve.Inb},RGBM7Encoding:function(){return ve.LgE},RGB_ETC1_Format:function(){return ve.fto},RGB_ETC2_Format:function(){return ve.l0P},RGB_PVRTC_2BPPV1_Format:function(){return ve.vCx},RGB_PVRTC_4BPPV1_Format:function(){return ve._AM},RGB_S3TC_DXT1_Format:function(){return ve.wuA},RGFormat:function(){return ve.av9},RGIntegerFormat:function(){return ve.CtA},RedFormat:function(){return ve.hEm},RedIntegerFormat:function(){return ve.D9w},ReinhardToneMapping:function(){return ve.CdI},RepeatWrapping:function(){return ve.rpg},ReplaceStencilOp:function(){return ve.ce8},ReverseSubtractEquation:function(){return ve.rOj},SRGB8_ALPHA8_ASTC_10x10_Format:function(){return ve.Yjz},SRGB8_ALPHA8_ASTC_10x5_Format:function(){return ve.Wso},SRGB8_ALPHA8_ASTC_10x6_Format:function(){return ve.p1$},SRGB8_ALPHA8_ASTC_10x8_Format:function(){return ve.I0h},SRGB8_ALPHA8_ASTC_12x10_Format:function(){return ve.ePn},SRGB8_ALPHA8_ASTC_12x12_Format:function(){return ve.HBG},SRGB8_ALPHA8_ASTC_4x4_Format:function(){return ve.APR},SRGB8_ALPHA8_ASTC_5x4_Format:function(){return ve.Abz},SRGB8_ALPHA8_ASTC_5x5_Format:function(){return ve.v6B},SRGB8_ALPHA8_ASTC_6x5_Format:function(){return ve.pnl},SRGB8_ALPHA8_ASTC_6x6_Format:function(){return ve.OS$},SRGB8_ALPHA8_ASTC_8x5_Format:function(){return ve._wO},SRGB8_ALPHA8_ASTC_8x6_Format:function(){return ve.bcs},SRGB8_ALPHA8_ASTC_8x8_Format:function(){return ve.Y5S},ShortType:function(){return ve.iAb},SmoothShading:function(){return ve.wcA},SrcAlphaFactor:function(){return ve.k74},SrcAlphaSaturateFactor:function(){return ve.RlZ},SrcColorFactor:function(){return ve.KhW},StaticCopyUsage:function(){return ve.HgB},StaticDrawUsage:function(){return ve.W2J},StaticReadUsage:function(){return ve.JWc},StreamCopyUsage:function(){return ve.Z6B},StreamDrawUsage:function(){return ve.QZ1},StreamReadUsage:function(){return ve.Ir4},SubtractEquation:function(){return ve.Wbm},SubtractiveBlending:function(){return ve.N4l},TOUCH:function(){return ve.QmN},TangentSpaceNormalMap:function(){return ve.IOt},TriangleFanDrawMode:function(){return ve.z$h},TriangleStripDrawMode:function(){return ve.UlW},TrianglesDrawMode:function(){return ve.WwZ},UVMapping:function(){return ve.xfE},UnsignedByteType:function(){return ve.ywz},UnsignedInt248Type:function(){return ve.wJv},UnsignedIntType:function(){return ve.JQ4},UnsignedShort4444Type:function(){return ve.k0A},UnsignedShort5551Type:function(){return ve.irR},UnsignedShort565Type:function(){return ve.XNv},UnsignedShortType:function(){return ve.LsT},VSMShadowMap:function(){return ve.dwk},WrapAroundEnding:function(){return ve._sL},ZeroCurvatureEnding:function(){return ve.Pnf},ZeroFactor:function(){return ve.c8b},ZeroSlopeEnding:function(){return ve._lf},ZeroStencilOp:function(){return ve.ad5},sRGBEncoding:function(){return ve.knz}});var n=r(1503),o=r(7365),i=r(3494),a=r(6454),u=r(5920),l=r(1301),c=r(2306),s=r(2010),f=r(3977),p=r(7714),m=r(2785),d=r(4078),h=r(1516),v=r(6724),g=r(7122),x=r(4595),y=r(6679),S=r(3914),b=r(461),w=r(7091),j=r(6173),O=r(5785),C=r(4164),_=r(9833),A=r(2266),P=r(2319),M=r(4948),B=r(8490),F=r(1514),R=r(1507),D=r(1051),L=r(3131),N=r(1929),T=r(6256),E=r(9046),G=r(1145),I=r(1577),z=r(2133),k=r(140),Z=r(3320),J=r(1557),V=r(8204),U=r(7406),W=r(941),H=r(2043),q=r(6214),K=r(1158),Y=r(4699),$=r(7540),X=r(9203),Q=r(1273),ee=r(1898),te=r(1089),re=r(2903),ne=r(223),oe=r(6881),ie=r(1138),ae=r(7092),ue=r(3662),le=r(9988),ce=r(2536),se=r(3600),fe=r(8820),pe=r(9647),me=r(5967),de=r(9686),he=r(6682),ve=r(1661)}}]);