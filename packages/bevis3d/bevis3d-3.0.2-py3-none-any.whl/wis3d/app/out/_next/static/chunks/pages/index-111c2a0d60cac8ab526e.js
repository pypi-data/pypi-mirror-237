(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{4584:function(e,n,t){"use strict";t.d(n,{l:function(){return _}});var r=t(5893),o=t(8347),i=t(6265),s=t(7294),a=t(3935),l=t(1090),c=t(2525),u=t(5076),d=t(4751),f=t(5975),p=t(229),h=t(3234);function b(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function x(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?b(Object(t),!0).forEach((function(n){(0,i.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):b(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var v=function(){},m=(0,c.ZC)({wrapper:{boxShadow:h.r.effects.elevation8,border:"1px solid ".concat(h.r.palette.neutralLight),background:"white",display:"flex !important",flexDirection:"column"},main:{flex:1,overflow:"hidden",cursor:"default"}}),y={root:{background:"white",paddingLeft:h.r.spacing.m,cursor:"move",borderBottom:"1px solid ".concat(h.r.palette.neutralLighter)}},g={root:x(x({},y.root),{},{width:"fit-content"})},j={root:{paddingRight:0}},w={width:"auto",height:"auto"},_=(0,s.memo)((function(e){var n,t,i,c,h=e.children,b=e.title,_=void 0===b?" ":b,C=e.docker,k=e.onClose,O=e.default,S=e.style,P=(e.width,(0,o.Z)(e,["children","title","docker","onClose","default","style","width"])),D=(0,s.useRef)(),R=(0,p.M)(),z=(0,s.useState)({x:null!==(n=null===O||void 0===O?void 0:O.x)&&void 0!==n?n:0,y:null!==(t=null===O||void 0===O?void 0:O.y)&&void 0!==t?t:0}),E=z[0],I=z[1],N=(0,s.useState)({width:null!==(i=null===O||void 0===O?void 0:O.width)&&void 0!==i?i:"auto",height:null!==(c=null===O||void 0===O?void 0:O.height)&&void 0!==c?c:"auto"}),B=N[0],A=N[1],T=(0,s.useRef)(E),L=(0,s.useState)(!1),V=L[0],M=L[1],q=(0,s.useState)(!1),K=q[0],Z=q[1],W=(0,s.useState)(!1),U=W[0],G=W[1],H=(0,s.useState)(),X=H[0],F=H[1],J=(0,s.useState)(S),$=J[0],Q=J[1],Y=(0,s.useCallback)((function(){return M((function(e){return!e}))}),[]),ee=(0,s.useCallback)((function(){return Z((function(e){return!e}))}),[]);(0,s.useLayoutEffect)((function(){var e=document.getElementById(R);F(e.clientWidth+104),G(!0)}),[]),(0,s.useLayoutEffect)((function(){I(V?function(e){return T.current=e,{x:0,y:0}}:T.current)}),[V]),(0,s.useLayoutEffect)((function(){Q(V?x(x({},S),{},{position:"static",transform:"translate(0,0)"}):S)}),[V,S]);var ne=(0,s.useCallback)((function(e,n){return I(n)}),[I]),te=(0,s.useCallback)((function(e,n,t,r,o){A({width:t.clientWidth,height:"auto"}),I(o)}),[]),re=(0,s.useMemo)((function(){var e=[];return C&&e.push({key:"minimize",iconOnly:!0,iconProps:{iconName:V?"ChromeRestore":"ChromeMinimize"},onClick:Y}),e.push({key:"collapse",disabled:V,iconOnly:!0,iconProps:{iconName:K?"ChevronDownMed":"ChevronUpMed"},onClick:ee}),k&&e.push({id:_,key:"close",iconOnly:!0,iconProps:{iconName:"ChromeClose"},onClick:k}),e}),[C,V,K,_,k]),oe=(0,r.jsxs)(l.s,x(x({ref:D,className:m.wrapper,lockAspectRatio:!0,bounds:"parent",dragHandleClassName:"rnd-titlebar",minWidth:X,size:V?w:B,position:E,onDragStop:ne,onResizeStop:te,dragAxis:V?"x":"both",style:$},P),{},{children:[(0,r.jsxs)(u.K,{id:R,className:"rnd-titlebar",horizontal:!0,verticalAlign:"center",horizontalAlign:U?"space-between":void 0,styles:U?y:g,children:[(0,r.jsx)(d.x,{variant:"large",children:_}),(0,r.jsx)(f.X,{items:re,styles:j,onReduceData:v})]}),U&&(0,r.jsx)("div",{className:m.main,children:K||V||h})]}));return V&&C?(0,a.createPortal)(oe,C):oe}))},1229:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return Ue}});var r=t(5893),o=t(4121),i=t(6265),s=t(7294),a=t(5152),l=t(1163),c=t(5076),u=t(4751),d=t(19),f=t(2525),p=t(5554),h=t(4839),b=t(3234),x=t(9741),v=t(9236),m=t(3950),y=t(2927),g={padding:b.r.spacing.s1},j={iconName:"ChevronRight"},w={iconName:"ChevronLeft"},_={field:{width:48,textAlign:"center",outline:"none",borderRadius:2,MozAppearance:"textfield","::-webkit-outer-spin-button, ::-webkit-inner-spin-button":{WebkitAppearance:"none"}}},C={root:{paddingLeft:b.r.spacing.s1,paddingRight:b.r.spacing.s1}},k=(0,s.memo)((function(e){var n=e.min,t=e.max,o=e.value,i=e.onChange,a=(0,s.useState)(o),l=a[0],d=a[1],f=(0,s.useState)(o.toString()),p=f[0],h=f[1];(0,s.useEffect)((function(){d(o),h(o.toString())}),[o]);var b=(0,s.useCallback)((function(e,n){h(n)}),[]),k=(0,s.useCallback)((function(e){if("enter"===e.key.toLowerCase()){var n=e.currentTarget,t=Number(e.currentTarget.value),r=Number(n.min),o=Number(n.max);i(t<r?r:t>o?o:t)}}),[i]),O=(0,s.useCallback)((function(e){return d(e)}),[]),S=(0,s.useCallback)((function(e){return d((function(e){return i(e),e}))}),[i]),P=(0,s.useCallback)((function(){return i&&i(o-1)}),[i,o]),D=(0,s.useCallback)((function(){return i&&i(o+1)}),[i,o]);return(0,r.jsxs)(c.K,{grow:!0,horizontal:!0,disableShrink:!0,tokens:g,children:[(0,r.jsx)(x.v,{grow:1,children:(0,r.jsx)(v.i,{showValue:!1,min:n,max:t,value:l,onChange:O,onChanged:S})}),(0,r.jsxs)(c.K,{horizontal:!0,verticalAlign:"center",children:[(0,r.jsx)(m.h,{iconProps:w,disabled:n===o,onClick:P}),(0,r.jsx)(y.n,{styles:_,min:n,max:t,value:p,onChange:b,onKeyDown:k}),(0,r.jsx)(u.x,{variant:"large",styles:C,children:" / ".concat(t)}),(0,r.jsx)(m.h,{iconProps:j,disabled:t===o,onClick:D})]})]})})),O=t(2708),S=t(4671),P=t(8597),D=t(8172);function R(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function z(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?R(Object(t),!0).forEach((function(n){(0,i.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):R(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function E(e,n){var t;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(t=function(e,n){if(!e)return;if("string"===typeof e)return I(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return I(e,n)}(e))||n&&e&&"number"===typeof e.length){t&&(e=t);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,a=!1;return{s:function(){t=e[Symbol.iterator]()},n:function(){var e=t.next();return s=e.done,e},e:function(e){a=!0,i=e},f:function(){try{s||null==t.return||t.return()}finally{if(a)throw i}}}}function I(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}(0,D.MD)();var N,B=(0,S.Z)((0,P.$e)({objDict:{}},(N=function(e){return{set:e,loadObjects:function(n,t,r){e((function(e){var o={};for(var i in n)o[i]=n[i].map((function(e){var n=(0,O.UO)(e);return{path:e,url:"".concat(t,"/file?path=").concat(encodeURIComponent(e)),name:n,visible:!0,select:!1,color:(0,O.Lq)(n),preserved:!1}}));for(var s in e.objDict){var a,l=o[s]=o[s]||[],c=E(e.objDict[s]);try{var u=function(){var e=a.value,n=l.findIndex((function(n){return n.name===e.name}));-1===n?r&&l.unshift(z(z({},e),{},{preserved:!0})):l[n].visible=e.visible};for(c.s();!(a=c.n()).done;)u()}catch(d){c.e(d)}finally{c.f()}}e.objDict=o}))}}},function(e,n,t){return N((function(n){return e((0,D.ZP)(n))}),n,t)}))),A=B.getState(),T=function(e){return e.objDict},L=t(6233),V=t(2174),M=t(2871),q=t(6160),K=t(1955);function Z(e,n){var t;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(t=function(e,n){if(!e)return;if("string"===typeof e)return W(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return W(e,n)}(e))||n&&e&&"number"===typeof e.length){t&&(e=t);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,a=!1;return{s:function(){t=e[Symbol.iterator]()},n:function(){var e=t.next();return s=e.done,e},e:function(e){a=!0,i=e},f:function(){try{s||null==t.return||t.return()}finally{if(a)throw i}}}}function W(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}var U={root:{padding:b.r.spacing.s1,height:"100%"}},G={root:{overflow:"auto"}},H=(0,L.NF)((function(e,n){return{root:{padding:b.r.spacing.s2},checkbox:{background:n?e:"white",borderColor:e,borderWidth:2}}})),X=(0,L.NF)((function(e){return{root:{padding:b.r.spacing.s2},checkbox:{background:e?"grey":"white",borderColor:"grey",borderWidth:2}}})),F=!1,J=new Set,$=new Map,Q=function(e){var n=(0,f.ZC)({input:{width:"20px",height:"20px",display:"none"},label:{"&::before":{content:'""',display:"inline-block",verticalAlign:"middle",width:"20px",height:"20px",borderRadius:"50%",border:"2px solid ".concat(e.color),boxSizing:"border-box",marginRight:"".concat(b.r.spacing.s1)}},labelAfter:{"&::before":{backgroundColor:"".concat(e.color),backgroundClip:"content-box",padding:"3px"}}}),t=e.type+e.index;return(0,r.jsxs)("div",{children:[(0,r.jsx)("input",{checked:e.select,type:"radio",name:"group",className:n.input,id:t,onChange:function(n){F=!0,A.set((function(n){for(var t in n.objDict){var r,i=Z(n.objDict[t].entries());try{for(i.s();!(r=i.n()).done;){var s=(0,o.Z)(r.value,2),a=s[0],l=s[1];t==e.type&&a==e.index?(l.visible=!0,l.select=!0,J.add(t+a)):(l.visible=!1,l.select=!1,J.delete(t+a))}}catch(c){i.e(c)}finally{i.f()}}}))}}),(0,r.jsx)("label",{className:"".concat(n.label," ").concat(e.select?n.labelAfter:""),htmlFor:t})]})},Y=(0,f.y0)({display:"flex",alignItems:"center"}),ee=function(){var e=J.values().next().value,n=e.match(/\d+/g)[0];return[e.slice(0,-n.length),n]},ne=function(e){var n=e.label,t=e.type,o=(0,s.useState)(!0),i=o[0],a=o[1],l=B(T);$.set(t,1);return(0,s.useEffect)((function(){$.forEach((function(e,n){$.set(n,0)})),J.forEach((function(e){var n=e.match(/[a-z,_]+/g)[0];$.set(n,1)})),$.forEach((function(e,n){var t=document.getElementById("label"+n);t&&(0==e&&null!==t&&void 0!==t&&t.checked?t.click():1!=e||t.checked||t.click())}))}),[J.values()]),(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,r.jsx)(V._,{children:n}),(0,r.jsx)(M.X,{checked:i,styles:X(i),onChange:function(e,n){if(a(n),e.isTrusted)for(var r in l[t]){var o;if(l[t][r].visible!=n)null===(o=document.getElementById("checkbox-"+t+"-"+r))||void 0===o||o.click()}},id:"label"+t})]})},te=function(e){return function(n,t){var i=n.visible,s=n.select,a=n.color,l=n.name;i&&J.add(e+t);return(0,r.jsxs)("div",{className:Y,children:[(0,r.jsx)(M.X,{checked:i,styles:H(a,i),onChange:function(n,r){if(e=n.target.id.split("-")[1],t=n.target.id.split("-")[2],A.set((function(n){n.objDict[e][t].visible=r})),r?J.add(e+t):J.delete(e+t),0==J.size)A.set((function(n){n.objDict[e][t].select=!1})),F=!1;else if(1==J.size){var i=J.values().next().value;document.getElementById(i).click()}else if(F){var s=ee(),a=(0,o.Z)(s,2),l=a[0],c=a[1];A.set((function(e){e.objDict[l][c].select=!1})),F=!1}},id:"checkbox-"+e+"-"+t}),(0,r.jsx)(Q,{name:l,color:a,type:e,index:t,select:s}),(0,r.jsx)("label",{children:l})]})}},re=te("meshes"),oe=te("point_clouds"),ie=te("boxes"),se=te("boxes_infer"),ae=te("boxes_post"),le=te("boxes_final"),ce=te("boxes_surround"),ue=te("boxes_onsemi_obstacle_infer"),de=te("boxes_narrow_infer"),fe=te("boxes_narrow_post"),pe=te("boxes_lidar"),he=te("camera_trajectories"),be=te("lines"),xe=te("velocity"),ve=te("lane"),me=te("voxels"),ye=te("spheres"),ge=te("polargrid"),je=(0,s.memo)((function(e){var n=B(T),t=(0,s.useRef)(!0),i=e.frameIndex;(0,s.useEffect)((function(){J.clear()}),[i]);var a=(0,s.useCallback)((function(){if(t.current=!t.current,F){var e=ee(),n=(0,o.Z)(e,2),r=n[0],i=n[1];A.set((function(e){e.objDict[r][i].select=!1})),F=!1}A.set((function(e){for(var n in e.objDict){var r,i=Z(e.objDict[n].entries());try{for(i.s();!(r=i.n()).done;){var s=(0,o.Z)(r.value,2),a=s[0];s[1].visible=t.current,t.current?J.add(n+a):J.delete(n+a)}}catch(l){i.e(l)}finally{i.f()}}}))}),[]),l=function(e){return!(!n[e]||0==n[e].length)};return(0,r.jsxs)(c.K,{styles:U,children:[(0,r.jsxs)(x.v,{grow:!0,styles:G,children:[l("meshes")&&(0,r.jsxs)("div",{children:[(0,r.jsx)(ne,{label:"Mesh",type:"meshes"}),(0,r.jsx)(q.a,{items:n.meshes,onRenderCell:re,onShouldVirtualize:function(){return!1}})]}),l("point_clouds")&&(0,r.jsxs)("div",{children:[(0,r.jsx)(ne,{label:"Point Cloud",type:"point_clouds"}),(0,r.jsx)(q.a,{items:n.point_clouds,onRenderCell:oe,onShouldVirtualize:function(){return!1}})]}),l("boxes")&&(0,r.jsxs)("div",{children:[(0,r.jsx)(ne,{label:"Box",type:"boxes"}),(0,r.jsx)(q.a,{items:n.boxes,onRenderCell:ie,onShouldVirtualize:function(){return!1}})]}),l("boxes_infer")&&(0,r.jsxs)("div",{children:[(0,r.jsx)(ne,{label:"Box_infer",type:"boxes_infer"}),(0,r.jsx)(q.a,{items:n.boxes_infer,onRenderCell:se,onShouldVirtualize:function(){return!1}})]}),l("boxes_post")&&(0,r.jsxs)("div",{children:[(0,r.jsx)(ne,{label:"Box_post",type:"boxes_post"}),(0,r.jsx)(q.a,{items:n.boxes_post,onRenderCell:ae,onShouldVirtualize:function(){return!1}})]}),l("boxes_surround")&&(0,r.jsxs)("div",{children:[(0,r.jsx)(ne,{label:"Box_surround",type:"boxes_surround"}),(0,r.jsx)(q.a,{items:n.boxes_surround,onRenderCell:ce,onShouldVirtualize:function(){return!1}})]}),l("boxes_final")&&(0,r.jsxs)("div",{children:[(0,r.jsx)(ne,{label:"Box_final",type:"boxes_final"}),(0,r.jsx)(q.a,{items:n.boxes_final,onRenderCell:le,onShouldVirtualize:function(){return!1}})]}),l("boxes_onsemi_obstacle_infer")&&(0,r.jsxs)("div",{children:[(0,r.jsx)(ne,{label:"Box_onsemi_obstacle_infer",type:"boxes_onsemi_obstacle_infer"}),(0,r.jsx)(q.a,{items:n.boxes_onsemi_obstacle_infer,onRenderCell:ue,onShouldVirtualize:function(){return!1}})]}),l("boxes_narrow_infer")&&(0,r.jsxs)("div",{children:[(0,r.jsx)(ne,{label:"Box_narrow_infer",type:"boxes_narrow_infer"}),(0,r.jsx)(q.a,{items:n.boxes_narrow_infer,onRenderCell:de,onShouldVirtualize:function(){return!1}})]}),l("boxes_narrow_post")&&(0,r.jsxs)("div",{children:[(0,r.jsx)(ne,{label:"Box_narrow_post",type:"boxes_narrow_post"}),(0,r.jsx)(q.a,{items:n.boxes_narrow_post,onRenderCell:fe,onShouldVirtualize:function(){return!1}})]}),l("boxes_lidar")&&(0,r.jsxs)("div",{children:[(0,r.jsx)(ne,{label:"Box_lidar",type:"boxes_lidar"}),(0,r.jsx)(q.a,{items:n.boxes_lidar,onRenderCell:pe,onShouldVirtualize:function(){return!1}})]}),l("camera_trajectories")&&(0,r.jsxs)("div",{children:[(0,r.jsx)(ne,{label:"Camera Trajectory",type:"camera_trajectories"}),(0,r.jsx)(q.a,{items:n.camera_trajectories,onRenderCell:he,onShouldVirtualize:function(){return!1}})]}),l("lines")&&(0,r.jsxs)("div",{children:[(0,r.jsx)(ne,{label:"Line",type:"lines"}),(0,r.jsx)(q.a,{items:n.lines,onRenderCell:be,onShouldVirtualize:function(){return!1}})]}),l("velocity")&&(0,r.jsxs)("div",{children:[(0,r.jsx)(ne,{label:"Velocity",type:"velocity"}),(0,r.jsx)(q.a,{items:n.velocity,onRenderCell:xe,onShouldVirtualize:function(){return!1}})]}),l("lane")&&(0,r.jsxs)("div",{children:[(0,r.jsx)(ne,{label:"Lane",type:"lane"}),(0,r.jsx)(q.a,{items:n.lane,onRenderCell:ve,onShouldVirtualize:function(){return!1}})]}),l("voxels")&&(0,r.jsxs)("div",{children:[(0,r.jsx)(ne,{label:"Voxel",type:"voxels"}),(0,r.jsx)(q.a,{items:n.voxels,onRenderCell:me,onShouldVirtualize:function(){return!1}})]}),l("spheres")&&(0,r.jsxs)("div",{children:[(0,r.jsx)(ne,{label:"Sphere",type:"spheres"}),(0,r.jsx)(q.a,{items:n.spheres,onRenderCell:ye,onShouldVirtualize:function(){return!1}})]}),l("polargrid")&&(0,r.jsxs)("div",{children:[(0,r.jsx)(ne,{label:"PolarGrid",type:"polargrid"}),(0,r.jsx)(q.a,{items:n.polargrid,onRenderCell:ge,onShouldVirtualize:function(){return!1}})]})]}),(0,r.jsx)(K.a,{text:"Toggle All",onClick:a})]})})),we=t(4584),_e=t(423),Ce=t(5172);function ke(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Oe(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?ke(Object(t),!0).forEach((function(n){(0,i.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ke(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Se=(0,a.default)((function(){return t.e(862).then(t.bind(t,6862)).then((function(e){return e.Pivot}))}),{ssr:!1,loadableGenerated:{webpack:function(){return[6862]},modules:["index.tsx -> @fluentui/react/lib/Pivot"]}}),Pe=(0,a.default)((function(){return t.e(274).then(t.bind(t,8274))}),{ssr:!1,loadableGenerated:{webpack:function(){return[8274]},modules:["index.tsx -> @/components/react/play-button"]}}),De=(0,a.default)((function(){return Promise.all([t.e(351),t.e(978),t.e(347)]).then(t.bind(t,2168))}),{ssr:!1,loadableGenerated:{webpack:function(){return[2168]},modules:["index.tsx -> @/components/canvas/canvas"]}}),Re=(0,a.default)((function(){return Promise.all([t.e(351),t.e(978),t.e(72),t.e(206)]).then(t.bind(t,3395))}),{ssr:!1,loadableGenerated:{webpack:function(){return[3395]},modules:["index.tsx -> @/components/canvas/scene"]}}),ze=(0,a.default)((function(){return Promise.all([t.e(351),t.e(9),t.e(925)]).then(t.bind(t,6925))}),{ssr:!1,loadableGenerated:{webpack:function(){return[6925]},modules:["index.tsx -> @/components/canvas/correspondence"]}}),Ee={},Ie=function(e){var n=e.currentTarget;Ee.prevNode&&(Ee.prevNode.style.zIndex=Ee.prevNodeZIndex),Ee.prevNode=n,Ee.prevNodeZIndex=n.style.zIndex,n.style.zIndex="999"},Ne=(0,s.memo)((function(){var e,n,t=(0,l.useRouter)(),i=t.query.tab||"3d",a=t.query.sequence,f=(0,s.useState)(0),x=f[0],v=f[1],m=(0,h.WQ)(),y=(0,h.WQ)(),g=(0,_e.J6)("".concat("","/all_sequences"),"GET","json",[]),j=a||g[0],w=j&&"".concat("","/all_scenes_in_sequence?sequence=").concat(encodeURIComponent(j)),_=(0,_e.J6)(w,"GET","json",[],(function(e){var n,t=null===(n=e.currentTarget.response)||void 0===n?void 0:n.length;t&&x>=t&&v(t-1)}));(0,_e.J6)(_[x]&&"".concat("","/files_in_scene?scene_path=").concat(encodeURIComponent(_[x])),"GET","json",{},(function(e){m.get("preserveItems");var n=m.get("preserveItems");A.loadObjects(e.currentTarget.response,"",n)}));var C=B(T),O=(0,s.useRef)(),S=(0,s.useRef)(),P=(0,s.useRef)();(0,h.M4)({preserveItems:{label:"preserve items",hint:"preserve items",value:!1}},{store:m},[]),(0,s.useEffect)((function(){var e=function(){for(var e=m.getData(),n=y.getData(),r="2d"===t.query.tab?Oe(Oe({},e),n):Oe(Oe({},n),e),i=0,s=Object.entries(r);i<s.length;i++){var a=(0,o.Z)(s[i],2),l=a[0],c=a[1];"value"in c&&localStorage.setItem(l,JSON.stringify(c.value))}};return window.addEventListener("beforeunload",e),function(){window.removeEventListener("beforeunload",e)}}),[]);var D=(0,s.useCallback)((function(e){var n={pathname:"/",query:a?{tab:e.props.itemKey,sequence:a}:{tab:e.props.itemKey}};t.push(n,n,{shallow:!0})}),[a]),R=(0,s.useCallback)((function(){return v((function(e){return e+1}))}),[]),z=(0,s.useCallback)((function(e){var n={pathname:"/",query:{tab:i,sequence:e.value}};t.push(n,n,{shallow:!0})}),[i,j]),E=g.map((function(e){return{label:e,value:e}}));(0,Ce.y)("d",(function(){v((function(e){return e<_.length-1?e+1:e}))}),[_]),(0,Ce.y)("a",(function(){v((function(e){return e>0?e-1:e}))}),[_]),(0,Ce.y)("s",(function(){for(var e=0;e<g.length&&j!=g[e];e++);e<g.length-1&&e++;var n={pathname:"/",query:{tab:i,sequence:g[e]}};t.push(n,n,{shallow:!0})}),[g,j]),(0,Ce.y)("w",(function(){for(var e=0;e<g.length&&j!=g[e];e++);e>0&&e--;var n={pathname:"/",query:{tab:i,sequence:g[e]}};t.push(n,n,{shallow:!0})}),[g,j]),(0,Ce.y)("r",(function(){v((function(e){return(e-1+_.length)%_.length})),v((function(e){return(e+1)%_.length}))}),[_]),(0,Ce.y)("q",(function(){v((function(e){return 0}))}),[_]),(0,Ce.y)("e",(function(){v((function(e){return _.length-1}))}),[_]);var I=(0,s.useState)(0),N=I[0],L=I[1],V=(0,s.useState)(0),M=V[0],q=V[1];return(0,r.jsxs)(c.K,{styles:Ae,children:[(0,r.jsxs)(c.K,{styles:Te,horizontal:!0,children:[(0,r.jsx)(c.K,{styles:Le,children:(0,r.jsx)(u.x,{variant:"xLargePlus",children:"BEVis3D"})}),(0,r.jsxs)(Se,{selectedKey:i,onLinkClick:D,headersOnly:!0,className:We.pivot,children:[(0,r.jsx)(d.M,{headerText:"3D Objects",itemKey:"3d"}),(0,r.jsx)(d.M,{headerText:"Keypoint Correspondences",itemKey:"2d"})]}),(0,r.jsx)(p.ZP,{options:E,value:E.find((function(e){return e.value===j})),onChange:z,styles:{menu:function(e){return Oe(Oe({},e),{},{zIndex:9999,width:"max-content",height:"fit-content",minWidth:"100%",position:"absolute",right:0})}}})]}),(0,r.jsxs)(c.K,{horizontal:!0,grow:1,styles:Me,children:[(0,r.jsxs)(c.K,{disableShrink:!0,styles:Ve,children:["3d"==i&&(0,r.jsx)(je,{frameIndex:x}),"2d"==i&&(0,r.jsx)(h.MT,{store:y,fill:!0,flat:!0,hideCopyButton:!0,titleBar:!1,theme:b.R})]}),(0,r.jsxs)(c.K,{grow:1,reversed:!0,styles:Ke,children:[(0,r.jsxs)(c.K,{horizontal:!0,verticalAlign:"center",styles:qe,children:[(0,r.jsx)(Pe,{disabled:x===_.length-1,onUpdateFrame:R,store1:m,store2:y,currentStore:"3d"===i?m:y}),(0,r.jsx)(k,{min:0,max:_.length-1,value:x,onChange:v})]}),(0,r.jsxs)(c.K,{grow:1,disableShrink:!0,styles:Ze,children:["3d"===i&&(0,r.jsx)(De,{children:(0,r.jsx)(Re,{meshes:C.meshes,pointClouds:C.point_clouds,dofBoxes:C.boxes,dofBoxes_infer:C.boxes_infer,dofBoxes_post:C.boxes_post,dofBoxes_surround:C.boxes_surround,dofBoxes_final:C.boxes_final,dofBoxes_onsemi_obstacle_infer:C.boxes_onsemi_obstacle_infer,dofBoxes_narrow_infer:C.boxes_narrow_infer,dofBoxes_narrow_post:C.boxes_narrow_post,dofBoxes_lidar:C.boxes_lidar,cameraPoses:C.camera_trajectories,lines:C.lines,velocity:C.velocity,lane:C.lane,voxels:C.voxels,spheres:C.spheres,planes:C.planes,polargrid:C.polargrid,store:m})}),"2d"===i&&(null===(e=C.correspondences)||void 0===e?void 0:e[0])&&(0,r.jsx)(ze,Oe(Oe({},C.correspondences[0]),{},{store:y}))]}),"3d"===i&&(null===(n=C.images)||void 0===n?void 0:n.map((function(e){return(0,r.jsx)(we.l,{title:e.name,docker:O.current,default:Be,onMouseDown:Ie,children:(0,r.jsx)("img",{src:e.url,className:We.image})},e.name)})))]})]}),"3d"===i&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:We.controlsWrapper,ref:P,onMouseDown:function(){document.onmousemove=function(e){var n=P.current.firstChild;if(n.style.transform){var t=n.style.transform.split("(")[1].split(")")[0].split(","),r=parseInt(t[0])>0?0:parseInt(t[0]);r=r<-(document.body.offsetWidth-310)?-(document.body.offsetWidth-310):r;var o=parseInt(t[1])>-60?parseInt(t[1]):-60;o=o<document.body.offsetHeight-100?o:document.body.offsetHeight-100,n.style.transform="translate3d(".concat(r,"px, ").concat(o,"px, ").concat(t[2],")"),L(r),q(o)}}},onMouseUp:function(){document.onmousemove=null,P.current.firstChild.style.transform="translate3d(".concat(N,"px, ").concat(M,"px, 0px)")},children:(0,r.jsx)(h.MT,{store:m,flat:!0,hideCopyButton:!0,theme:b.R,hidden:"3d"!==i})}),(0,r.jsx)("div",{ref:O,className:We.imgDocker}),(0,r.jsx)("div",{id:"property-docker",ref:S,className:We.propertyDocker})]})]})})),Be={width:"25%"},Ae={root:{width:"100vw",height:"100vh",overflow:"hidden"}},Te={root:{padding:b.r.spacing.m,paddingBottom:0,borderBottom:"1px solid ".concat(b.r.palette.neutralLighter),justifyContent:"space-between"}},Le={root:{width:284}},Ve={root:{width:300,borderRight:"1px solid ".concat(b.r.palette.neutralLighter)}},Me={root:{overflow:"hidden"}},qe={root:{paddingLeft:b.r.spacing.s1,borderTop:"1px solid ".concat(b.r.palette.neutralLighter)}},Ke={root:{overflow:"hidden",position:"relative"}},Ze={root:{position:"relative"}},We=(0,f.ZC)({pivot:{flex:1},imgDocker:{position:"fixed",zIndex:100,left:0,bottom:0,display:"flex",flexDirection:"row",width:"fit-content"},image:{width:"100%",height:"auto"},propertyDocker:{position:"fixed",pointerEvents:"none",left:300,bottom:0,"&:not(:empty)":{minHeight:220}},controlsWrapper:{"&>div":{top:60,right:0,maxHeight:"calc(100vh - 110px)",overflowY:"auto",border:"1px solid ".concat(b.r.palette.neutralLighter),display:"flex !important",flexDirection:"column"}}}),Ue=Ne},423:function(e,n,t){"use strict";t.d(n,{U2:function(){return o},J6:function(){return i},Hn:function(){return a}});var r=t(7294);function o(e,n){var t=(0,r.useState)(),o=t[0],i=t[1];return(0,r.useEffect)((function(){(new e).load(n,(function(e){i(e)}))}),[n]),o}function i(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"text",o=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0,s=(0,r.useState)(o),a=s[0],l=s[1];return(0,r.useEffect)((function(){if(e){var r=new XMLHttpRequest;return r.responseType=t,r.addEventListener("load",(function(e){null===i||void 0===i||i(e),l(r.response)})),r.open(n,e),r.send(),function(){return r.abort()}}}),[e]),a}function s(e){return new Promise((function(n,t){var r=new window.Image;r.src=e,r.addEventListener("load",(function(){return n(r)})),r.addEventListener("error",t)}))}function a(e){var n=(0,r.useState)([]),t=n[0],o=n[1],i=(0,r.useState)(!1),a=i[0],l=i[1],c=Array.isArray(e),u=Array.isArray(e)?e:[e];return(0,r.useEffect)((function(){Promise.all(u.map(s)).then((function(e){o(e),l(!0)})).catch((function(){})),l(!1)}),u),[c?t:t[0],a]}},2708:function(e,n,t){"use strict";t.d(n,{UO:function(){return o},Lq:function(){return s},pe:function(){return a},ih:function(){return l},Od:function(){return c},sP:function(){return u}});var r=t(5893),o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=-1==e.lastIndexOf("/")?e.lastIndexOf("\\"):e.lastIndexOf("/"),t=e.substring(n+1);return t.substring(0,t.lastIndexOf("."))},i={},s=function(e){var n=i[e];return n||(n="#"+("00000"+(16777216*Math.random()<<0).toString(16)).substr(-6),i[e]=n),n};function a(e){for(var n=e;n;n=n.parent)if(!n.visible)return!1;return!0}function l(e){var n=[];for(var t in e)n.push((0,r.jsxs)("span",{children:[t,": ",e[t]]},t));return n}var c=function(e,n,t){return n<=e&&e<=t};function u(e,n,t,r){var o=e.scaleX(),i=(t.x-e.x())/o,s=(t.y-e.y())/o,a={x:t.x-i*n,y:t.y-s*n};e.position(a),r&&r.setValueAtPath("scale",n,!1)}},3234:function(e,n,t){"use strict";t.d(n,{r:function(){return r},R:function(){return o}});var r=(0,t(2525).gh)(),o={sizes:{rootWidth:"310px",controlWidth:"57%"},space:{sm:"3px"},colors:{elevation1:r.semanticColors.disabledBackground,elevation2:r.semanticColors.bodyBackground,elevation3:r.semanticColors.infoBackground,accent1:r.semanticColors.inputPlaceholderText,accent2:r.semanticColors.disabledSubtext,accent3:r.semanticColors.disabledText,highlight1:r.semanticColors.bodySubtext,highlight2:r.semanticColors.bodySubtext,highlight3:r.semanticColors.bodyText,toolTipText:r.semanticColors.bodyText}}},5301:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(1229)}])}},function(e){e.O(0,[774,331,888,179],(function(){return n=5301,e(e.s=n);var n}));var n=e.O();_N_E=n}]);