"use strict";(self.webpackChunk_JUPYTERLAB_CORE_OUTPUT=self.webpackChunk_JUPYTERLAB_CORE_OUTPUT||[]).push([[6731],{16731:(e,t,n)=>{n.r(t),n.d(t,{Application:()=>h});var i,r,s,o,l=n(28261),a=n(20998),u=n(35111);!function(e){function t(e,t,n=0,i=-1){let r,s=e.length;if(0===s)return-1;n=n<0?Math.max(0,n+s):Math.min(n,s-1),r=(i=i<0?Math.max(0,i+s):Math.min(i,s-1))<n?i+1+(s-n):i-n+1;for(let i=0;i<r;++i){let r=(n+i)%s;if(e[r]===t)return r}return-1}function n(e,t,n=-1,i=0){let r,s=e.length;if(0===s)return-1;r=(n=n<0?Math.max(0,n+s):Math.min(n,s-1))<(i=i<0?Math.max(0,i+s):Math.min(i,s-1))?n+1+(s-i):n-i+1;for(let i=0;i<r;++i){let r=(n-i+s)%s;if(e[r]===t)return r}return-1}function i(e,t,n=0,i=-1){let r,s=e.length;if(0===s)return-1;n=n<0?Math.max(0,n+s):Math.min(n,s-1),r=(i=i<0?Math.max(0,i+s):Math.min(i,s-1))<n?i+1+(s-n):i-n+1;for(let i=0;i<r;++i){let r=(n+i)%s;if(t(e[r],r))return r}return-1}function r(e,t,n=-1,i=0){let r,s=e.length;if(0===s)return-1;r=(n=n<0?Math.max(0,n+s):Math.min(n,s-1))<(i=i<0?Math.max(0,i+s):Math.min(i,s-1))?n+1+(s-i):n-i+1;for(let i=0;i<r;++i){let r=(n-i+s)%s;if(t(e[r],r))return r}return-1}function s(e,t=0,n=-1){let i=e.length;if(!(i<=1))for(t=t<0?Math.max(0,t+i):Math.min(t,i-1),n=n<0?Math.max(0,n+i):Math.min(n,i-1);t<n;){let i=e[t],r=e[n];e[t++]=r,e[n--]=i}}function o(e,t){let n=e.length;if(t<0&&(t+=n),t<0||t>=n)return;let i=e[t];for(let i=t+1;i<n;++i)e[i-1]=e[i];return e.length=n-1,i}e.firstIndexOf=t,e.lastIndexOf=n,e.findFirstIndex=i,e.findLastIndex=r,e.findFirstValue=function(e,t,n=0,r=-1){let s=i(e,t,n,r);return-1!==s?e[s]:void 0},e.findLastValue=function(e,t,n=-1,i=0){let s=r(e,t,n,i);return-1!==s?e[s]:void 0},e.lowerBound=function(e,t,n,i=0,r=-1){let s=e.length;if(0===s)return 0;let o=i=i<0?Math.max(0,i+s):Math.min(i,s-1),l=(r=r<0?Math.max(0,r+s):Math.min(r,s-1))-i+1;for(;l>0;){let i=l>>1,r=o+i;n(e[r],t)<0?(o=r+1,l-=i+1):l=i}return o},e.upperBound=function(e,t,n,i=0,r=-1){let s=e.length;if(0===s)return 0;let o=i=i<0?Math.max(0,i+s):Math.min(i,s-1),l=(r=r<0?Math.max(0,r+s):Math.min(r,s-1))-i+1;for(;l>0;){let i=l>>1,r=o+i;n(e[r],t)>0?l=i:(o=r+1,l-=i+1)}return o},e.shallowEqual=function(e,t,n){if(e===t)return!0;if(e.length!==t.length)return!1;for(let i=0,r=e.length;i<r;++i)if(n?!n(e[i],t[i]):e[i]!==t[i])return!1;return!0},e.slice=function(e,t={}){let{start:n,stop:i,step:r}=t;if(void 0===r&&(r=1),0===r)throw new Error("Slice `step` cannot be zero.");let s,o=e.length;void 0===n?n=r<0?o-1:0:n<0?n=Math.max(n+o,r<0?-1:0):n>=o&&(n=r<0?o-1:o),void 0===i?i=r<0?-1:o:i<0?i=Math.max(i+o,r<0?-1:0):i>=o&&(i=r<0?o-1:o),s=r<0&&i>=n||r>0&&n>=i?0:r<0?Math.floor((i-n+1)/r+1):Math.floor((i-n-1)/r+1);let l=[];for(let t=0;t<s;++t)l[t]=e[n+t*r];return l},e.move=function(e,t,n){let i=e.length;if(i<=1)return;if((t=t<0?Math.max(0,t+i):Math.min(t,i-1))===(n=n<0?Math.max(0,n+i):Math.min(n,i-1)))return;let r=e[t],s=t<n?1:-1;for(let i=t;i!==n;i+=s)e[i]=e[i+s];e[n]=r},e.reverse=s,e.rotate=function(e,t,n=0,i=-1){let r=e.length;if(r<=1)return;if((n=n<0?Math.max(0,n+r):Math.min(n,r-1))>=(i=i<0?Math.max(0,i+r):Math.min(i,r-1)))return;let o=i-n+1;if(t>0?t%=o:t<0&&(t=(t%o+o)%o),0===t)return;let l=n+t;s(e,n,l-1),s(e,l,i),s(e,n,i)},e.fill=function(e,t,n=0,i=-1){let r,s=e.length;if(0!==s){n=n<0?Math.max(0,n+s):Math.min(n,s-1),r=(i=i<0?Math.max(0,i+s):Math.min(i,s-1))<n?i+1+(s-n):i-n+1;for(let i=0;i<r;++i)e[(n+i)%s]=t}},e.insert=function(e,t,n){let i=e.length;t=t<0?Math.max(0,t+i):Math.min(t,i);for(let n=i;n>t;--n)e[n]=e[n-1];e[t]=n},e.removeAt=o,e.removeFirstOf=function(e,n,i=0,r=-1){let s=t(e,n,i,r);return-1!==s&&o(e,s),s},e.removeLastOf=function(e,t,i=-1,r=0){let s=n(e,t,i,r);return-1!==s&&o(e,s),s},e.removeAllOf=function(e,t,n=0,i=-1){let r=e.length;if(0===r)return 0;n=n<0?Math.max(0,n+r):Math.min(n,r-1),i=i<0?Math.max(0,i+r):Math.min(i,r-1);let s=0;for(let o=0;o<r;++o)n<=i&&o>=n&&o<=i&&e[o]===t||i<n&&(o<=i||o>=n)&&e[o]===t?s++:s>0&&(e[o-s]=e[o]);return s>0&&(e.length=r-s),s},e.removeFirstWhere=function(e,t,n=0,r=-1){let s,l=i(e,t,n,r);return-1!==l&&(s=o(e,l)),{index:l,value:s}},e.removeLastWhere=function(e,t,n=-1,i=0){let s,l=r(e,t,n,i);return-1!==l&&(s=o(e,l)),{index:l,value:s}},e.removeAllWhere=function(e,t,n=0,i=-1){let r=e.length;if(0===r)return 0;n=n<0?Math.max(0,n+r):Math.min(n,r-1),i=i<0?Math.max(0,i+r):Math.min(i,r-1);let s=0;for(let o=0;o<r;++o)n<=i&&o>=n&&o<=i&&t(e[o],o)||i<n&&(o<=i||o>=n)&&t(e[o],o)?s++:s>0&&(e[o-s]=e[o]);return s>0&&(e.length=r-s),s}}(i||(i={})),function(e){e.rangeLength=function(e,t,n){return 0===n?1/0:e>t&&n>0||e<t&&n<0?0:Math.ceil((t-e)/n)}}(r||(r={})),function(e){function t(e,t,n=0){let i=new Array(t.length);for(let r=0,s=n,o=t.length;r<o;++r,++s){if(s=e.indexOf(t[r],s),-1===s)return null;i[r]=s}return i}e.findIndices=t,e.matchSumOfSquares=function(e,n,i=0){let r=t(e,n,i);if(!r)return null;let s=0;for(let e=0,t=r.length;e<t;++e){let t=r[e]-i;s+=t*t}return{score:s,indices:r}},e.matchSumOfDeltas=function(e,n,i=0){let r=t(e,n,i);if(!r)return null;let s=0,o=i-1;for(let e=0,t=r.length;e<t;++e){let t=r[e];s+=t-o-1,o=t}return{score:s,indices:r}},e.highlight=function(e,t,n){let i=[],r=0,s=0,o=t.length;for(;r<o;){let l=t[r],a=t[r];for(;++r<o&&t[r]===a+1;)a++;s<l&&i.push(e.slice(s,l)),l<a+1&&i.push(n(e.slice(l,a+1))),s=a+1}return s<e.length&&i.push(e.slice(s)),i},e.cmp=function(e,t){return e<t?-1:e>t?1:0}}(s||(s={}));class h{constructor(e){this._delegate=new a.PromiseDelegate,this._plugins=new Map,this._services=new Map,this._started=!1,this._bubblingKeydown=!1,this.commands=new l.CommandRegistry,this.contextMenu=new u.ContextMenu({commands:this.commands,renderer:e.contextMenuRenderer}),this.shell=e.shell}get started(){return this._delegate.promise}get bubblingKeydown(){return this._bubblingKeydown}set bubblingKeydown(e){document.removeEventListener("keydown",this,!this._bubblingKeydown),this._bubblingKeydown=e,document.addEventListener("keydown",this,!this._bubblingKeydown)}getPluginDescription(e){var t,n;return null!==(n=null===(t=this._plugins.get(e))||void 0===t?void 0:t.description)&&void 0!==n?n:""}hasPlugin(e){return this._plugins.has(e)}isPluginActivated(e){var t,n;return null!==(n=null===(t=this._plugins.get(e))||void 0===t?void 0:t.activated)&&void 0!==n&&n}listPlugins(){return Array.from(this._plugins.keys())}registerPlugin(e){if(this._plugins.has(e.id))throw new TypeError(`Plugin '${e.id}' is already registered.`);const t=o.createPluginData(e);o.ensureNoCycle(t,this._plugins,this._services),t.provides&&this._services.set(t.provides,t.id),this._plugins.set(t.id,t)}registerPlugins(e){for(const t of e)this.registerPlugin(t)}deregisterPlugin(e,t){const n=this._plugins.get(e);if(n){if(n.activated&&!t)throw new Error(`Plugin '${e}' is still active.`);this._plugins.delete(e)}}async activatePlugin(e){const t=this._plugins.get(e);if(!t)throw new ReferenceError(`Plugin '${e}' is not registered.`);if(t.activated)return;if(t.promise)return t.promise;const n=t.requires.map((e=>this.resolveRequiredService(e))),i=t.optional.map((e=>this.resolveOptionalService(e)));return t.promise=Promise.all([...n,...i]).then((e=>t.activate.apply(void 0,[this,...e]))).then((e=>{t.service=e,t.activated=!0,t.promise=null})).catch((e=>{throw t.promise=null,e})),t.promise}async deactivatePlugin(e){const t=this._plugins.get(e);if(!t)throw new ReferenceError(`Plugin '${e}' is not registered.`);if(!t.activated)return[];if(!t.deactivate)throw new TypeError(`Plugin '${e}'#deactivate() method missing`);const n=o.findDependents(e,this._plugins,this._services),i=n.map((e=>this._plugins.get(e)));for(const t of i)if(!t.deactivate)throw new TypeError(`Plugin ${t.id}#deactivate() method missing (depends on ${e})`);for(const e of i){const t=[...e.requires,...e.optional].map((e=>{const t=this._services.get(e);return t?this._plugins.get(t).service:null}));await e.deactivate(this,...t),e.service=null,e.activated=!1}return n.pop(),n}async resolveRequiredService(e){const t=this._services.get(e);if(!t)throw new TypeError(`No provider for: ${e.name}.`);const n=this._plugins.get(t);return n.activated||await this.activatePlugin(t),n.service}async resolveOptionalService(e){const t=this._services.get(e);if(!t)return null;const n=this._plugins.get(t);if(!n.activated)try{await this.activatePlugin(t)}catch(e){return console.error(e),null}return n.service}start(e={}){if(this._started)return this._delegate.promise;this._started=!0,this._bubblingKeydown=e.bubblingKeydown||!1;const t=e.hostID||"",n=o.collectStartupPlugins(this._plugins,e).map((e=>this.activatePlugin(e).catch((t=>{console.error(`Plugin '${e}' failed to activate.`),console.error(t)}))));return Promise.all(n).then((()=>{this.attachShell(t),this.addEventListeners(),this._delegate.resolve()})),this._delegate.promise}get deferredPlugins(){return Array.from(this._plugins).filter((([e,t])=>"defer"===t.autoStart)).map((([e,t])=>e))}async activateDeferredPlugins(){const e=this.deferredPlugins.filter((e=>this._plugins.get(e).autoStart)).map((e=>this.activatePlugin(e)));await Promise.all(e)}handleEvent(e){switch(e.type){case"resize":this.evtResize(e);break;case"keydown":this.evtKeydown(e);break;case"contextmenu":this.evtContextMenu(e)}}attachShell(e){u.Widget.attach(this.shell,e&&document.getElementById(e)||document.body)}addEventListeners(){this._bubblingKeydown&&console.log("The keydown events are handled during bubbling phase"),document.addEventListener("contextmenu",this),document.addEventListener("keydown",this,!this._bubblingKeydown),window.addEventListener("resize",this)}evtKeydown(e){this.commands.processKeydownEvent(e)}evtContextMenu(e){e.shiftKey||this.contextMenu.open(e)&&(e.preventDefault(),e.stopPropagation())}evtResize(e){this.shell.update()}}!function(e){e.createPluginData=function(e){var t,n,i,r;return{id:e.id,description:null!==(t=e.description)&&void 0!==t?t:"",service:null,promise:null,activated:!1,activate:e.activate,deactivate:null!==(n=e.deactivate)&&void 0!==n?n:null,provides:null!==(i=e.provides)&&void 0!==i?i:null,autoStart:null!==(r=e.autoStart)&&void 0!==r&&r,requires:e.requires?e.requires.slice():[],optional:e.optional?e.optional.slice():[]}},e.ensureNoCycle=function(e,t,n){const i=[...e.requires,...e.optional],r=i=>{if(i===e.provides)return!0;const o=n.get(i);if(!o)return!1;const l=t.get(o),a=[...l.requires,...l.optional];return 0!==a.length&&(s.push(o),!!a.some(r)||(s.pop(),!1))};if(!e.provides||0===i.length)return;const s=[e.id];if(i.some(r))throw new ReferenceError(`Cycle detected: ${s.join(" -> ")}.`)},e.findDependents=function(e,t,n){const i=new Array,r=e=>{const r=t.get(e),s=[...r.requires,...r.optional];i.push(...s.reduce(((t,i)=>{const r=n.get(i);return r&&t.push([e,r]),t}),[]))};for(const e of t.keys())r(e);const s=i.filter((t=>t[1]===e));let o=0;for(;s.length>o;){const e=s.length,t=new Set(s.map((e=>e[0])));for(const e of t)i.filter((t=>t[1]===e)).forEach((e=>{s.includes(e)||s.push(e)}));o=e}const l=function(e){let t=[],n=new Set,i=new Map;for(const t of e)r(t);for(const[e]of i)s(e);return t;function r(e){let[t,n]=e,r=i.get(n);r?r.push(t):i.set(n,[t])}function s(e){if(n.has(e))return;n.add(e);let r=i.get(e);if(r)for(const e of r)s(e);t.push(e)}}(s),a=l.findIndex((t=>t===e));return-1===a?[e]:l.slice(0,a+1)},e.collectStartupPlugins=function(e,t){const n=new Set;for(const t of e.keys())!0===e.get(t).autoStart&&n.add(t);if(t.startPlugins)for(const e of t.startPlugins)n.add(e);if(t.ignorePlugins)for(const e of t.ignorePlugins)n.delete(e);return Array.from(n)}}(o||(o={}))}}]);