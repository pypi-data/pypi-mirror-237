import{S as ne,i as ie,s as ae,k as D,a as H,q as re,e as A,l as L,m as R,h as k,c as j,r as se,n as P,G as b,p as K,b as $,a0 as I,H as he,v as O,d as w,f as T,g as v,u as oe,W as me,X as _e,a2 as ge,a3 as G,y as U,z as Y,A as q,B,a4 as pe,O as be}from"./index.c33bdc5f.js";import{a1 as ve,ao as ke,ai as F,U as we,aj as Se,av as Ee,aE as Ve,X as ye,au as $e,aA as Fe,br as Ie,aF as Pe,bs as Ae,bt as Ne,a9 as De}from"./Commands.5ecfd081.js";import{s as J,C as Le,a as Re}from"./notificationsStore.bf4bc03e.js";function Q(r,e,l){const t=r.slice();return t[2]=e[l],t}function Ce(r){let e,l;return e=new Le({}),{c(){U(e.$$.fragment)},l(t){Y(e.$$.fragment,t)},m(t,n){q(e,t,n),l=!0},i(t){l||(v(e.$$.fragment,t),l=!0)},o(t){w(e.$$.fragment,t),l=!1},d(t){B(e,t)}}}function Me(r){let e,l;return e=new Re({}),{c(){U(e.$$.fragment)},l(t){Y(e.$$.fragment,t)},m(t,n){q(e,t,n),l=!0},i(t){l||(v(e.$$.fragment,t),l=!0)},o(t){w(e.$$.fragment,t),l=!1},d(t){B(e,t)}}}function Z(r){var o;let e,l=(r[0].formattedValue||((o=r[0].children)!=null&&o.length?"":"n/a"))+"",t,n;return{c(){e=D("div"),t=re(l),this.h()},l(i){e=L(i,"DIV",{title:!0,class:!0});var s=R(e);t=se(s,l),s.forEach(k),this.h()},h(){var i,s;P(e,"title",n=(i=r[0].value)==null?void 0:i.toString()),P(e,"class","truncated text-right svelte-1woyz4e"),b(e,"italic",!r[0].formattedValue&&!((s=r[0].children)!=null&&s.length))},m(i,s){$(i,e,s),I(e,t)},p(i,s){var a,c,d;s&1&&l!==(l=(i[0].formattedValue||((a=i[0].children)!=null&&a.length?"":"n/a"))+"")&&oe(t,l),s&1&&n!==(n=(c=i[0].value)==null?void 0:c.toString())&&P(e,"title",n),s&1&&b(e,"italic",!i[0].formattedValue&&!((d=i[0].children)!=null&&d.length))},d(i){i&&k(e)}}}function x(r){let e,l=[],t=new Map,n,o,i=r[0].children;const s=a=>ve(a[2].path);for(let a=0;a<i.length;a+=1){let c=Q(r,i,a),d=s(c);t.set(d,l[a]=ee(d,c))}return{c(){e=D("div");for(let a=0;a<l.length;a+=1)l[a].c();this.h()},l(a){e=L(a,"DIV",{});var c=R(e);for(let d=0;d<l.length;d+=1)l[d].l(c);c.forEach(k),this.h()},h(){b(e,"bg-blue-100",r[0].isSignal),b(e,"bg-emerald-100",r[0].isPreviewSignal)},m(a,c){$(a,e,c);for(let d=0;d<l.length;d+=1)l[d]&&l[d].m(e,null);o=!0},p(a,c){c&1&&(i=a[0].children,O(),l=me(l,c,s,1,a,i,t,e,_e,ee,null,Q),T()),(!o||c&1)&&b(e,"bg-blue-100",a[0].isSignal),(!o||c&1)&&b(e,"bg-emerald-100",a[0].isPreviewSignal)},i(a){if(!o){for(let c=0;c<i.length;c+=1)v(l[c]);a&&ge(()=>{o&&(n||(n=G(e,J,{},!0)),n.run(1))}),o=!0}},o(a){for(let c=0;c<l.length;c+=1)w(l[c]);a&&(n||(n=G(e,J,{},!1)),n.run(0)),o=!1},d(a){a&&k(e);for(let c=0;c<l.length;c+=1)l[c].d();a&&n&&n.end()}}}function ee(r,e){let l,t,n;return t=new ce({props:{node:e[2]}}),{key:r,first:null,c(){l=A(),U(t.$$.fragment),this.h()},l(o){l=A(),Y(t.$$.fragment,o),this.h()},h(){this.first=l},m(o,i){$(o,l,i),q(t,o,i),n=!0},p(o,i){e=o;const s={};i&1&&(s.node=e[2]),t.$set(s)},i(o){n||(v(t.$$.fragment,o),n=!0)},o(o){w(t.$$.fragment,o),n=!1},d(o){o&&k(l),B(t,o)}}}function ze(r){var M;let e,l,t,n,o,i,s=r[0].fieldName+"",a,c,d,g,_,E,y;const N=[Me,Ce],S=[];function C(f,u){return f[0].expanded?0:1}t=C(r),n=S[t]=N[t](r);let m=(r[0].formattedValue||!((M=r[0].children)!=null&&M.length))&&Z(r),h=r[0].children&&r[0].expanded&&x(r);return{c(){e=D("div"),l=D("button"),n.c(),o=H(),i=D("div"),a=re(s),c=H(),m&&m.c(),d=H(),h&&h.c(),g=A(),this.h()},l(f){e=L(f,"DIV",{class:!0});var u=R(e);l=L(u,"BUTTON",{class:!0});var p=R(l);n.l(p),p.forEach(k),o=j(u),i=L(u,"DIV",{class:!0});var V=R(i);a=se(V,s),V.forEach(k),c=j(u),m&&m.l(u),u.forEach(k),d=j(f),h&&h.l(f),g=A(),this.h()},h(){var f;P(l,"class","p-1"),b(l,"invisible",!((f=r[0].children)!=null&&f.length)),P(i,"class","truncated font-mono font-medium text-neutral-500 svelte-1woyz4e"),K(i,"min-width","10ch"),P(e,"class","flex items-center gap-x-1 pr-2 text-xs"),b(e,"bg-blue-100",r[0].isSignal),b(e,"bg-emerald-100",r[0].isPreviewSignal),b(e,"bg-teal-100",r[0].isLabel),K(e,"padding-left",.25+(r[0].path.length-1)*.5+"rem"),K(e,"line-height","1.7rem")},m(f,u){$(f,e,u),I(e,l),S[t].m(l,null),I(e,o),I(e,i),I(i,a),I(e,c),m&&m.m(e,null),$(f,d,u),h&&h.m(f,u),$(f,g,u),_=!0,E||(y=he(l,"click",r[1]),E=!0)},p(f,[u]){var V,z;let p=t;t=C(f),t!==p&&(O(),w(S[p],1,1,()=>{S[p]=null}),T(),n=S[t],n||(n=S[t]=N[t](f),n.c()),v(n,1),n.m(l,null)),(!_||u&1)&&b(l,"invisible",!((V=f[0].children)!=null&&V.length)),(!_||u&1)&&s!==(s=f[0].fieldName+"")&&oe(a,s),f[0].formattedValue||!((z=f[0].children)!=null&&z.length)?m?m.p(f,u):(m=Z(f),m.c(),m.m(e,null)):m&&(m.d(1),m=null),(!_||u&1)&&b(e,"bg-blue-100",f[0].isSignal),(!_||u&1)&&b(e,"bg-emerald-100",f[0].isPreviewSignal),(!_||u&1)&&b(e,"bg-teal-100",f[0].isLabel),u&1&&K(e,"padding-left",.25+(f[0].path.length-1)*.5+"rem"),f[0].children&&f[0].expanded?h?(h.p(f,u),u&1&&v(h,1)):(h=x(f),h.c(),v(h,1),h.m(g.parentNode,g)):h&&(O(),w(h,1,1,()=>{h=null}),T())},i(f){_||(v(n),v(h),_=!0)},o(f){w(n),w(h),_=!1},d(f){f&&k(e),S[t].d(),m&&m.d(),f&&k(d),h&&h.d(f),f&&k(g),E=!1,y()}}}function fe(r){r.expanded=!0,r.children&&r.children.forEach(fe)}function Ke(r,e,l){let{node:t}=e;const n=()=>{l(0,t.expanded=!t.expanded,t),t.isSignal&&t.expanded&&fe(t),l(0,t)};return r.$$set=o=>{"node"in o&&l(0,t=o.node)},[t,n]}class ce extends ne{constructor(e){super(),ie(this,e,Ke,ze,ae,{node:0})}}function te(r,e,l){const t=r.slice();return t[7]=e[l],t}function le(r){let e,l;return e=new ce({props:{node:r[7]}}),{c(){U(e.$$.fragment)},l(t){Y(e.$$.fragment,t)},m(t,n){q(e,t,n),l=!0},p(t,n){const o={};n&1&&(o.node=t[7]),e.$set(o)},i(t){l||(v(e.$$.fragment,t),l=!0)},o(t){w(e.$$.fragment,t),l=!1},d(t){B(e,t)}}}function Oe(r){let e,l,t=r[0].children||[],n=[];for(let i=0;i<t.length;i+=1)n[i]=le(te(r,t,i));const o=i=>w(n[i],1,1,()=>{n[i]=null});return{c(){for(let i=0;i<n.length;i+=1)n[i].c();e=A()},l(i){for(let s=0;s<n.length;s+=1)n[s].l(i);e=A()},m(i,s){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(i,s);$(i,e,s),l=!0},p(i,[s]){if(s&1){t=i[0].children||[];let a;for(a=0;a<t.length;a+=1){const c=te(i,t,a);n[a]?(n[a].p(c,s),v(n[a],1)):(n[a]=le(c),n[a].c(),v(n[a],1),n[a].m(e.parentNode,e))}for(O(),a=t.length;a<n.length;a+=1)o(a);T()}},i(i){if(!l){for(let s=0;s<t.length;s+=1)v(n[s]);l=!0}},o(i){n=n.filter(Boolean);for(let s=0;s<n.length;s+=1)w(n[s]);l=!1},d(i){pe(n,i),i&&k(e)}}}function Te(r,e,l){let t,n,{row:o}=e,{selectRowsSchema:i=void 0}=e,{highlightedFields:s}=e;const a=ke();be(r,a,d=>l(5,n=d));function c(d){var f;const g=F.field(d),_=F.path(d);let E=F.value(d),y=F.span(d);if(g.dtype==="string_span"&&(y=y||E,y!=null)){const u=[];for(let p=_.length-1;p>=0;p--){const V=_.slice(0,p);if(we(i.schema,V).dtype==="string"){const W=F.value(Se(o,V));u.push(W.slice(y.start,y.end));break}}E=u}const N=((f=n.data)==null?void 0:f.some(u=>{var p;return u.name===((p=g.signal)==null?void 0:p.signal_name)}))||!1,S=Ee(g),C=Ve(g);let m;N||S&&g.dtype==null||g.dtype==="embedding"||g.repeated_field!=null?m="":E==null?m=null:m=ye(E);function h(u){const{[Ie]:p,[Pe]:V,[Ae]:z,[Ne]:W,[De]:Ue,...de}=u;return Object.values(de).filter(ue=>{var X;return((X=F.field(ue))==null?void 0:X.label)==null})}const M=s.some(u=>$e(u.path,_));return{children:Array.isArray(d)?d.map(c):h(d).map(c),fieldName:_[_.length-1],field:g,path:_,expanded:M,isSignal:S,isLabel:C,isPreviewSignal:i!=null?Fe(i,_):!1,isEmbeddingSignal:N,value:E,formattedValue:m}}return r.$$set=d=>{"row"in d&&l(2,o=d.row),"selectRowsSchema"in d&&l(3,i=d.selectRowsSchema),"highlightedFields"in d&&l(4,s=d.highlightedFields)},r.$$.update=()=>{r.$$.dirty&4&&l(0,t=c(o))},[t,a,o,i,s]}class He extends ne{constructor(e){super(),ie(this,e,Te,Oe,ae,{row:2,selectRowsSchema:3,highlightedFields:4})}}export{He as I};
